{"ast":null,"code":"import _objectSpread from\"C:/Users/lucas/Downloads/Minimarket PRO/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{isAdmin,getCurrentMarket,isMarket}from'../utils/auth';import{getAllData,putData,addData,deleteData,syncLocalStorageWithIndexedDB}from'../utils/indexedDb';import PdfInvoiceReader from'./PdfInvoiceReader';import ProductMergeModal from'./ProductMergeModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SuppliersDashboard=_ref=>{let{selectedMarket}=_ref;const[suppliers,setSuppliers]=useState([]);const[showForm,setShowForm]=useState(false);const[editingSupplier,setEditingSupplier]=useState(null);const[formData,setFormData]=useState({id:Date.now(),name:'',lastName:'',dni:'',address:'',email:'',whatsapp:'',paymentMethods:'',marketId:''});const[invoiceProducts,setInvoiceProducts]=useState([]);const[showMergeModal,setShowMergeModal]=useState(false);const[productToMerge,setProductToMerge]=useState(null);const[existingProductForMerge,setExistingProductForMerge]=useState(null);const[currentInvoiceProductIndex,setCurrentInvoiceProductIndex]=useState(0);const[isProcessingInvoice,setIsProcessingInvoice]=useState(false);useEffect(()=>{const loadData=async()=>{const allSuppliers=await getAllData('suppliers');const marketToShow=isAdmin()?selectedMarket:getCurrentMarket();const filteredSuppliers=isAdmin()&&selectedMarket?allSuppliers.filter(s=>s.marketId===selectedMarket):allSuppliers.filter(s=>s.marketId===marketToShow);setSuppliers(filteredSuppliers);};loadData();},[selectedMarket]);const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};const handleSaveSupplier=async()=>{const marketId=isAdmin()?selectedMarket:getCurrentMarket();const supplierToSave=_objectSpread(_objectSpread({},formData),{},{marketId});const allExistingSuppliers=await getAllData('suppliers');let updatedSuppliers;if(editingSupplier){updatedSuppliers=allExistingSuppliers.map(s=>s.id===editingSupplier.id?supplierToSave:s);await putData('suppliers',supplierToSave);}else{updatedSuppliers=[...allExistingSuppliers,supplierToSave];await addData('suppliers',supplierToSave);}syncLocalStorageWithIndexedDB('suppliers',updatedSuppliers);const filteredSuppliers=isAdmin()&&!selectedMarket?updatedSuppliers:updatedSuppliers.filter(s=>s.marketId===marketId);setSuppliers(filteredSuppliers);setShowForm(false);setEditingSupplier(null);setFormData({id:Date.now(),name:'',lastName:'',dni:'',address:'',email:'',whatsapp:'',paymentMethods:'',marketId:''});};const handleEditSupplier=supplier=>{setEditingSupplier(supplier);setFormData(supplier);setShowForm(true);};const handleDeleteSupplier=async id=>{await deleteData('suppliers',id);const allExistingSuppliers=await getAllData('suppliers');syncLocalStorageWithIndexedDB('suppliers',allExistingSuppliers);const marketToShow=isAdmin()?selectedMarket:getCurrentMarket();const filteredSuppliers=isAdmin()&&!selectedMarket?allExistingSuppliers:allExistingSuppliers.filter(s=>s.marketId===marketToShow);setSuppliers(filteredSuppliers);};const handleInvoiceDataExtracted=data=>{setInvoiceProducts(data);// No iniciar el procesamiento automático aquí, solo mostrar la tabla\n};const processNextInvoiceProduct=async(productsToProcess,index)=>{setIsProcessingInvoice(true);if(index>=productsToProcess.length){alert('Todos los productos de la factura han sido procesados y cargados al inventario.');setInvoiceProducts([]);setIsProcessingInvoice(false);return;}const item=productsToProcess[index];const allExistingProducts=await getAllData('products');const existingProduct=allExistingProducts.find(p=>p.name===item.description);if(existingProduct){setProductToMerge(item);setExistingProductForMerge(existingProduct);setCurrentInvoiceProductIndex(index);setShowMergeModal(true);}else{await addProductFromInvoice(item,'new');processNextInvoiceProduct(productsToProcess,index+1);}};const addProductFromInvoice=async(item,action)=>{const marketId=isAdmin()?selectedMarket:getCurrentMarket();const allExistingProducts=await getAllData('products');let updatedProductsList=[...allExistingProducts];if(action==='new'){const newProduct={id:Date.now(),name:item.description,barcode:'',category:'Sin Categoría',subcategory:'',unit:'unidad',price:item.unitPrice,cost:item.unitPrice,markup:0,supplier:'',minStock:0,image:null,marketId:marketId,lots:[{id:Date.now(),quantity:item.quantity,expiryDate:''}]};newProduct.stock=newProduct.lots[0].quantity;await addData('products',newProduct);updatedProductsList.push(newProduct);}else if(action==='update'){const existingProduct=allExistingProducts.find(p=>p.name===item.description);if(existingProduct){const newLot={id:Date.now(),quantity:item.quantity,expiryDate:''};const updatedLots=[...(existingProduct.lots||[]),newLot].sort((a,b)=>new Date(a.expiryDate)-new Date(b.expiryDate));const updatedStock=updatedLots.reduce((sum,lot)=>sum+lot.quantity,0);const updatedProduct=_objectSpread(_objectSpread({},existingProduct),{},{stock:updatedStock,lots:updatedLots});await putData('products',updatedProduct);updatedProductsList=updatedProductsList.map(p=>p.id===updatedProduct.id?updatedProduct:p);}}syncLocalStorageWithIndexedDB('products',updatedProductsList);};const handleMergeConfirm=async(productData,action)=>{setShowMergeModal(false);await addProductFromInvoice(productData,action);processNextInvoiceProduct(invoiceProducts,currentInvoiceProductIndex+1);};const handleMergeCancel=()=>{setShowMergeModal(false);processNextInvoiceProduct(invoiceProducts,currentInvoiceProductIndex+1);};const handleInvoiceProductChange=(id,field,value)=>{setInvoiceProducts(prevProducts=>prevProducts.map(item=>{if(item.id===id){const updatedItem=_objectSpread(_objectSpread({},item),{},{[field]:value});if(field==='quantity'||field==='unitPrice'){updatedItem.subtotal=updatedItem.quantity*updatedItem.unitPrice;}const calculatedSubtotal=updatedItem.quantity*updatedItem.unitPrice;const isConsistent=Math.abs(calculatedSubtotal-updatedItem.subtotal)<0.01;return _objectSpread(_objectSpread({},updatedItem),{},{isConsistent});}return item;}));};const handleAcceptAllInvoiceProducts=()=>{// Iniciar el proceso de carga uno por uno, manejando las fusiones\nprocessNextInvoiceProduct(invoiceProducts,0);};if(!isAdmin()&&!isMarket()){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-10 text-gray-800 dark:text-white\",children:\"Acceso no autorizado\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800 dark:text-white mb-6\",children:\"Gesti\\xF3n de Proveedores\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-700 dark:text-gray-200\",children:\"Listado de Proveedores\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setEditingSupplier(null);setFormData({id:Date.now(),name:'',lastName:'',dni:'',address:'',email:'',whatsapp:'',paymentMethods:'',marketId:''});setShowForm(true);},className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\",children:\"Agregar Proveedor\"})]}),showForm&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-6 rounded-lg shadow-inner mb-6 dark:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-800 dark:text-white mb-4\",children:editingSupplier?'Editar Proveedor':'Nuevo Proveedor'}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[isAdmin()&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Mercado\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"marketId\",value:formData.marketId,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar mercado\"}),JSON.parse(localStorage.getItem('markets')||'[]').map(market=>/*#__PURE__*/_jsx(\"option\",{value:market.id,children:market.name},market.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Apellido\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastName\",value:formData.lastName,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"DNI\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"dni\",value:formData.dni,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Direcci\\xF3n\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:formData.address,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:formData.email,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"WhatsApp\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"whatsapp\",value:formData.whatsapp,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"M\\xE9todos de Pago\"}),/*#__PURE__*/_jsx(\"textarea\",{name:\"paymentMethods\",value:formData.paymentMethods,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\",rows:\"3\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowForm(false),className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-500\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleSaveSupplier,className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700\",children:\"Guardar Proveedor\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-4 rounded-lg shadow-inner mb-6 dark:bg-gray-700\",children:suppliers.length>0?/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-600\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Contacto\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"M\\xE9todos de Pago\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Acciones\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\",children:suppliers.map(supplier=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm font-medium text-gray-900 dark:text-white\",children:[supplier.name,\" \",supplier.lastName]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:supplier.dni})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900 dark:text-white\",children:supplier.email}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-500 dark:text-gray-400\",children:[\"WhatsApp: \",supplier.whatsapp]})]}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap\",children:/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-900 dark:text-white\",children:supplier.paymentMethods})}),/*#__PURE__*/_jsxs(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm font-medium\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleEditSupplier(supplier),className:\"text-blue-600 hover:text-blue-900 mr-4\",children:\"Editar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDeleteSupplier(supplier.id),className:\"text-red-600 hover:text-red-900\",children:\"Eliminar\"})]})]},supplier.id))})]}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-300\",children:\"No hay proveedores registrados en este mercado.\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-8\",children:[/*#__PURE__*/_jsx(PdfInvoiceReader,{onDataExtracted:handleInvoiceDataExtracted}),invoiceProducts.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-lg font-medium text-gray-800 dark:text-white mb-4\",children:\"Productos Extra\\xEDdos de Factura\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"bg-gray-50 dark:bg-gray-600\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Descripci\\xF3n\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Precio Unitario\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Subtotal\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Inconsistencia\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\",children:invoiceProducts.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.quantity,onChange:e=>handleInvoiceProductChange(item.id,'quantity',parseFloat(e.target.value)||0),className:\"w-20 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:item.description,onChange:e=>handleInvoiceProductChange(item.id,'description',e.target.value),className:\"w-full px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.unitPrice,onChange:e=>handleInvoiceProductChange(item.id,'unitPrice',parseFloat(e.target.value)||0),className:\"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:item.subtotal,onChange:e=>handleInvoiceProductChange(item.id,'subtotal',parseFloat(e.target.value)||0),className:\"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:!item.isConsistent&&/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5 text-red-500\",viewBox:\"0 0 20 20\",fill:\"currentColor\",title:\"Inconsistencia detectada\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",clipRule:\"evenodd\"})})})]},item.id))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAcceptAllInvoiceProducts,className:\"mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\",disabled:isProcessingInvoice,children:isProcessingInvoice?'Cargando...':'Cargar Productos al Inventario'})]})]})]});};export default SuppliersDashboard;","map":{"version":3,"names":["React","useState","useEffect","isAdmin","getCurrentMarket","isMarket","getAllData","putData","addData","deleteData","syncLocalStorageWithIndexedDB","PdfInvoiceReader","ProductMergeModal","jsx","_jsx","jsxs","_jsxs","SuppliersDashboard","_ref","selectedMarket","suppliers","setSuppliers","showForm","setShowForm","editingSupplier","setEditingSupplier","formData","setFormData","id","Date","now","name","lastName","dni","address","email","whatsapp","paymentMethods","marketId","invoiceProducts","setInvoiceProducts","showMergeModal","setShowMergeModal","productToMerge","setProductToMerge","existingProductForMerge","setExistingProductForMerge","currentInvoiceProductIndex","setCurrentInvoiceProductIndex","isProcessingInvoice","setIsProcessingInvoice","loadData","allSuppliers","marketToShow","filteredSuppliers","filter","s","handleChange","e","value","target","prev","_objectSpread","handleSaveSupplier","supplierToSave","allExistingSuppliers","updatedSuppliers","map","handleEditSupplier","supplier","handleDeleteSupplier","handleInvoiceDataExtracted","data","processNextInvoiceProduct","productsToProcess","index","length","alert","item","allExistingProducts","existingProduct","find","p","description","addProductFromInvoice","action","updatedProductsList","newProduct","barcode","category","subcategory","unit","price","unitPrice","cost","markup","minStock","image","lots","quantity","expiryDate","stock","push","newLot","updatedLots","sort","a","b","updatedStock","reduce","sum","lot","updatedProduct","handleMergeConfirm","productData","handleMergeCancel","handleInvoiceProductChange","field","prevProducts","updatedItem","subtotal","calculatedSubtotal","isConsistent","Math","abs","handleAcceptAllInvoiceProducts","className","children","onClick","onChange","required","JSON","parse","localStorage","getItem","market","type","rows","onDataExtracted","parseFloat","xmlns","viewBox","fill","title","fillRule","d","clipRule","disabled"],"sources":["C:/Users/lucas/Downloads/Minimarket PRO/src/components/SuppliersDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { isAdmin, getCurrentMarket, isMarket } from '../utils/auth';\r\nimport { getAllData, putData, addData, deleteData, syncLocalStorageWithIndexedDB } from '../utils/indexedDb';\r\nimport PdfInvoiceReader from './PdfInvoiceReader';\r\nimport ProductMergeModal from './ProductMergeModal';\r\n\r\nconst SuppliersDashboard = ({ selectedMarket }) => {\r\n  const [suppliers, setSuppliers] = useState([]);\r\n  const [showForm, setShowForm] = useState(false);\r\n  const [editingSupplier, setEditingSupplier] = useState(null);\r\n\r\n  const [formData, setFormData] = useState({\r\n    id: Date.now(),\r\n    name: '',\r\n    lastName: '',\r\n    dni: '',\r\n    address: '',\r\n    email: '',\r\n    whatsapp: '',\r\n    paymentMethods: '',\r\n    marketId: ''\r\n  });\r\n\r\n  const [invoiceProducts, setInvoiceProducts] = useState([]);\r\n  const [showMergeModal, setShowMergeModal] = useState(false);\r\n  const [productToMerge, setProductToMerge] = useState(null);\r\n  const [existingProductForMerge, setExistingProductForMerge] = useState(null);\r\n  const [currentInvoiceProductIndex, setCurrentInvoiceProductIndex] = useState(0);\r\n  const [isProcessingInvoice, setIsProcessingInvoice] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const loadData = async () => {\r\n      const allSuppliers = await getAllData('suppliers');\r\n      const marketToShow = isAdmin() ? selectedMarket : getCurrentMarket();\r\n      const filteredSuppliers = isAdmin() && selectedMarket ? \r\n        allSuppliers.filter(s => s.marketId === selectedMarket) : \r\n        allSuppliers.filter(s => s.marketId === marketToShow);\r\n      \r\n      setSuppliers(filteredSuppliers);\r\n    };\r\n    loadData();\r\n  }, [selectedMarket]);\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({ ...prev, [name]: value }));\r\n  };\r\n\r\n  const handleSaveSupplier = async () => {\r\n    const marketId = isAdmin() ? selectedMarket : getCurrentMarket();\r\n    const supplierToSave = { ...formData, marketId };\r\n\r\n    const allExistingSuppliers = await getAllData('suppliers');\r\n    let updatedSuppliers;\r\n\r\n    if (editingSupplier) {\r\n      updatedSuppliers = allExistingSuppliers.map(s => \r\n        s.id === editingSupplier.id ? supplierToSave : s\r\n      );\r\n      await putData('suppliers', supplierToSave);\r\n    } else {\r\n      updatedSuppliers = [...allExistingSuppliers, supplierToSave];\r\n      await addData('suppliers', supplierToSave);\r\n    }\r\n    \r\n    syncLocalStorageWithIndexedDB('suppliers', updatedSuppliers);\r\n    \r\n    const filteredSuppliers = isAdmin() && !selectedMarket ? \r\n      updatedSuppliers : \r\n      updatedSuppliers.filter(s => s.marketId === marketId);\r\n    setSuppliers(filteredSuppliers);\r\n\r\n    setShowForm(false);\r\n    setEditingSupplier(null);\r\n    setFormData({\r\n      id: Date.now(),\r\n      name: '',\r\n      lastName: '',\r\n      dni: '',\r\n      address: '',\r\n      email: '',\r\n      whatsapp: '',\r\n      paymentMethods: '',\r\n      marketId: ''\r\n    });\r\n  };\r\n\r\n  const handleEditSupplier = (supplier) => {\r\n    setEditingSupplier(supplier);\r\n    setFormData(supplier);\r\n    setShowForm(true);\r\n  };\r\n\r\n  const handleDeleteSupplier = async (id) => {\r\n    await deleteData('suppliers', id);\r\n    const allExistingSuppliers = await getAllData('suppliers');\r\n    syncLocalStorageWithIndexedDB('suppliers', allExistingSuppliers);\r\n\r\n    const marketToShow = isAdmin() ? selectedMarket : getCurrentMarket();\r\n    const filteredSuppliers = isAdmin() && !selectedMarket ? \r\n      allExistingSuppliers : \r\n      allExistingSuppliers.filter(s => s.marketId === marketToShow);\r\n    setSuppliers(filteredSuppliers);\r\n  };\r\n\r\n  const handleInvoiceDataExtracted = (data) => {\r\n    setInvoiceProducts(data);\r\n    // No iniciar el procesamiento automático aquí, solo mostrar la tabla\r\n  };\r\n\r\n  const processNextInvoiceProduct = async (productsToProcess, index) => {\r\n    setIsProcessingInvoice(true);\r\n    if (index >= productsToProcess.length) {\r\n      alert('Todos los productos de la factura han sido procesados y cargados al inventario.');\r\n      setInvoiceProducts([]);\r\n      setIsProcessingInvoice(false);\r\n      return;\r\n    }\r\n\r\n    const item = productsToProcess[index];\r\n    const allExistingProducts = await getAllData('products');\r\n    const existingProduct = allExistingProducts.find(p => p.name === item.description);\r\n\r\n    if (existingProduct) {\r\n      setProductToMerge(item);\r\n      setExistingProductForMerge(existingProduct);\r\n      setCurrentInvoiceProductIndex(index);\r\n      setShowMergeModal(true);\r\n    } else {\r\n      await addProductFromInvoice(item, 'new');\r\n      processNextInvoiceProduct(productsToProcess, index + 1);\r\n    }\r\n  };\r\n\r\n  const addProductFromInvoice = async (item, action) => {\r\n    const marketId = isAdmin() ? selectedMarket : getCurrentMarket();\r\n    const allExistingProducts = await getAllData('products');\r\n    let updatedProductsList = [...allExistingProducts];\r\n\r\n    if (action === 'new') {\r\n      const newProduct = {\r\n        id: Date.now(),\r\n        name: item.description,\r\n        barcode: '',\r\n        category: 'Sin Categoría',\r\n        subcategory: '',\r\n        unit: 'unidad',\r\n        price: item.unitPrice,\r\n        cost: item.unitPrice,\r\n        markup: 0,\r\n        supplier: '',\r\n        minStock: 0,\r\n        image: null,\r\n        marketId: marketId,\r\n        lots: [{ id: Date.now(), quantity: item.quantity, expiryDate: '' }]\r\n      };\r\n      newProduct.stock = newProduct.lots[0].quantity;\r\n      await addData('products', newProduct);\r\n      updatedProductsList.push(newProduct);\r\n    } else if (action === 'update') {\r\n      const existingProduct = allExistingProducts.find(p => p.name === item.description);\r\n      if (existingProduct) {\r\n        const newLot = { id: Date.now(), quantity: item.quantity, expiryDate: '' };\r\n        const updatedLots = [...(existingProduct.lots || []), newLot].sort((a, b) => new Date(a.expiryDate) - new Date(b.expiryDate));\r\n        const updatedStock = updatedLots.reduce((sum, lot) => sum + lot.quantity, 0);\r\n        \r\n        const updatedProduct = {\r\n          ...existingProduct,\r\n          stock: updatedStock,\r\n          lots: updatedLots\r\n        };\r\n        await putData('products', updatedProduct);\r\n        updatedProductsList = updatedProductsList.map(p => p.id === updatedProduct.id ? updatedProduct : p);\r\n      }\r\n    }\r\n    syncLocalStorageWithIndexedDB('products', updatedProductsList);\r\n  };\r\n\r\n  const handleMergeConfirm = async (productData, action) => {\r\n    setShowMergeModal(false);\r\n    await addProductFromInvoice(productData, action);\r\n    processNextInvoiceProduct(invoiceProducts, currentInvoiceProductIndex + 1);\r\n  };\r\n\r\n  const handleMergeCancel = () => {\r\n    setShowMergeModal(false);\r\n    processNextInvoiceProduct(invoiceProducts, currentInvoiceProductIndex + 1);\r\n  };\r\n\r\n  const handleInvoiceProductChange = (id, field, value) => {\r\n    setInvoiceProducts(prevProducts => prevProducts.map(item => {\r\n      if (item.id === id) {\r\n        const updatedItem = { ...item, [field]: value };\r\n        if (field === 'quantity' || field === 'unitPrice') {\r\n          updatedItem.subtotal = updatedItem.quantity * updatedItem.unitPrice;\r\n        }\r\n        const calculatedSubtotal = updatedItem.quantity * updatedItem.unitPrice;\r\n        const isConsistent = Math.abs(calculatedSubtotal - updatedItem.subtotal) < 0.01;\r\n        return { ...updatedItem, isConsistent };\r\n      }\r\n      return item;\r\n    }));\r\n  };\r\n\r\n  const handleAcceptAllInvoiceProducts = () => {\r\n    // Iniciar el proceso de carga uno por uno, manejando las fusiones\r\n    processNextInvoiceProduct(invoiceProducts, 0);\r\n  };\r\n\r\n  if (!isAdmin() && !isMarket()) {\r\n    return <div className=\"text-center py-10 text-gray-800 dark:text-white\">Acceso no autorizado</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\">\r\n      <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-6\">Gestión de Proveedores</h2>\r\n\r\n      <div className=\"flex justify-between items-center mb-6\">\r\n        <h3 className=\"text-xl font-semibold text-gray-700 dark:text-gray-200\">Listado de Proveedores</h3>\r\n        <button\r\n          onClick={() => {\r\n            setEditingSupplier(null);\r\n            setFormData({\r\n              id: Date.now(),\r\n              name: '',\r\n              lastName: '',\r\n              dni: '',\r\n              address: '',\r\n              email: '',\r\n              whatsapp: '',\r\n              paymentMethods: '',\r\n              marketId: ''\r\n            });\r\n            setShowForm(true);\r\n          }}\r\n          className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\"\r\n        >\r\n          Agregar Proveedor\r\n        </button>\r\n      </div>\r\n\r\n      {showForm && (\r\n        <div className=\"bg-gray-50 p-6 rounded-lg shadow-inner mb-6 dark:bg-gray-700\">\r\n          <h4 className=\"text-lg font-medium text-gray-800 dark:text-white mb-4\">\r\n            {editingSupplier ? 'Editar Proveedor' : 'Nuevo Proveedor'}\r\n          </h4>\r\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n            {isAdmin() && (\r\n              <div>\r\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Mercado</label>\r\n                <select\r\n                  name=\"marketId\"\r\n                  value={formData.marketId}\r\n                  onChange={handleChange}\r\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\r\n                  required\r\n                >\r\n                  <option value=\"\">Seleccionar mercado</option>\r\n                  {JSON.parse(localStorage.getItem('markets') || '[]').map(market => (\r\n                    <option key={market.id} value={market.id}>{market.name}</option>\r\n                  ))}\r\n                </select>\r\n              </div>\r\n            )}\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre</label>\r\n              <input type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" required />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Apellido</label>\r\n              <input type=\"text\" name=\"lastName\" value={formData.lastName} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">DNI</label>\r\n              <input type=\"text\" name=\"dni\" value={formData.dni} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Dirección</label>\r\n              <input type=\"text\" name=\"address\" value={formData.address} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Email</label>\r\n              <input type=\"email\" name=\"email\" value={formData.email} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\r\n            </div>\r\n            <div>\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">WhatsApp</label>\r\n              <input type=\"text\" name=\"whatsapp\" value={formData.whatsapp} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\r\n            </div>\r\n            <div className=\"md:col-span-2\">\r\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Métodos de Pago</label>\r\n              <textarea name=\"paymentMethods\" value={formData.paymentMethods} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" rows=\"3\"></textarea>\r\n            </div>\r\n          </div>\r\n          <div className=\"mt-6 flex justify-end space-x-3\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowForm(false)}\r\n              className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-500\"\r\n            >\r\n              Cancelar\r\n            </button>\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleSaveSupplier}\r\n              className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700\"\r\n            >\r\n              Guardar Proveedor\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-gray-50 p-4 rounded-lg shadow-inner mb-6 dark:bg-gray-700\">\r\n        {suppliers.length > 0 ? (\r\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\">\r\n            <thead className=\"bg-gray-50 dark:bg-gray-600\">\r\n              <tr>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Nombre</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Contacto</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Métodos de Pago</th>\r\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Acciones</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\r\n              {suppliers.map(supplier => (\r\n                <tr key={supplier.id}>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{supplier.name} {supplier.lastName}</div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">{supplier.dni}</div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"text-sm text-gray-900 dark:text-white\">{supplier.email}</div>\r\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">WhatsApp: {supplier.whatsapp}</div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\r\n                    <div className=\"text-sm text-gray-900 dark:text-white\">{supplier.paymentMethods}</div>\r\n                  </td>\r\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\r\n                    <button\r\n                      onClick={() => handleEditSupplier(supplier)}\r\n                      className=\"text-blue-600 hover:text-blue-900 mr-4\"\r\n                    >\r\n                      Editar\r\n                    </button>\r\n                    <button\r\n                      onClick={() => handleDeleteSupplier(supplier.id)}\r\n                      className=\"text-red-600 hover:text-red-900\"\r\n                    >\r\n                      Eliminar\r\n                    </button>\r\n                  </td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        ) : (\r\n          <p className=\"text-gray-500 dark:text-gray-300\">No hay proveedores registrados en este mercado.</p>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"mt-8\">\r\n        <PdfInvoiceReader onDataExtracted={handleInvoiceDataExtracted} />\r\n        {invoiceProducts.length > 0 && (\r\n          <div className=\"mt-6 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700\">\r\n            <h4 className=\"text-lg font-medium text-gray-800 dark:text-white mb-4\">Productos Extraídos de Factura</h4>\r\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\">\r\n              <thead className=\"bg-gray-50 dark:bg-gray-600\">\r\n                <tr>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Cantidad</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Descripción</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Precio Unitario</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Subtotal</th>\r\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Inconsistencia</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\r\n                {invoiceProducts.map((item, index) => (\r\n                  <tr key={item.id}>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={item.quantity}\r\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'quantity', parseFloat(e.target.value) || 0)}\r\n                        className=\"w-20 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      <input\r\n                        type=\"text\"\r\n                        value={item.description}\r\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'description', e.target.value)}\r\n                        className=\"w-full px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={item.unitPrice}\r\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'unitPrice', parseFloat(e.target.value) || 0)}\r\n                        className=\"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      <input\r\n                        type=\"number\"\r\n                        value={item.subtotal}\r\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'subtotal', parseFloat(e.target.value) || 0)}\r\n                        className=\"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n                      />\r\n                    </td>\r\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\r\n                      {!item.isConsistent && (\r\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-red-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\" title=\"Inconsistencia detectada\">\r\n                          <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\r\n                        </svg>\r\n                      )}\r\n                    </td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n            <button onClick={handleAcceptAllInvoiceProducts} className=\"mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\" disabled={isProcessingInvoice}>\r\n              {isProcessingInvoice ? 'Cargando...' : 'Cargar Productos al Inventario'}\r\n            </button>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SuppliersDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}