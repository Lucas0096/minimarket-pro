{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucas\\\\OneDrive\\\\Documentos\\\\Minimarket PRO\\\\Version 1.0\\\\src\\\\components\\\\SuppliersDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { isAdmin, getCurrentMarket, isMarket } from '../utils/auth';\nimport { getAllData, putData, addData, deleteData, syncLocalStorageWithIndexedDB } from '../utils/indexedDb';\nimport PdfInvoiceReader from './PdfInvoiceReader';\nimport ProductMergeModal from './ProductMergeModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SuppliersDashboard = ({\n  selectedMarket\n}) => {\n  _s();\n  const [suppliers, setSuppliers] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [editingSupplier, setEditingSupplier] = useState(null);\n  const [formData, setFormData] = useState({\n    id: Date.now(),\n    name: '',\n    lastName: '',\n    dni: '',\n    address: '',\n    email: '',\n    whatsapp: '',\n    paymentMethods: '',\n    marketId: ''\n  });\n  const [invoiceProducts, setInvoiceProducts] = useState([]);\n  const [showMergeModal, setShowMergeModal] = useState(false);\n  const [productToMerge, setProductToMerge] = useState(null);\n  const [existingProductForMerge, setExistingProductForMerge] = useState(null);\n  const [currentInvoiceProductIndex, setCurrentInvoiceProductIndex] = useState(0);\n  const [isProcessingInvoice, setIsProcessingInvoice] = useState(false);\n  useEffect(() => {\n    const loadData = async () => {\n      const allSuppliers = await getAllData('suppliers');\n      const marketToShow = isAdmin() ? selectedMarket : getCurrentMarket();\n      const filteredSuppliers = isAdmin() && selectedMarket ? allSuppliers.filter(s => s.marketId === selectedMarket) : allSuppliers.filter(s => s.marketId === marketToShow);\n      setSuppliers(filteredSuppliers);\n    };\n    loadData();\n  }, [selectedMarket]);\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n  };\n  const handleSaveSupplier = async () => {\n    const marketId = isAdmin() ? selectedMarket : getCurrentMarket();\n    const supplierToSave = {\n      ...formData,\n      marketId\n    };\n    const allExistingSuppliers = await getAllData('suppliers');\n    let updatedSuppliers;\n    if (editingSupplier) {\n      updatedSuppliers = allExistingSuppliers.map(s => s.id === editingSupplier.id ? supplierToSave : s);\n      await putData('suppliers', supplierToSave);\n    } else {\n      updatedSuppliers = [...allExistingSuppliers, supplierToSave];\n      await addData('suppliers', supplierToSave);\n    }\n    syncLocalStorageWithIndexedDB('suppliers', updatedSuppliers);\n    const filteredSuppliers = isAdmin() && !selectedMarket ? updatedSuppliers : updatedSuppliers.filter(s => s.marketId === marketId);\n    setSuppliers(filteredSuppliers);\n    setShowForm(false);\n    setEditingSupplier(null);\n    setFormData({\n      id: Date.now(),\n      name: '',\n      lastName: '',\n      dni: '',\n      address: '',\n      email: '',\n      whatsapp: '',\n      paymentMethods: '',\n      marketId: ''\n    });\n  };\n  const handleEditSupplier = supplier => {\n    setEditingSupplier(supplier);\n    setFormData(supplier);\n    setShowForm(true);\n  };\n  const handleDeleteSupplier = async id => {\n    await deleteData('suppliers', id);\n    const allExistingSuppliers = await getAllData('suppliers');\n    syncLocalStorageWithIndexedDB('suppliers', allExistingSuppliers);\n    const marketToShow = isAdmin() ? selectedMarket : getCurrentMarket();\n    const filteredSuppliers = isAdmin() && !selectedMarket ? allExistingSuppliers : allExistingSuppliers.filter(s => s.marketId === marketToShow);\n    setSuppliers(filteredSuppliers);\n  };\n  const handleInvoiceDataExtracted = data => {\n    setInvoiceProducts(data);\n    // No iniciar el procesamiento automático aquí, solo mostrar la tabla\n  };\n  const processNextInvoiceProduct = async (productsToProcess, index) => {\n    setIsProcessingInvoice(true);\n    if (index >= productsToProcess.length) {\n      alert('Todos los productos de la factura han sido procesados y cargados al inventario.');\n      setInvoiceProducts([]);\n      setIsProcessingInvoice(false);\n      return;\n    }\n    const item = productsToProcess[index];\n    const allExistingProducts = await getAllData('products');\n    const existingProduct = allExistingProducts.find(p => p.name === item.description);\n    if (existingProduct) {\n      setProductToMerge(item);\n      setExistingProductForMerge(existingProduct);\n      setCurrentInvoiceProductIndex(index);\n      setShowMergeModal(true);\n    } else {\n      await addProductFromInvoice(item, 'new');\n      processNextInvoiceProduct(productsToProcess, index + 1);\n    }\n  };\n  const addProductFromInvoice = async (item, action) => {\n    const marketId = isAdmin() ? selectedMarket : getCurrentMarket();\n    const allExistingProducts = await getAllData('products');\n    let updatedProductsList = [...allExistingProducts];\n    if (action === 'new') {\n      const newProduct = {\n        id: Date.now(),\n        name: item.description,\n        barcode: '',\n        category: 'Sin Categoría',\n        subcategory: '',\n        unit: 'unidad',\n        price: item.unitPrice,\n        cost: item.unitPrice,\n        markup: 0,\n        supplier: '',\n        minStock: 0,\n        image: null,\n        marketId: marketId,\n        lots: [{\n          id: Date.now(),\n          quantity: item.quantity,\n          expiryDate: ''\n        }]\n      };\n      newProduct.stock = newProduct.lots[0].quantity;\n      await addData('products', newProduct);\n      updatedProductsList.push(newProduct);\n    } else if (action === 'update') {\n      const existingProduct = allExistingProducts.find(p => p.name === item.description);\n      if (existingProduct) {\n        const newLot = {\n          id: Date.now(),\n          quantity: item.quantity,\n          expiryDate: ''\n        };\n        const updatedLots = [...(existingProduct.lots || []), newLot].sort((a, b) => new Date(a.expiryDate) - new Date(b.expiryDate));\n        const updatedStock = updatedLots.reduce((sum, lot) => sum + lot.quantity, 0);\n        const updatedProduct = {\n          ...existingProduct,\n          stock: updatedStock,\n          lots: updatedLots\n        };\n        await putData('products', updatedProduct);\n        updatedProductsList = updatedProductsList.map(p => p.id === updatedProduct.id ? updatedProduct : p);\n      }\n    }\n    syncLocalStorageWithIndexedDB('products', updatedProductsList);\n  };\n  const handleMergeConfirm = async (productData, action) => {\n    setShowMergeModal(false);\n    await addProductFromInvoice(productData, action);\n    processNextInvoiceProduct(invoiceProducts, currentInvoiceProductIndex + 1);\n  };\n  const handleMergeCancel = () => {\n    setShowMergeModal(false);\n    processNextInvoiceProduct(invoiceProducts, currentInvoiceProductIndex + 1);\n  };\n  const handleInvoiceProductChange = (id, field, value) => {\n    setInvoiceProducts(prevProducts => prevProducts.map(item => {\n      if (item.id === id) {\n        const updatedItem = {\n          ...item,\n          [field]: value\n        };\n        if (field === 'quantity' || field === 'unitPrice') {\n          updatedItem.subtotal = updatedItem.quantity * updatedItem.unitPrice;\n        }\n        const calculatedSubtotal = updatedItem.quantity * updatedItem.unitPrice;\n        const isConsistent = Math.abs(calculatedSubtotal - updatedItem.subtotal) < 0.01;\n        return {\n          ...updatedItem,\n          isConsistent\n        };\n      }\n      return item;\n    }));\n  };\n  const handleAcceptAllInvoiceProducts = () => {\n    // Iniciar el proceso de carga uno por uno, manejando las fusiones\n    processNextInvoiceProduct(invoiceProducts, 0);\n  };\n  if (!isAdmin() && !isMarket()) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center py-10 text-gray-800 dark:text-white\",\n      children: \"Acceso no autorizado\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-2xl font-bold text-gray-800 dark:text-white mb-6\",\n      children: \"Gesti\\xF3n de Proveedores\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-xl font-semibold text-gray-700 dark:text-gray-200\",\n        children: \"Listado de Proveedores\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 219,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => {\n          setEditingSupplier(null);\n          setFormData({\n            id: Date.now(),\n            name: '',\n            lastName: '',\n            dni: '',\n            address: '',\n            email: '',\n            whatsapp: '',\n            paymentMethods: '',\n            marketId: ''\n          });\n          setShowForm(true);\n        },\n        className: \"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\",\n        children: \"Agregar Proveedor\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 7\n    }, this), showForm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-6 rounded-lg shadow-inner mb-6 dark:bg-gray-700\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"text-lg font-medium text-gray-800 dark:text-white mb-4\",\n        children: editingSupplier ? 'Editar Proveedor' : 'Nuevo Proveedor'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [isAdmin() && /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Mercado\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            name: \"marketId\",\n            value: formData.marketId,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white\",\n            required: true,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"Seleccionar mercado\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 258,\n              columnNumber: 19\n            }, this), JSON.parse(localStorage.getItem('markets') || '[]').map(market => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: market.id,\n              children: market.name\n            }, market.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 21\n            }, this))]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Nombre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"name\",\n            value: formData.name,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 267,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Apellido\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 270,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"lastName\",\n            value: formData.lastName,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"DNI\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"dni\",\n            value: formData.dni,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Direcci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"address\",\n            value: formData.address,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            name: \"email\",\n            value: formData.email,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"WhatsApp\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"whatsapp\",\n            value: formData.whatsapp,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"md:col-span-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"M\\xE9todos de Pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"paymentMethods\",\n            value: formData.paymentMethods,\n            onChange: handleChange,\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\",\n            rows: \"3\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex justify-end space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => setShowForm(false),\n          className: \"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-500\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: handleSaveSupplier,\n          className: \"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700\",\n          children: \"Guardar Proveedor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-gray-50 p-4 rounded-lg shadow-inner mb-6 dark:bg-gray-700\",\n      children: suppliers.length > 0 ? /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"min-w-full divide-y divide-gray-200 dark:divide-gray-600\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          className: \"bg-gray-50 dark:bg-gray-600\",\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n              children: \"Nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 318,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n              children: \"Contacto\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n              children: \"M\\xE9todos de Pago\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n              children: \"Acciones\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          className: \"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\",\n          children: suppliers.map(supplier => /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm font-medium text-gray-900 dark:text-white\",\n                children: [supplier.name, \" \", supplier.lastName]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 328,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 dark:text-gray-400\",\n                children: supplier.dni\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 329,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 327,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-900 dark:text-white\",\n                children: supplier.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-500 dark:text-gray-400\",\n                children: [\"WhatsApp: \", supplier.whatsapp]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-sm text-gray-900 dark:text-white\",\n                children: supplier.paymentMethods\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 336,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 whitespace-nowrap text-sm font-medium\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleEditSupplier(supplier),\n                className: \"text-blue-600 hover:text-blue-900 mr-4\",\n                children: \"Editar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: () => handleDeleteSupplier(supplier.id),\n                className: \"text-red-600 hover:text-red-900\",\n                children: \"Eliminar\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 338,\n              columnNumber: 19\n            }, this)]\n          }, supplier.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-500 dark:text-gray-300\",\n        children: \"No hay proveedores registrados en este mercado.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 313,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8\",\n      children: [/*#__PURE__*/_jsxDEV(PdfInvoiceReader, {\n        onDataExtracted: handleInvoiceDataExtracted\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 9\n      }, this), invoiceProducts.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-lg font-medium text-gray-800 dark:text-white mb-4\",\n          children: \"Productos Extra\\xEDdos de Factura\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          className: \"min-w-full divide-y divide-gray-200 dark:divide-gray-600\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"bg-gray-50 dark:bg-gray-600\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                children: \"Cantidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                children: \"Descripci\\xF3n\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                children: \"Precio Unitario\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                children: \"Subtotal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 372,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                className: \"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                children: \"Inconsistencia\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 373,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            className: \"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\",\n            children: invoiceProducts.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: item.quantity,\n                  onChange: e => handleInvoiceProductChange(item.id, 'quantity', parseFloat(e.target.value) || 0),\n                  className: \"w-20 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 380,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  value: item.description,\n                  onChange: e => handleInvoiceProductChange(item.id, 'description', e.target.value),\n                  className: \"w-full px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: item.unitPrice,\n                  onChange: e => handleInvoiceProductChange(item.id, 'unitPrice', parseFloat(e.target.value) || 0),\n                  className: \"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 396,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 395,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  value: item.subtotal,\n                  onChange: e => handleInvoiceProductChange(item.id, 'subtotal', parseFloat(e.target.value) || 0),\n                  className: \"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 404,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                children: !item.isConsistent && /*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  className: \"h-5 w-5 text-red-500\",\n                  viewBox: \"0 0 20 20\",\n                  fill: \"currentColor\",\n                  title: \"Inconsistencia detectada\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    fillRule: \"evenodd\",\n                    d: \"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\",\n                    clipRule: \"evenodd\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 414,\n                    columnNumber: 27\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 413,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 21\n              }, this)]\n            }, item.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleAcceptAllInvoiceProducts,\n          className: \"mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\",\n          disabled: isProcessingInvoice,\n          children: isProcessingInvoice ? 'Cargando...' : 'Cargar Productos al Inventario'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 361,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 215,\n    columnNumber: 5\n  }, this);\n};\n_s(SuppliersDashboard, \"3cLC/jbvX0Lxhu6bQ5NCVu2+Uag=\");\n_c = SuppliersDashboard;\nexport default SuppliersDashboard;\nvar _c;\n$RefreshReg$(_c, \"SuppliersDashboard\");","map":{"version":3,"names":["React","useState","useEffect","isAdmin","getCurrentMarket","isMarket","getAllData","putData","addData","deleteData","syncLocalStorageWithIndexedDB","PdfInvoiceReader","ProductMergeModal","jsxDEV","_jsxDEV","SuppliersDashboard","selectedMarket","_s","suppliers","setSuppliers","showForm","setShowForm","editingSupplier","setEditingSupplier","formData","setFormData","id","Date","now","name","lastName","dni","address","email","whatsapp","paymentMethods","marketId","invoiceProducts","setInvoiceProducts","showMergeModal","setShowMergeModal","productToMerge","setProductToMerge","existingProductForMerge","setExistingProductForMerge","currentInvoiceProductIndex","setCurrentInvoiceProductIndex","isProcessingInvoice","setIsProcessingInvoice","loadData","allSuppliers","marketToShow","filteredSuppliers","filter","s","handleChange","e","value","target","prev","handleSaveSupplier","supplierToSave","allExistingSuppliers","updatedSuppliers","map","handleEditSupplier","supplier","handleDeleteSupplier","handleInvoiceDataExtracted","data","processNextInvoiceProduct","productsToProcess","index","length","alert","item","allExistingProducts","existingProduct","find","p","description","addProductFromInvoice","action","updatedProductsList","newProduct","barcode","category","subcategory","unit","price","unitPrice","cost","markup","minStock","image","lots","quantity","expiryDate","stock","push","newLot","updatedLots","sort","a","b","updatedStock","reduce","sum","lot","updatedProduct","handleMergeConfirm","productData","handleMergeCancel","handleInvoiceProductChange","field","prevProducts","updatedItem","subtotal","calculatedSubtotal","isConsistent","Math","abs","handleAcceptAllInvoiceProducts","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","onChange","required","JSON","parse","localStorage","getItem","market","type","rows","onDataExtracted","parseFloat","xmlns","viewBox","fill","title","fillRule","d","clipRule","disabled","_c","$RefreshReg$"],"sources":["C:/Users/lucas/OneDrive/Documentos/Minimarket PRO/Version 1.0/src/components/SuppliersDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { isAdmin, getCurrentMarket, isMarket } from '../utils/auth';\nimport { getAllData, putData, addData, deleteData, syncLocalStorageWithIndexedDB } from '../utils/indexedDb';\nimport PdfInvoiceReader from './PdfInvoiceReader';\nimport ProductMergeModal from './ProductMergeModal';\n\nconst SuppliersDashboard = ({ selectedMarket }) => {\n  const [suppliers, setSuppliers] = useState([]);\n  const [showForm, setShowForm] = useState(false);\n  const [editingSupplier, setEditingSupplier] = useState(null);\n\n  const [formData, setFormData] = useState({\n    id: Date.now(),\n    name: '',\n    lastName: '',\n    dni: '',\n    address: '',\n    email: '',\n    whatsapp: '',\n    paymentMethods: '',\n    marketId: ''\n  });\n\n  const [invoiceProducts, setInvoiceProducts] = useState([]);\n  const [showMergeModal, setShowMergeModal] = useState(false);\n  const [productToMerge, setProductToMerge] = useState(null);\n  const [existingProductForMerge, setExistingProductForMerge] = useState(null);\n  const [currentInvoiceProductIndex, setCurrentInvoiceProductIndex] = useState(0);\n  const [isProcessingInvoice, setIsProcessingInvoice] = useState(false);\n\n  useEffect(() => {\n    const loadData = async () => {\n      const allSuppliers = await getAllData('suppliers');\n      const marketToShow = isAdmin() ? selectedMarket : getCurrentMarket();\n      const filteredSuppliers = isAdmin() && selectedMarket ? \n        allSuppliers.filter(s => s.marketId === selectedMarket) : \n        allSuppliers.filter(s => s.marketId === marketToShow);\n      \n      setSuppliers(filteredSuppliers);\n    };\n    loadData();\n  }, [selectedMarket]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({ ...prev, [name]: value }));\n  };\n\n  const handleSaveSupplier = async () => {\n    const marketId = isAdmin() ? selectedMarket : getCurrentMarket();\n    const supplierToSave = { ...formData, marketId };\n\n    const allExistingSuppliers = await getAllData('suppliers');\n    let updatedSuppliers;\n\n    if (editingSupplier) {\n      updatedSuppliers = allExistingSuppliers.map(s => \n        s.id === editingSupplier.id ? supplierToSave : s\n      );\n      await putData('suppliers', supplierToSave);\n    } else {\n      updatedSuppliers = [...allExistingSuppliers, supplierToSave];\n      await addData('suppliers', supplierToSave);\n    }\n    \n    syncLocalStorageWithIndexedDB('suppliers', updatedSuppliers);\n    \n    const filteredSuppliers = isAdmin() && !selectedMarket ? \n      updatedSuppliers : \n      updatedSuppliers.filter(s => s.marketId === marketId);\n    setSuppliers(filteredSuppliers);\n\n    setShowForm(false);\n    setEditingSupplier(null);\n    setFormData({\n      id: Date.now(),\n      name: '',\n      lastName: '',\n      dni: '',\n      address: '',\n      email: '',\n      whatsapp: '',\n      paymentMethods: '',\n      marketId: ''\n    });\n  };\n\n  const handleEditSupplier = (supplier) => {\n    setEditingSupplier(supplier);\n    setFormData(supplier);\n    setShowForm(true);\n  };\n\n  const handleDeleteSupplier = async (id) => {\n    await deleteData('suppliers', id);\n    const allExistingSuppliers = await getAllData('suppliers');\n    syncLocalStorageWithIndexedDB('suppliers', allExistingSuppliers);\n\n    const marketToShow = isAdmin() ? selectedMarket : getCurrentMarket();\n    const filteredSuppliers = isAdmin() && !selectedMarket ? \n      allExistingSuppliers : \n      allExistingSuppliers.filter(s => s.marketId === marketToShow);\n    setSuppliers(filteredSuppliers);\n  };\n\n  const handleInvoiceDataExtracted = (data) => {\n    setInvoiceProducts(data);\n    // No iniciar el procesamiento automático aquí, solo mostrar la tabla\n  };\n\n  const processNextInvoiceProduct = async (productsToProcess, index) => {\n    setIsProcessingInvoice(true);\n    if (index >= productsToProcess.length) {\n      alert('Todos los productos de la factura han sido procesados y cargados al inventario.');\n      setInvoiceProducts([]);\n      setIsProcessingInvoice(false);\n      return;\n    }\n\n    const item = productsToProcess[index];\n    const allExistingProducts = await getAllData('products');\n    const existingProduct = allExistingProducts.find(p => p.name === item.description);\n\n    if (existingProduct) {\n      setProductToMerge(item);\n      setExistingProductForMerge(existingProduct);\n      setCurrentInvoiceProductIndex(index);\n      setShowMergeModal(true);\n    } else {\n      await addProductFromInvoice(item, 'new');\n      processNextInvoiceProduct(productsToProcess, index + 1);\n    }\n  };\n\n  const addProductFromInvoice = async (item, action) => {\n    const marketId = isAdmin() ? selectedMarket : getCurrentMarket();\n    const allExistingProducts = await getAllData('products');\n    let updatedProductsList = [...allExistingProducts];\n\n    if (action === 'new') {\n      const newProduct = {\n        id: Date.now(),\n        name: item.description,\n        barcode: '',\n        category: 'Sin Categoría',\n        subcategory: '',\n        unit: 'unidad',\n        price: item.unitPrice,\n        cost: item.unitPrice,\n        markup: 0,\n        supplier: '',\n        minStock: 0,\n        image: null,\n        marketId: marketId,\n        lots: [{ id: Date.now(), quantity: item.quantity, expiryDate: '' }]\n      };\n      newProduct.stock = newProduct.lots[0].quantity;\n      await addData('products', newProduct);\n      updatedProductsList.push(newProduct);\n    } else if (action === 'update') {\n      const existingProduct = allExistingProducts.find(p => p.name === item.description);\n      if (existingProduct) {\n        const newLot = { id: Date.now(), quantity: item.quantity, expiryDate: '' };\n        const updatedLots = [...(existingProduct.lots || []), newLot].sort((a, b) => new Date(a.expiryDate) - new Date(b.expiryDate));\n        const updatedStock = updatedLots.reduce((sum, lot) => sum + lot.quantity, 0);\n        \n        const updatedProduct = {\n          ...existingProduct,\n          stock: updatedStock,\n          lots: updatedLots\n        };\n        await putData('products', updatedProduct);\n        updatedProductsList = updatedProductsList.map(p => p.id === updatedProduct.id ? updatedProduct : p);\n      }\n    }\n    syncLocalStorageWithIndexedDB('products', updatedProductsList);\n  };\n\n  const handleMergeConfirm = async (productData, action) => {\n    setShowMergeModal(false);\n    await addProductFromInvoice(productData, action);\n    processNextInvoiceProduct(invoiceProducts, currentInvoiceProductIndex + 1);\n  };\n\n  const handleMergeCancel = () => {\n    setShowMergeModal(false);\n    processNextInvoiceProduct(invoiceProducts, currentInvoiceProductIndex + 1);\n  };\n\n  const handleInvoiceProductChange = (id, field, value) => {\n    setInvoiceProducts(prevProducts => prevProducts.map(item => {\n      if (item.id === id) {\n        const updatedItem = { ...item, [field]: value };\n        if (field === 'quantity' || field === 'unitPrice') {\n          updatedItem.subtotal = updatedItem.quantity * updatedItem.unitPrice;\n        }\n        const calculatedSubtotal = updatedItem.quantity * updatedItem.unitPrice;\n        const isConsistent = Math.abs(calculatedSubtotal - updatedItem.subtotal) < 0.01;\n        return { ...updatedItem, isConsistent };\n      }\n      return item;\n    }));\n  };\n\n  const handleAcceptAllInvoiceProducts = () => {\n    // Iniciar el proceso de carga uno por uno, manejando las fusiones\n    processNextInvoiceProduct(invoiceProducts, 0);\n  };\n\n  if (!isAdmin() && !isMarket()) {\n    return <div className=\"text-center py-10 text-gray-800 dark:text-white\">Acceso no autorizado</div>;\n  }\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\">\n      <h2 className=\"text-2xl font-bold text-gray-800 dark:text-white mb-6\">Gestión de Proveedores</h2>\n\n      <div className=\"flex justify-between items-center mb-6\">\n        <h3 className=\"text-xl font-semibold text-gray-700 dark:text-gray-200\">Listado de Proveedores</h3>\n        <button\n          onClick={() => {\n            setEditingSupplier(null);\n            setFormData({\n              id: Date.now(),\n              name: '',\n              lastName: '',\n              dni: '',\n              address: '',\n              email: '',\n              whatsapp: '',\n              paymentMethods: '',\n              marketId: ''\n            });\n            setShowForm(true);\n          }}\n          className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors\"\n        >\n          Agregar Proveedor\n        </button>\n      </div>\n\n      {showForm && (\n        <div className=\"bg-gray-50 p-6 rounded-lg shadow-inner mb-6 dark:bg-gray-700\">\n          <h4 className=\"text-lg font-medium text-gray-800 dark:text-white mb-4\">\n            {editingSupplier ? 'Editar Proveedor' : 'Nuevo Proveedor'}\n          </h4>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n            {isAdmin() && (\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Mercado</label>\n                <select\n                  name=\"marketId\"\n                  value={formData.marketId}\n                  onChange={handleChange}\n                  className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\n                  required\n                >\n                  <option value=\"\">Seleccionar mercado</option>\n                  {JSON.parse(localStorage.getItem('markets') || '[]').map(market => (\n                    <option key={market.id} value={market.id}>{market.name}</option>\n                  ))}\n                </select>\n              </div>\n            )}\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre</label>\n              <input type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" required />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Apellido</label>\n              <input type=\"text\" name=\"lastName\" value={formData.lastName} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">DNI</label>\n              <input type=\"text\" name=\"dni\" value={formData.dni} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Dirección</label>\n              <input type=\"text\" name=\"address\" value={formData.address} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Email</label>\n              <input type=\"email\" name=\"email\" value={formData.email} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\n            </div>\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">WhatsApp</label>\n              <input type=\"text\" name=\"whatsapp\" value={formData.whatsapp} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" />\n            </div>\n            <div className=\"md:col-span-2\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Métodos de Pago</label>\n              <textarea name=\"paymentMethods\" value={formData.paymentMethods} onChange={handleChange} className=\"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white\" rows=\"3\"></textarea>\n            </div>\n          </div>\n          <div className=\"mt-6 flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={() => setShowForm(false)}\n              className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-500\"\n            >\n              Cancelar\n            </button>\n            <button\n              type=\"button\"\n              onClick={handleSaveSupplier}\n              className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700\"\n            >\n              Guardar Proveedor\n            </button>\n          </div>\n        </div>\n      )}\n\n      <div className=\"bg-gray-50 p-4 rounded-lg shadow-inner mb-6 dark:bg-gray-700\">\n        {suppliers.length > 0 ? (\n          <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\">\n            <thead className=\"bg-gray-50 dark:bg-gray-600\">\n              <tr>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Nombre</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Contacto</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Métodos de Pago</th>\n                <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Acciones</th>\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\n              {suppliers.map(supplier => (\n                <tr key={supplier.id}>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm font-medium text-gray-900 dark:text-white\">{supplier.name} {supplier.lastName}</div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">{supplier.dni}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900 dark:text-white\">{supplier.email}</div>\n                    <div className=\"text-sm text-gray-500 dark:text-gray-400\">WhatsApp: {supplier.whatsapp}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap\">\n                    <div className=\"text-sm text-gray-900 dark:text-white\">{supplier.paymentMethods}</div>\n                  </td>\n                  <td className=\"px-6 py-4 whitespace-nowrap text-sm font-medium\">\n                    <button\n                      onClick={() => handleEditSupplier(supplier)}\n                      className=\"text-blue-600 hover:text-blue-900 mr-4\"\n                    >\n                      Editar\n                    </button>\n                    <button\n                      onClick={() => handleDeleteSupplier(supplier.id)}\n                      className=\"text-red-600 hover:text-red-900\"\n                    >\n                      Eliminar\n                    </button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        ) : (\n          <p className=\"text-gray-500 dark:text-gray-300\">No hay proveedores registrados en este mercado.</p>\n        )}\n      </div>\n\n      <div className=\"mt-8\">\n        <PdfInvoiceReader onDataExtracted={handleInvoiceDataExtracted} />\n        {invoiceProducts.length > 0 && (\n          <div className=\"mt-6 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700\">\n            <h4 className=\"text-lg font-medium text-gray-800 dark:text-white mb-4\">Productos Extraídos de Factura</h4>\n            <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\">\n              <thead className=\"bg-gray-50 dark:bg-gray-600\">\n                <tr>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Cantidad</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Descripción</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Precio Unitario</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Subtotal</th>\n                  <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Inconsistencia</th>\n                </tr>\n              </thead>\n              <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\n                {invoiceProducts.map((item, index) => (\n                  <tr key={item.id}>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      <input\n                        type=\"number\"\n                        value={item.quantity}\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'quantity', parseFloat(e.target.value) || 0)}\n                        className=\"w-20 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      <input\n                        type=\"text\"\n                        value={item.description}\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'description', e.target.value)}\n                        className=\"w-full px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      <input\n                        type=\"number\"\n                        value={item.unitPrice}\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'unitPrice', parseFloat(e.target.value) || 0)}\n                        className=\"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      <input\n                        type=\"number\"\n                        value={item.subtotal}\n                        onChange={(e) => handleInvoiceProductChange(item.id, 'subtotal', parseFloat(e.target.value) || 0)}\n                        className=\"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                      />\n                    </td>\n                    <td className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white\">\n                      {!item.isConsistent && (\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5 text-red-500\" viewBox=\"0 0 20 20\" fill=\"currentColor\" title=\"Inconsistencia detectada\">\n                          <path fillRule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clipRule=\"evenodd\" />\n                        </svg>\n                      )}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n            <button onClick={handleAcceptAllInvoiceProducts} className=\"mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors\" disabled={isProcessingInvoice}>\n              {isProcessingInvoice ? 'Cargando...' : 'Cargar Productos al Inventario'}\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SuppliersDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}