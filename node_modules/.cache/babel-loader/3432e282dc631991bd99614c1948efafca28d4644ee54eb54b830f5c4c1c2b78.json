{"ast":null,"code":"import _objectSpread from\"C:/Users/lucas/OneDrive/Documentos/Minimarket PRO/Version 1.0/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef,useEffect}from'react';import{isAdmin,getCurrentMarket}from'../utils/auth';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ProductForm=_ref=>{let{categories,product,onAddProduct,onUpdateProduct,onCancel}=_ref;const[formData,setFormData]=useState(product||{id:Date.now(),name:'',barcode:'',category:categories[0]||'',subcategory:'',unit:'unidad',price:0,cost:0,markup:0,supplier:'',minStock:0,image:null,marketId:'',lots:[]});const[barcodeInput,setBarcodeInput]=useState('');const fileInputRef=useRef(null);const[markets,setMarkets]=useState([]);const[availableSuppliers,setAvailableSuppliers]=useState([]);const[newLotQuantity,setNewLotQuantity]=useState(0);const[newLotExpiryDate,setNewLotExpiryDate]=useState('');// Corregido: Usar setNewLotExpiryDate\n// Estados para búsqueda de categorías/subcategorías\nconst[categorySearchTerm,setCategorySearchTerm]=useState('');const[subcategorySearchTerm,setSubcategorySearchTerm]=useState('');// Subcategorías de ejemplo (en un sistema real, esto vendría de una DB o API)\nconst allSubcategories={'Alimentos':['Lácteos','Panadería','Carnes','Verduras','Frutas','Congelados','Despensa'],'Bebidas':['Gaseosas','Jugos','Aguas','Cervezas','Vinos','Licores'],'Limpieza':['Hogar','Ropa','Cocina','Baño','Pisos'],'Fiambres':['Jamones','Quesos','Embutidos','Salames'],'Otros':['Varios']};const filteredCategories=categories.filter(cat=>cat.toLowerCase().includes(categorySearchTerm.toLowerCase()));const filteredSubcategories=(allSubcategories[formData.category]||[]).filter(subcat=>subcat.toLowerCase().includes(subcategorySearchTerm.toLowerCase()));useEffect(()=>{const allMarkets=JSON.parse(localStorage.getItem('markets'))||[];setMarkets(allMarkets);const allSuppliers=JSON.parse(localStorage.getItem('suppliers'))||[];const marketId=isAdmin()?product?product.marketId:allMarkets.length>0?allMarkets[0].id:'':getCurrentMarket();const filteredSuppliers=allSuppliers.filter(s=>s.marketId===marketId);setAvailableSuppliers(filteredSuppliers);if(!product&&isAdmin()&&allMarkets.length>0){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{marketId:allMarkets[0].id}));}if(product&&!formData.marketId){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{marketId:product.marketId}));}},[product]);useEffect(()=>{if(isAdmin()&&formData.marketId){const allSuppliers=JSON.parse(localStorage.getItem('suppliers'))||[];const filteredSuppliers=allSuppliers.filter(s=>s.marketId===formData.marketId);setAvailableSuppliers(filteredSuppliers);if(formData.supplier&&!filteredSuppliers.some(s=>s.id===formData.supplier)){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{supplier:''}));}}},[formData.marketId,isAdmin]);useEffect(()=>{const finalPrice=formData.cost*(1+formData.markup/100);if(finalPrice!==formData.price){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{price:parseFloat(finalPrice.toFixed(2))}));}},[formData.cost,formData.markup]);const handleChange=e=>{const{name,value}=e.target;setFormData(_objectSpread(_objectSpread({},formData),{},{[name]:name==='price'||name==='cost'||name==='minStock'||name==='markup'?parseFloat(value)||0:value}));};const handleAddLot=()=>{if(newLotQuantity>0&&newLotExpiryDate){const newLot={id:Date.now(),quantity:newLotQuantity,expiryDate:newLotExpiryDate};setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{lots:[...prev.lots,newLot].sort((a,b)=>new Date(a.expiryDate)-new Date(b.expiryDate))}));setNewLotQuantity(0);setNewLotExpiryDate('');}};const handleRemoveLot=lotId=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{lots:prev.lots.filter(lot=>lot.id!==lotId)}));};const handleEditLotQuantity=(lotId,newQuantity)=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{lots:prev.lots.map(lot=>lot.id===lotId?_objectSpread(_objectSpread({},lot),{},{quantity:parseInt(newQuantity)||0}):lot)}));};const handleBarcodeScan=e=>{e.preventDefault();setFormData(_objectSpread(_objectSpread({},formData),{},{barcode:barcodeInput}));setBarcodeInput('');};const handleImageChange=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{image:reader.result}));};reader.readAsDataURL(file);}};const handleSubmit=e=>{e.preventDefault();const totalStock=formData.lots.reduce((sum,lot)=>sum+lot.quantity,0);const productToSave=_objectSpread(_objectSpread({},formData),{},{stock:totalStock});if(product){onUpdateProduct(productToSave);}else{onAddProduct(productToSave);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold mb-4 text-gray-800 dark:text-white\",children:product?'Editar Producto':'Agregar Nuevo Producto'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[isAdmin()&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Mercado\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"marketId\",value:formData.marketId,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar mercado\"}),markets.map(market=>/*#__PURE__*/_jsx(\"option\",{value:market.id,children:market.name},market.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Nombre\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"C\\xF3digo de Barras\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.barcode,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{barcode:e.target.value})),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",placeholder:\"Escanear o ingresar manualmente\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{const randomBarcode=Math.floor(1000000000000+Math.random()*9000000000000).toString();setFormData(_objectSpread(_objectSpread({},formData),{},{barcode:randomBarcode}));},className:\"bg-gray-200 hover:bg-gray-300 px-3 py-2 border border-l-0 border-gray-300 rounded-r-md dark:bg-gray-600 dark:hover:bg-gray-500\",children:/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z\",clipRule:\"evenodd\"}),/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\",clipRule:\"evenodd\"})]})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Categor\\xEDa\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:categorySearchTerm,onChange:e=>setCategorySearchTerm(e.target.value),placeholder:\"Buscar categor\\xEDa...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"}),/*#__PURE__*/_jsx(\"select\",{name:\"category\",value:formData.category,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1\",children:filteredCategories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Subcategor\\xEDa\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:subcategorySearchTerm,onChange:e=>setSubcategorySearchTerm(e.target.value),placeholder:\"Buscar subcategor\\xEDa...\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"}),/*#__PURE__*/_jsx(\"select\",{name:\"subcategory\",value:formData.subcategory,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1\",children:(allSubcategories[formData.category]||[]).length>0?filteredSubcategories.map(subcat=>/*#__PURE__*/_jsx(\"option\",{value:subcat,children:subcat},subcat)):/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Selecciona una categor\\xEDa primero\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Unidad de Medida\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"unit\",value:formData.unit,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"unidad\",children:\"Unidad\"}),/*#__PURE__*/_jsx(\"option\",{value:\"gramos\",children:\"Gramos (por Kg)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Proveedor\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"supplier\",value:formData.supplier,onChange:handleChange,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Seleccionar proveedor\"}),availableSuppliers.map(supplier=>/*#__PURE__*/_jsxs(\"option\",{value:supplier.id,children:[supplier.name,\" \",supplier.lastName]},supplier.id))]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Costo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"cost\",value:formData.cost,onChange:handleChange,min:\"0\",step:\"0.01\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"% Sobreprecio\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"markup\",value:formData.markup,onChange:handleChange,min:\"0\",step:\"0.01\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Precio de Venta (Calculado)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"price\",value:formData.price,readOnly:true,className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 dark:border-gray-500 dark:text-white\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Stock M\\xEDnimo\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"minStock\",value:formData.minStock,onChange:handleChange,min:\"0\",className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"md:col-span-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",children:\"Imagen del Producto\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[formData.image?/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:formData.image,alt:\"Preview\",className:\"h-20 w-20 object-cover rounded-md\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData(_objectSpread(_objectSpread({},formData),{},{image:null})),className:\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-4 w-4\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\",clipRule:\"evenodd\"})})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"h-20 w-20 bg-gray-200 rounded-md flex items-center justify-center dark:bg-gray-700\",children:/*#__PURE__*/_jsx(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-8 w-8 text-gray-400 dark:text-gray-500\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\"})})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",ref:fileInputRef,onChange:handleImageChange,accept:\"image/*\",className:\"hidden\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>fileInputRef.current.click(),className:\"px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\",children:formData.image?'Cambiar imagen':'Subir imagen'})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-md font-medium text-gray-700 dark:text-gray-200 mb-2\",children:\"Gesti\\xF3n de Lotes (Ingreso de Stock)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex space-x-2 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newLotQuantity,onChange:e=>setNewLotQuantity(parseInt(e.target.value)||0),placeholder:\"Cantidad\",min:\"1\",className:\"w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newLotExpiryDate,onChange:e=>setNewLotExpiryDate(e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleAddLot,className:\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\",children:\"Agregar Lote\"})]}),formData.lots.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 p-4 rounded-md dark:bg-gray-700\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Cantidad\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Fecha Vencimiento\"}),/*#__PURE__*/_jsx(\"th\",{className:\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",children:\"Acci\\xF3n\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{className:\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\",children:formData.lots.map(lot=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 whitespace-nowrap text-sm text-gray-900\",children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"0\",value:lot.quantity,onChange:e=>handleEditLotQuantity(lot.id,e.target.value),className:\"w-20 px-2 py-1 border border-gray-300 rounded-md text-center dark:bg-gray-700 dark:border-gray-600 dark:text-white\"})}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\",children:lot.expiryDate}),/*#__PURE__*/_jsx(\"td\",{className:\"px-4 py-2 whitespace-nowrap text-sm font-medium\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>handleRemoveLot(lot.id),className:\"text-red-600 hover:text-red-900\",children:\"Eliminar\"})})]},lot.id))})]})}):/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 dark:text-gray-300\",children:\"No hay lotes agregados para este producto.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:onCancel,className:\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:product?'Actualizar':'Guardar'})]})]})]});};export default ProductForm;","map":{"version":3,"names":["React","useState","useRef","useEffect","isAdmin","getCurrentMarket","jsx","_jsx","jsxs","_jsxs","ProductForm","_ref","categories","product","onAddProduct","onUpdateProduct","onCancel","formData","setFormData","id","Date","now","name","barcode","category","subcategory","unit","price","cost","markup","supplier","minStock","image","marketId","lots","barcodeInput","setBarcodeInput","fileInputRef","markets","setMarkets","availableSuppliers","setAvailableSuppliers","newLotQuantity","setNewLotQuantity","newLotExpiryDate","setNewLotExpiryDate","categorySearchTerm","setCategorySearchTerm","subcategorySearchTerm","setSubcategorySearchTerm","allSubcategories","filteredCategories","filter","cat","toLowerCase","includes","filteredSubcategories","subcat","allMarkets","JSON","parse","localStorage","getItem","allSuppliers","length","filteredSuppliers","s","prev","_objectSpread","some","finalPrice","parseFloat","toFixed","handleChange","e","value","target","handleAddLot","newLot","quantity","expiryDate","sort","a","b","handleRemoveLot","lotId","lot","handleEditLotQuantity","newQuantity","map","parseInt","handleBarcodeScan","preventDefault","handleImageChange","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","totalStock","reduce","sum","productToSave","stock","className","children","onSubmit","onChange","required","market","type","placeholder","onClick","randomBarcode","Math","floor","random","toString","xmlns","viewBox","fill","fillRule","d","clipRule","lastName","min","step","readOnly","src","alt","stroke","strokeLinecap","strokeLinejoin","strokeWidth","ref","accept","current","click"],"sources":["C:/Users/lucas/OneDrive/Documentos/Minimarket PRO/Version 1.0/src/components/ProductForm.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\nimport { isAdmin, getCurrentMarket } from '../utils/auth';\n\nconst ProductForm = ({ categories, product, onAddProduct, onUpdateProduct, onCancel }) => {\n  const [formData, setFormData] = useState(product || {\n    id: Date.now(),\n    name: '',\n    barcode: '',\n    category: categories[0] || '',\n    subcategory: '',\n    unit: 'unidad',\n    price: 0,\n    cost: 0,\n    markup: 0,\n    supplier: '',\n    minStock: 0,\n    image: null,\n    marketId: '',\n    lots: []\n  });\n  const [barcodeInput, setBarcodeInput] = useState('');\n  const fileInputRef = useRef(null);\n  const [markets, setMarkets] = useState([]);\n  const [availableSuppliers, setAvailableSuppliers] = useState([]);\n\n  const [newLotQuantity, setNewLotQuantity] = useState(0);\n  const [newLotExpiryDate, setNewLotExpiryDate] = useState(''); // Corregido: Usar setNewLotExpiryDate\n\n  // Estados para búsqueda de categorías/subcategorías\n  const [categorySearchTerm, setCategorySearchTerm] = useState('');\n  const [subcategorySearchTerm, setSubcategorySearchTerm] = useState('');\n\n  // Subcategorías de ejemplo (en un sistema real, esto vendría de una DB o API)\n  const allSubcategories = {\n    'Alimentos': ['Lácteos', 'Panadería', 'Carnes', 'Verduras', 'Frutas', 'Congelados', 'Despensa'],\n    'Bebidas': ['Gaseosas', 'Jugos', 'Aguas', 'Cervezas', 'Vinos', 'Licores'],\n    'Limpieza': ['Hogar', 'Ropa', 'Cocina', 'Baño', 'Pisos'],\n    'Fiambres': ['Jamones', 'Quesos', 'Embutidos', 'Salames'],\n    'Otros': ['Varios']\n  };\n\n  const filteredCategories = categories.filter(cat =>\n    cat.toLowerCase().includes(categorySearchTerm.toLowerCase())\n  );\n\n  const filteredSubcategories = (allSubcategories[formData.category] || []).filter(subcat =>\n    subcat.toLowerCase().includes(subcategorySearchTerm.toLowerCase())\n  );\n\n  useEffect(() => {\n    const allMarkets = JSON.parse(localStorage.getItem('markets')) || [];\n    setMarkets(allMarkets);\n\n    const allSuppliers = JSON.parse(localStorage.getItem('suppliers')) || [];\n    const marketId = isAdmin() ? (product ? product.marketId : (allMarkets.length > 0 ? allMarkets[0].id : '')) : getCurrentMarket();\n    const filteredSuppliers = allSuppliers.filter(s => s.marketId === marketId);\n    setAvailableSuppliers(filteredSuppliers);\n\n    if (!product && isAdmin() && allMarkets.length > 0) {\n      setFormData(prev => ({ ...prev, marketId: allMarkets[0].id }));\n    }\n    if (product && !formData.marketId) {\n      setFormData(prev => ({ ...prev, marketId: product.marketId }));\n    }\n  }, [product]);\n\n  useEffect(() => {\n    if (isAdmin() && formData.marketId) {\n      const allSuppliers = JSON.parse(localStorage.getItem('suppliers')) || [];\n      const filteredSuppliers = allSuppliers.filter(s => s.marketId === formData.marketId);\n      setAvailableSuppliers(filteredSuppliers);\n      if (formData.supplier && !filteredSuppliers.some(s => s.id === formData.supplier)) {\n        setFormData(prev => ({ ...prev, supplier: '' }));\n      }\n    }\n  }, [formData.marketId, isAdmin]);\n\n  useEffect(() => {\n    const finalPrice = formData.cost * (1 + formData.markup / 100);\n    if (finalPrice !== formData.price) {\n      setFormData(prev => ({ ...prev, price: parseFloat(finalPrice.toFixed(2)) }));\n    }\n  }, [formData.cost, formData.markup]);\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: name === 'price' || name === 'cost' || name === 'minStock' || name === 'markup'\n        ? parseFloat(value) || 0 \n        : value\n    });\n  };\n\n  const handleAddLot = () => {\n    if (newLotQuantity > 0 && newLotExpiryDate) {\n      const newLot = {\n        id: Date.now(),\n        quantity: newLotQuantity,\n        expiryDate: newLotExpiryDate\n      };\n      setFormData(prev => ({\n        ...prev,\n        lots: [...prev.lots, newLot].sort((a, b) => new Date(a.expiryDate) - new Date(b.expiryDate))\n      }));\n      setNewLotQuantity(0);\n      setNewLotExpiryDate('');\n    }\n  };\n\n  const handleRemoveLot = (lotId) => {\n    setFormData(prev => ({\n      ...prev,\n      lots: prev.lots.filter(lot => lot.id !== lotId)\n    }));\n  };\n\n  const handleEditLotQuantity = (lotId, newQuantity) => {\n    setFormData(prev => ({\n      ...prev,\n      lots: prev.lots.map(lot => \n        lot.id === lotId ? { ...lot, quantity: parseInt(newQuantity) || 0 } : lot\n      )\n    }));\n  };\n\n  const handleBarcodeScan = (e) => {\n    e.preventDefault();\n    setFormData({\n      ...formData,\n      barcode: barcodeInput\n    });\n    setBarcodeInput('');\n  };\n\n  const handleImageChange = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setFormData({\n          ...formData,\n          image: reader.result\n        });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    const totalStock = formData.lots.reduce((sum, lot) => sum + lot.quantity, 0);\n    const productToSave = { ...formData, stock: totalStock };\n\n    if (product) {\n      onUpdateProduct(productToSave);\n    } else {\n      onAddProduct(productToSave);\n    }\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\">\n      <h3 className=\"text-lg font-semibold mb-4 text-gray-800 dark:text-white\">\n        {product ? 'Editar Producto' : 'Agregar Nuevo Producto'}\n      </h3>\n      <form onSubmit={handleSubmit}>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n          {isAdmin() && (\n            <div>\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Mercado</label>\n              <select\n                name=\"marketId\"\n                value={formData.marketId}\n                onChange={handleChange}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                required\n              >\n                <option value=\"\">Seleccionar mercado</option>\n                {markets.map(market => (\n                  <option key={market.id} value={market.id}>{market.name}</option>\n                ))}\n              </select>\n            </div>\n          )}\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre</label>\n            <input\n              type=\"text\"\n              name=\"name\"\n              value={formData.name}\n              onChange={handleChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Código de Barras</label>\n            <div className=\"flex\">\n              <input\n                type=\"text\"\n                value={formData.barcode}\n                onChange={(e) => setFormData({...formData, barcode: e.target.value})}\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                placeholder=\"Escanear o ingresar manualmente\"\n              />\n              <button\n                type=\"button\"\n                onClick={() => {\n                  const randomBarcode = Math.floor(1000000000000 + Math.random() * 9000000000000).toString();\n                  setFormData({...formData, barcode: randomBarcode});\n                }}\n                className=\"bg-gray-200 hover:bg-gray-300 px-3 py-2 border border-l-0 border-gray-300 rounded-r-md dark:bg-gray-600 dark:hover:bg-gray-500\"\n              >\n                <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                  <path fillRule=\"evenodd\" d=\"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z\" clipRule=\"evenodd\" />\n                  <path fillRule=\"evenodd\" d=\"M8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z\" clipRule=\"evenodd\" />\n                </svg>\n              </button>\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Categoría</label>\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                value={categorySearchTerm}\n                onChange={(e) => setCategorySearchTerm(e.target.value)}\n                placeholder=\"Buscar categoría...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              />\n              <select\n                name=\"category\"\n                value={formData.category}\n                onChange={handleChange}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1\"\n              >\n                {filteredCategories.map(category => (\n                  <option key={category} value={category}>{category}</option>\n                ))}\n              </select>\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Subcategoría</label>\n            <div className=\"relative\">\n              <input\n                type=\"text\"\n                value={subcategorySearchTerm}\n                onChange={(e) => setSubcategorySearchTerm(e.target.value)}\n                placeholder=\"Buscar subcategoría...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              />\n              <select\n                name=\"subcategory\"\n                value={formData.subcategory}\n                onChange={handleChange}\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1\"\n              >\n                {(allSubcategories[formData.category] || []).length > 0 ? (\n                  filteredSubcategories.map(subcat => (\n                    <option key={subcat} value={subcat}>{subcat}</option>\n                  ))\n                ) : (\n                  <option value=\"\">Selecciona una categoría primero</option>\n                )}\n              </select>\n            </div>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Unidad de Medida</label>\n            <select\n              name=\"unit\"\n              value={formData.unit}\n              onChange={handleChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            >\n              <option value=\"unidad\">Unidad</option>\n              <option value=\"gramos\">Gramos (por Kg)</option>\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Proveedor</label>\n            <select\n              name=\"supplier\"\n              value={formData.supplier}\n              onChange={handleChange}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            >\n              <option value=\"\">Seleccionar proveedor</option>\n              {availableSuppliers.map(supplier => (\n                <option key={supplier.id} value={supplier.id}>{supplier.name} {supplier.lastName}</option>\n              ))}\n            </select>\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Costo</label>\n            <input\n              type=\"number\"\n              name=\"cost\"\n              value={formData.cost}\n              onChange={handleChange}\n              min=\"0\"\n              step=\"0.01\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">% Sobreprecio</label>\n            <input\n              type=\"number\"\n              name=\"markup\"\n              value={formData.markup}\n              onChange={handleChange}\n              min=\"0\"\n              step=\"0.01\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              required\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Precio de Venta (Calculado)</label>\n            <input\n              type=\"number\"\n              name=\"price\"\n              value={formData.price}\n              readOnly\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 dark:border-gray-500 dark:text-white\"\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Stock Mínimo</label>\n            <input\n              type=\"number\"\n              name=\"minStock\"\n              value={formData.minStock}\n              onChange={handleChange}\n              min=\"0\"\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              required\n            />\n          </div>\n          <div className=\"md:col-span-2\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Imagen del Producto</label>\n            <div className=\"flex items-center space-x-4\">\n              {formData.image ? (\n                <div className=\"relative\">\n                  <img src={formData.image} alt=\"Preview\" className=\"h-20 w-20 object-cover rounded-md\" />\n                  <button\n                    type=\"button\"\n                    onClick={() => setFormData({...formData, image: null})}\n                    className=\"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1\"\n                  >\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-4 w-4\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n                      <path fillRule=\"evenodd\" d=\"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z\" clipRule=\"evenodd\" />\n                    </svg>\n                  </button>\n                </div>\n              ) : (\n                <div className=\"h-20 w-20 bg-gray-200 rounded-md flex items-center justify-center dark:bg-gray-700\">\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-8 w-8 text-gray-400 dark:text-gray-500\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z\" />\n                  </svg>\n                </div>\n              )}\n              <div>\n                <input\n                  type=\"file\"\n                  ref={fileInputRef}\n                  onChange={handleImageChange}\n                  accept=\"image/*\"\n                  className=\"hidden\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => fileInputRef.current.click()}\n                  className=\"px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\"\n                >\n                  {formData.image ? 'Cambiar imagen' : 'Subir imagen'}\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mt-6\">\n          <h4 className=\"text-md font-medium text-gray-700 dark:text-gray-200 mb-2\">Gestión de Lotes (Ingreso de Stock)</h4>\n          <div className=\"flex space-x-2 mb-4\">\n            <input\n              type=\"number\"\n              value={newLotQuantity}\n              onChange={(e) => setNewLotQuantity(parseInt(e.target.value) || 0)}\n              placeholder=\"Cantidad\"\n              min=\"1\"\n              className=\"w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            />\n            <input\n              type=\"date\"\n              value={newLotExpiryDate}\n              onChange={(e) => setNewLotExpiryDate(e.target.value)}\n              className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            />\n            <button\n              type=\"button\"\n              onClick={handleAddLot}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n            >\n              Agregar Lote\n            </button>\n          </div>\n          {formData.lots.length > 0 ? (\n            <div className=\"bg-gray-50 p-4 rounded-md dark:bg-gray-700\">\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\">\n                <thead>\n                  <tr>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Cantidad</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Fecha Vencimiento</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Acción</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\n                  {formData.lots.map(lot => (\n                    <tr key={lot.id}>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900\">\n                        <input\n                          type=\"number\"\n                          min=\"0\"\n                          value={lot.quantity}\n                          onChange={(e) => handleEditLotQuantity(lot.id, e.target.value)}\n                          className=\"w-20 px-2 py-1 border border-gray-300 rounded-md text-center dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                        />\n                      </td>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\">{lot.expiryDate}</td>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm font-medium\">\n                        <button\n                          type=\"button\"\n                          onClick={() => handleRemoveLot(lot.id)}\n                          className=\"text-red-600 hover:text-red-900\"\n                        >\n                          Eliminar\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          ) : (\n            <p className=\"text-gray-500 dark:text-gray-300\">No hay lotes agregados para este producto.</p>\n          )}\n        </div>\n\n        <div className=\"mt-6 flex justify-end space-x-3\">\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\"\n          >\n            Cancelar\n          </button>\n          <button\n            type=\"submit\"\n            className=\"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n          >\n            {product ? 'Actualizar' : 'Guardar'}\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n};\n\nexport default ProductForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}