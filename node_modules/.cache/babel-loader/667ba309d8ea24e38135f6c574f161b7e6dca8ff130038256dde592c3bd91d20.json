{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getAllData,addData}from'../utils/indexedDb';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MarketSelectionModal=_ref=>{let{onSelectMarket,onClose}=_ref;const[markets,setMarkets]=useState([]);const[selectedMarketId,setSelectedMarketId]=useState('');const[showNewMarketInput,setShowNewMarketInput]=useState(false);const[newMarketName,setNewMarketName]=useState('');useEffect(()=>{const loadMarkets=async()=>{const allMarkets=await getAllData('markets');setMarkets(allMarkets);if(allMarkets.length>0){setSelectedMarketId(allMarkets[0].id);}};loadMarkets();},[]);const handleSelect=()=>{if(selectedMarketId){onSelectMarket(selectedMarketId);}else{alert('Por favor, selecciona un mercado.');}};const handleAddMarket=async()=>{if(!newMarketName.trim())return;await addData('markets',{name:newMarketName});const updated=await getAllData('markets');setMarkets(updated);setSelectedMarketId(updated[updated.length-1].id);setNewMarketName('');setShowNewMarketInput(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-6 rounded-lg shadow-xl w-full max-w-md dark:bg-gray-800\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mb-4\",children:/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 dark:text-white\",children:\"Selecciona un Mercado\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 dark:text-gray-300 mb-4\",children:\"Como administrador, debes seleccionar el mercado que deseas gestionar.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsxs(\"select\",{value:selectedMarketId,onChange:e=>setSelectedMarketId(e.target.value),className:\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",children:[markets.length===0&&/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"No hay mercados disponibles\"}),markets.map(market=>/*#__PURE__*/_jsx(\"option\",{value:market.id,children:market.name},market.id))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewMarketInput(true),className:\"p-2 bg-green-500 text-white rounded-full hover:bg-green-600\",title:\"Agregar nuevo mercado\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-bold leading-none\",children:\"+\"})})]}),showNewMarketInput&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 mb-4\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMarketName,onChange:e=>setNewMarketName(e.target.value),placeholder:\"Nombre del nuevo mercado\",className:\"w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowNewMarketInput(false),className:\"text-gray-500 hover:text-gray-700 dark:text-gray-300\",children:\"Cancelar\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAddMarket,className:\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\",children:\"Guardar\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSelect,disabled:!selectedMarketId,className:\"w-full px-4 py-2 rounded-lg transition-colors \".concat(selectedMarketId?'bg-blue-600 hover:bg-blue-700 text-white':'bg-gray-400 text-gray-700 cursor-not-allowed dark:bg-gray-600 dark:text-gray-300'),children:\"Continuar\"})]})});};export default MarketSelectionModal;","map":{"version":3,"names":["React","useState","useEffect","getAllData","addData","jsx","_jsx","jsxs","_jsxs","MarketSelectionModal","_ref","onSelectMarket","onClose","markets","setMarkets","selectedMarketId","setSelectedMarketId","showNewMarketInput","setShowNewMarketInput","newMarketName","setNewMarketName","loadMarkets","allMarkets","length","id","handleSelect","alert","handleAddMarket","trim","name","updated","className","children","value","onChange","e","target","map","market","onClick","title","type","placeholder","disabled","concat"],"sources":["C:/Users/lucas/Downloads/Minimarket PRO/src/components/MarketSelectionModal.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { getAllData, addData } from '../utils/indexedDb';\r\n\r\nconst MarketSelectionModal = ({ onSelectMarket, onClose }) => {\r\n  const [markets, setMarkets] = useState([]);\r\n  const [selectedMarketId, setSelectedMarketId] = useState('');\r\n  const [showNewMarketInput, setShowNewMarketInput] = useState(false);\r\n  const [newMarketName, setNewMarketName] = useState('');\r\n\r\n  useEffect(() => {\r\n    const loadMarkets = async () => {\r\n      const allMarkets = await getAllData('markets');\r\n      setMarkets(allMarkets);\r\n      if (allMarkets.length > 0) {\r\n        setSelectedMarketId(allMarkets[0].id);\r\n      }\r\n    };\r\n    loadMarkets();\r\n  }, []);\r\n\r\n  const handleSelect = () => {\r\n    if (selectedMarketId) {\r\n      onSelectMarket(selectedMarketId);\r\n    } else {\r\n      alert('Por favor, selecciona un mercado.');\r\n    }\r\n  };\r\n\r\n  const handleAddMarket = async () => {\r\n    if (!newMarketName.trim()) return;\r\n    await addData('markets', { name: newMarketName });\r\n    const updated = await getAllData('markets');\r\n    setMarkets(updated);\r\n    setSelectedMarketId(updated[updated.length - 1].id);\r\n    setNewMarketName('');\r\n    setShowNewMarketInput(false);\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white p-6 rounded-lg shadow-xl w-full max-w-md dark:bg-gray-800\">\r\n        <div className=\"flex justify-between items-center mb-4\">\r\n          <h3 className=\"text-lg font-semibold text-gray-800 dark:text-white\">Selecciona un Mercado</h3>\r\n        </div>\r\n\r\n        <p className=\"text-gray-700 dark:text-gray-300 mb-4\">\r\n          Como administrador, debes seleccionar el mercado que deseas gestionar.\r\n        </p>\r\n\r\n        <div className=\"flex items-center gap-2 mb-4\">\r\n          <select\r\n            value={selectedMarketId}\r\n            onChange={(e) => setSelectedMarketId(e.target.value)}\r\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n          >\r\n            {markets.length === 0 && <option value=\"\">No hay mercados disponibles</option>}\r\n            {markets.map(market => (\r\n              <option key={market.id} value={market.id}>{market.name}</option>\r\n            ))}\r\n          </select>\r\n\r\n          <button\r\n            onClick={() => setShowNewMarketInput(true)}\r\n            className=\"p-2 bg-green-500 text-white rounded-full hover:bg-green-600\"\r\n            title=\"Agregar nuevo mercado\"\r\n          >\r\n            <span className=\"text-xl font-bold leading-none\">+</span>\r\n          </button>\r\n        </div>\r\n\r\n        {showNewMarketInput && (\r\n          <div className=\"space-y-2 mb-4\">\r\n            <input\r\n              type=\"text\"\r\n              value={newMarketName}\r\n              onChange={(e) => setNewMarketName(e.target.value)}\r\n              placeholder=\"Nombre del nuevo mercado\"\r\n              className=\"w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\r\n            />\r\n            <div className=\"flex justify-end gap-2\">\r\n              <button\r\n                onClick={() => setShowNewMarketInput(false)}\r\n                className=\"text-gray-500 hover:text-gray-700 dark:text-gray-300\"\r\n              >\r\n                Cancelar\r\n              </button>\r\n              <button\r\n                onClick={handleAddMarket}\r\n                className=\"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700\"\r\n              >\r\n                Guardar\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n\r\n        <button\r\n          onClick={handleSelect}\r\n          disabled={!selectedMarketId}\r\n          className={`w-full px-4 py-2 rounded-lg transition-colors ${selectedMarketId ? 'bg-blue-600 hover:bg-blue-700 text-white' : 'bg-gray-400 text-gray-700 cursor-not-allowed dark:bg-gray-600 dark:text-gray-300'}`}\r\n        >\r\n          Continuar\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MarketSelectionModal;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}