{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\lucas\\\\OneDrive\\\\Documentos\\\\Minimarket PRO\\\\Version 1.0\\\\src\\\\components\\\\SaleForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { getCurrentMarket } from '../utils/auth';\nimport CustomerSearchModal from './CustomerSearchModal';\nimport { getAllData } from '../utils/indexedDb';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SaleForm = ({\n  products,\n  onAddSale,\n  onCancel\n}) => {\n  _s();\n  const [saleItems, setSaleItems] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [quantity, setQuantity] = useState(1); // Cantidad para productos por unidad\n  const [customerName, setCustomerName] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('cash');\n  const [invoiceType, setInvoiceType] = useState('ticket');\n  const [cashReceived, setCashReceived] = useState(0);\n  const [showCustomerSearchModal, setShowCustomerSearchModal] = useState(false);\n  const [currentAccountCustomer, setCurrentAccountCustomer] = useState(null);\n  const [allCustomers, setAllCustomers] = useState([]);\n  const [message, setMessage] = useState({\n    type: '',\n    text: ''\n  });\n  const barcodeScannerRef = useRef(null);\n  const [weightInput, setWeightInput] = useState(0); // Peso en kilogramos (ej. 0.250)\n  const weightInputRef = useRef(null);\n  useEffect(() => {\n    const loadCustomers = async () => {\n      const savedCustomers = await getAllData('customers');\n      const marketId = getCurrentMarket();\n      const customersForMarket = savedCustomers.filter(c => c.marketId === marketId);\n      setAllCustomers(customersForMarket);\n    };\n    loadCustomers();\n  }, []);\n  useEffect(() => {\n    if (searchTerm.length > 1) {\n      const results = products.filter(product => (product.name.toLowerCase().includes(searchTerm.toLowerCase()) || product.barcode && product.barcode.includes(searchTerm)) && product.stock > 0 && !saleItems.some(item => item.productId === product.id));\n      setSearchResults(results);\n    } else {\n      setSearchResults([]);\n    }\n  }, [searchTerm, products, saleItems]);\n  const handleBarcodeScan = e => {\n    if (e.key === 'Enter') {\n      const scannedBarcode = e.target.value;\n      const foundProduct = products.find(p => p.barcode === scannedBarcode);\n      if (foundProduct) {\n        setSelectedProduct(foundProduct);\n        setSearchTerm(foundProduct.name);\n        setQuantity(1);\n        setWeightInput(0);\n        setSearchResults([]);\n        barcodeScannerRef.current.value = '';\n        if (foundProduct.unit === 'gramos' && weightInputRef.current) {\n          weightInputRef.current.focus();\n        }\n      } else {\n        setMessage({\n          type: 'error',\n          text: `Producto con código ${scannedBarcode} no encontrado.`\n        });\n      }\n    }\n  };\n  const handleAddItem = () => {\n    if (!selectedProduct) {\n      setMessage({\n        type: 'error',\n        text: 'Debe seleccionar un producto.'\n      });\n      return;\n    }\n    let itemQuantity = quantity;\n    let itemPrice = selectedProduct.price; // Precio por unidad o por KG\n    let itemSubtotal = selectedProduct.price * quantity;\n    let displayUnit = selectedProduct.unit;\n    if (selectedProduct.unit === 'gramos') {\n      if (weightInput <= 0) {\n        setMessage({\n          type: 'error',\n          text: 'Debe ingresar un peso válido para productos por gramo.'\n        });\n        return;\n      }\n      itemQuantity = weightInput; // La cantidad es el peso en gramos\n      itemPrice = selectedProduct.price; // Precio por KG\n      itemSubtotal = selectedProduct.price / 1000 * weightInput; // Subtotal basado en peso\n      displayUnit = 'kg'; // Mostrar en kg en el carrito\n    } else {\n      if (quantity <= 0) {\n        setMessage({\n          type: 'error',\n          text: 'Debe ingresar una cantidad válida.'\n        });\n        return;\n      }\n      if (quantity > selectedProduct.stock) {\n        setMessage({\n          type: 'error',\n          text: `No hay suficiente stock para ${selectedProduct.name}. Stock actual: ${selectedProduct.stock}`\n        });\n        return;\n      }\n    }\n    const newItem = {\n      productId: selectedProduct.id,\n      name: selectedProduct.name,\n      price: itemPrice,\n      // Precio por unidad o por KG\n      quantity: itemQuantity,\n      // Cantidad de unidades o peso en gramos\n      subtotal: itemSubtotal,\n      lots: selectedProduct.lots,\n      unit: displayUnit // Unidad para mostrar en el ticket/carrito\n    };\n    setSaleItems([...saleItems, newItem]);\n    setSelectedProduct(null);\n    setSearchTerm('');\n    setQuantity(1);\n    setWeightInput(0);\n    setSearchResults([]);\n    setMessage({\n      type: '',\n      text: ''\n    });\n  };\n  const handleRemoveItem = index => {\n    const newItems = [...saleItems];\n    newItems.splice(index, 1);\n    setSaleItems(newItems);\n  };\n  const calculateTotal = () => saleItems.reduce((sum, item) => sum + item.subtotal, 0);\n  const calculateSubtotal = () => calculateTotal() / 1.21;\n  const calculateTax = () => calculateTotal() - calculateSubtotal();\n  const calculateChange = () => {\n    if (paymentMethod === 'cash') {\n      return cashReceived - calculateTotal();\n    }\n    return 0;\n  };\n  const handleSubmit = e => {\n    e.preventDefault();\n    setMessage({\n      type: '',\n      text: ''\n    });\n    if (saleItems.length === 0) {\n      setMessage({\n        type: 'error',\n        text: 'No hay productos en el carrito.'\n      });\n      return;\n    }\n    if (paymentMethod === 'cash' && cashReceived < calculateTotal()) {\n      setMessage({\n        type: 'error',\n        text: 'El efectivo recibido es insuficiente.'\n      });\n      return;\n    }\n    if (paymentMethod === 'current_account' && !currentAccountCustomer) {\n      setMessage({\n        type: 'error',\n        text: 'Debe seleccionar un cliente para la cuenta corriente.'\n      });\n      return;\n    }\n    const total = calculateTotal();\n    const subtotal = calculateSubtotal();\n    const tax = calculateTax();\n    const newSale = {\n      id: Date.now(),\n      date: new Date().toISOString(),\n      customerName: currentAccountCustomer ? `${currentAccountCustomer.name} ${currentAccountCustomer.lastName}` : customerName,\n      customerDNI: currentAccountCustomer ? currentAccountCustomer.dni : null,\n      paymentMethod,\n      invoiceType,\n      items: saleItems,\n      total,\n      tax,\n      subtotal,\n      marketId: getCurrentMarket()\n    };\n    try {\n      onAddSale(newSale);\n      if (paymentMethod === 'current_account') {\n        setMessage({\n          type: 'success',\n          text: `Venta agregada con éxito a la cuenta corriente de ${currentAccountCustomer.name} ${currentAccountCustomer.lastName}.`\n        });\n      } else {\n        setMessage({\n          type: 'success',\n          text: 'Venta finalizada con éxito.'\n        });\n      }\n      handlePrintTicket(newSale);\n      setSaleItems([]);\n      setSearchTerm('');\n      setSelectedProduct(null);\n      setQuantity(1);\n      setWeightInput(0);\n      setCustomerName('');\n      setPaymentMethod('cash');\n      setInvoiceType('ticket');\n      setCashReceived(0);\n      setCurrentAccountCustomer(null);\n    } catch (error) {\n      setMessage({\n        type: 'error',\n        text: `No fue posible agregar la venta: ${error.message || 'Error desconocido'}`\n      });\n    }\n  };\n  const handleConsultPrice = () => {\n    if (selectedProduct) {\n      alert(`El precio de ${selectedProduct.name} es $${selectedProduct.price.toFixed(2)}.`);\n    } else {\n      alert('Por favor, selecciona un producto para consultar su precio.');\n    }\n  };\n  const handlePaymentMethodChange = e => {\n    const method = e.target.value;\n    setPaymentMethod(method);\n    setCashReceived(0);\n    if (method === 'current_account') {\n      setShowCustomerSearchModal(true);\n    } else {\n      setCurrentAccountCustomer(null);\n    }\n  };\n  const handleSelectCurrentAccountCustomer = customer => {\n    setCurrentAccountCustomer(customer);\n    setShowCustomerSearchModal(false);\n  };\n  const handlePrintTicket = sale => {\n    const printWindow = window.open('', '_blank');\n    let ticketContent = `\n      <html>\n      <head>\n        <title>Ticket de Venta</title>\n        <style>\n          body { font-family: 'Courier New', monospace; font-size: 12px; width: 58mm; margin: 0 auto; padding: 5mm; }\n          .header, .footer { text-align: center; margin-bottom: 5mm; }\n          .items { width: 100%; border-collapse: collapse; margin-bottom: 5mm; }\n          .items th, .items td { padding: 1mm 0; text-align: left; }\n          .items th { border-bottom: 1px dashed #000; }\n          .total { text-align: right; font-weight: bold; margin-top: 2mm; }\n          .line { border-top: 1px dashed #000; margin: 2mm 0; }\n        </style>\n      </head>\n      <body>\n        <div class=\"header\">\n          <h3>MINIMARKET PRO</h3>\n          <p>Ticket de ${sale.invoiceType === 'ticket' ? 'Venta' : `Factura ${sale.invoiceType}`}</p>\n          <p>Fecha: ${new Date(sale.date).toLocaleString()}</p>\n          <p>Cliente: ${sale.customerName || 'Consumidor Final'}</p>\n          <div class=\"line\"></div>\n        </div>\n        \n        <table class=\"items\">\n          <thead>\n            <tr>\n              <th>Producto</th>\n              <th>Cant.</th>\n              <th>Precio</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${sale.items.map(item => `\n              <tr>\n                <td>${item.name}</td>\n                <td>${item.quantity} ${item.unit === 'kg' ? 'kg' : item.unit === 'gr' ? 'gr' : ''}</td>\n                <td>$${item.price.toFixed(2)}</td>\n                <td>$${item.subtotal.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n        <div class=\"line\"></div>\n        <div class=\"total\">\n          <p>Subtotal: $${sale.subtotal.toFixed(2)}</p>\n          <p>IVA (21%): $${sale.tax.toFixed(2)}</p>\n          <p>TOTAL: $${sale.total.toFixed(2)}</p>\n          <p>Método de Pago: ${sale.paymentMethod}</p>\n          ${sale.paymentMethod === 'cash' ? `<p>Efectivo Recibido: $${cashReceived.toFixed(2)}</p><p>Cambio: $${calculateChange().toFixed(2)}</p>` : ''}\n        </div>\n        <div class=\"line\"></div>\n        <div class=\"footer\">\n          <p>¡Gracias por su compra!</p>\n        </div>\n      </body>\n      </html>\n    `;\n    printWindow.document.write(ticketContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-lg font-semibold mb-4 text-gray-800 dark:text-white\",\n      children: \"Nueva Venta\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-3 mb-4 rounded-md ${message.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`,\n        children: message.text\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Nombre del Cliente (Opcional)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: currentAccountCustomer ? `${currentAccountCustomer.name} ${currentAccountCustomer.lastName}` : customerName,\n            onChange: e => setCustomerName(e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",\n            placeholder: \"Consumidor Final\",\n            readOnly: !!currentAccountCustomer\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n            children: \"Tipo de Comprobante\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: invoiceType,\n            onChange: e => setInvoiceType(e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"ticket\",\n              children: \"Ticket\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"A\",\n              children: \"Factura A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"B\",\n              children: \"Factura B\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"C\",\n              children: \"Factura C\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 316,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-md font-medium text-gray-700 dark:text-gray-200 mb-2\",\n          children: \"Agregar Productos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n              children: \"Escanear C\\xF3digo de Barras\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              ref: barcodeScannerRef,\n              onKeyDown: handleBarcodeScan,\n              placeholder: \"Escanear producto...\",\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 mb-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n              children: \"O buscar por nombre\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              value: searchTerm,\n              onChange: e => {\n                setSearchTerm(e.target.value);\n                setSelectedProduct(null);\n              },\n              placeholder: \"Buscar producto por nombre...\",\n              className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 334,\n              columnNumber: 15\n            }, this), searchResults.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md max-h-60 overflow-auto dark:bg-gray-700\",\n              children: searchResults.map(product => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: `px-4 py-2 hover:bg-gray-100 cursor-pointer ${(selectedProduct === null || selectedProduct === void 0 ? void 0 : selectedProduct.id) === product.id ? 'bg-blue-50' : ''} dark:hover:bg-gray-600 dark:text-gray-200`,\n                onClick: () => {\n                  setSelectedProduct(product);\n                  setSearchTerm(product.name);\n                  setSearchResults([]);\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium\",\n                  children: product.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 356,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600 dark:text-gray-400\",\n                  children: [\"$\", product.price.toFixed(2), \" | Stock: \", product.stock, \" | \", product.barcode]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 23\n                }, this)]\n              }, product.id, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), selectedProduct && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n                children: \"Producto seleccionado\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 369,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"p-2 bg-gray-50 rounded-md dark:bg-gray-700\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"font-medium text-gray-800 dark:text-white\",\n                  children: selectedProduct.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 371,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-sm text-gray-600 dark:text-gray-400\",\n                  children: [\"$\", selectedProduct.price.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 372,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 dark:text-gray-400\",\n                  children: [\"Stock: \", selectedProduct.stock]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 373,\n                  columnNumber: 21\n                }, this), selectedProduct.lots && selectedProduct.lots.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-xs text-gray-500 dark:text-gray-400\",\n                  children: [\"Vencimiento m\\xE1s pr\\xF3ximo: \", selectedProduct.lots[0].expiryDate]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 370,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this), selectedProduct.unit === 'gramos' ? /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n                children: \"Peso (gramos)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 383,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: \"0\",\n                step: \"1\",\n                value: weightInput,\n                onChange: e => setWeightInput(parseFloat(e.target.value) || 0),\n                ref: weightInputRef,\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 384,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600 dark:text-gray-400 mt-1\",\n                children: [\"Precio estimado: $\", (selectedProduct.price / 1000 * weightInput).toFixed(2)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n                children: \"Cantidad\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 399,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"number\",\n                min: \"1\",\n                max: selectedProduct.stock,\n                value: quantity,\n                onChange: e => setQuantity(Math.min(selectedProduct.stock, parseInt(e.target.value) || 1)),\n                className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 400,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 398,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex flex-col space-y-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleAddItem,\n                className: \"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\",\n                children: \"Agregar al Carrito\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                onClick: handleConsultPrice,\n                className: \"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600\",\n                children: \"Consultar Precio\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 418,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 410,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 9\n      }, this), saleItems.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: \"text-md font-medium text-gray-700 dark:text-gray-200 mb-2\",\n          children: \"Productos en Carrito\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 433,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-50 p-4 rounded-md dark:bg-gray-700\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"min-w-full divide-y divide-gray-200 dark:divide-gray-600\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                  children: \"Producto\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 438,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                  children: \"Precio Unit.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 439,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                  children: \"Cantidad\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 440,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                  children: \"Subtotal\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 441,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  className: \"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\",\n                  children: \"Acci\\xF3n\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 442,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 437,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              className: \"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\",\n              children: saleItems.map((item, index) => /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                  children: item.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 448,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                  children: [\"$\", item.price.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                  children: [item.quantity, \" \", item.unit === 'gramos' ? 'gr' : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 450,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\",\n                  children: [\"$\", item.subtotal.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 451,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-sm font-medium\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    onClick: () => handleRemoveItem(index),\n                    className: \"text-red-600 hover:text-red-900\",\n                    children: \"Eliminar\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 453,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 452,\n                  columnNumber: 23\n                }, this)]\n              }, index, true, {\n                fileName: _jsxFileName,\n                lineNumber: 447,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"tfoot\", {\n              children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"3\",\n                  className: \"px-4 py-2 text-right text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: \"Subtotal (sin IVA):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 466,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\",\n                  children: [\"$\", calculateSubtotal().toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 467,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 470,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 465,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"3\",\n                  className: \"px-4 py-2 text-right text-sm font-medium text-gray-700 dark:text-gray-300\",\n                  children: \"IVA (21%):\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 473,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\",\n                  children: [\"$\", calculateTax().toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 474,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 477,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 472,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  colSpan: \"3\",\n                  className: \"px-4 py-2 text-right text-lg font-bold text-gray-800 dark:text-white\",\n                  children: \"Total:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 480,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: \"px-4 py-2 whitespace-nowrap text-lg font-bold text-gray-900 dark:text-white\",\n                  children: [\"$\", calculateTotal().toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 481,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 484,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 479,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 435,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 434,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n          children: \"M\\xE9todo de Pago\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 493,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: paymentMethod,\n          onChange: handlePaymentMethodChange,\n          className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"cash\",\n            children: \"Efectivo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"debit\",\n            children: \"D\\xE9bito\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"credit\",\n            children: \"Cr\\xE9dito\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"mp\",\n            children: \"Mercado Pago\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 502,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"current_account\",\n            children: \"Cuenta Corriente\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 503,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 492,\n        columnNumber: 9\n      }, this), paymentMethod === 'cash' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\",\n          children: \"Efectivo Recibido\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 509,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"number\",\n          min: \"0\",\n          step: \"0.01\",\n          value: cashReceived,\n          onChange: e => setCashReceived(parseFloat(e.target.value) || 0),\n          className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg font-bold text-right mt-2 text-gray-800 dark:text-white\",\n          children: [\"Cambio: $\", calculateChange().toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-6 flex justify-end space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: onCancel,\n          className: \"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\",\n          children: \"Cancelar\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 523,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: saleItems.length === 0 || paymentMethod === 'cash' && cashReceived < calculateTotal() || paymentMethod === 'current_account' && !currentAccountCustomer,\n          className: `px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${saleItems.length === 0 || paymentMethod === 'cash' && cashReceived < calculateTotal() || paymentMethod === 'current_account' && !currentAccountCustomer ? 'bg-gray-400' : 'bg-green-600 hover:bg-green-700'} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`,\n          children: \"Finalizar Venta\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 7\n    }, this), showCustomerSearchModal && /*#__PURE__*/_jsxDEV(CustomerSearchModal, {\n      customers: allCustomers,\n      onSelectCustomer: handleSelectCurrentAccountCustomer,\n      onClose: () => {\n        setShowCustomerSearchModal(false);\n        setPaymentMethod('cash');\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 541,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 285,\n    columnNumber: 5\n  }, this);\n};\n_s(SaleForm, \"1jRLltABkIJHkrK5RkA53AErJWw=\");\n_c = SaleForm;\nexport default SaleForm;\nvar _c;\n$RefreshReg$(_c, \"SaleForm\");","map":{"version":3,"names":["React","useState","useEffect","useRef","getCurrentMarket","CustomerSearchModal","getAllData","jsxDEV","_jsxDEV","SaleForm","products","onAddSale","onCancel","_s","saleItems","setSaleItems","searchTerm","setSearchTerm","searchResults","setSearchResults","selectedProduct","setSelectedProduct","quantity","setQuantity","customerName","setCustomerName","paymentMethod","setPaymentMethod","invoiceType","setInvoiceType","cashReceived","setCashReceived","showCustomerSearchModal","setShowCustomerSearchModal","currentAccountCustomer","setCurrentAccountCustomer","allCustomers","setAllCustomers","message","setMessage","type","text","barcodeScannerRef","weightInput","setWeightInput","weightInputRef","loadCustomers","savedCustomers","marketId","customersForMarket","filter","c","length","results","product","name","toLowerCase","includes","barcode","stock","some","item","productId","id","handleBarcodeScan","e","key","scannedBarcode","target","value","foundProduct","find","p","current","unit","focus","handleAddItem","itemQuantity","itemPrice","price","itemSubtotal","displayUnit","newItem","subtotal","lots","handleRemoveItem","index","newItems","splice","calculateTotal","reduce","sum","calculateSubtotal","calculateTax","calculateChange","handleSubmit","preventDefault","total","tax","newSale","Date","now","date","toISOString","lastName","customerDNI","dni","items","handlePrintTicket","error","handleConsultPrice","alert","toFixed","handlePaymentMethodChange","method","handleSelectCurrentAccountCustomer","customer","sale","printWindow","window","open","ticketContent","toLocaleString","map","join","document","write","close","print","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","placeholder","readOnly","ref","onKeyDown","onClick","expiryDate","min","step","parseFloat","max","Math","parseInt","colSpan","disabled","customers","onSelectCustomer","onClose","_c","$RefreshReg$"],"sources":["C:/Users/lucas/OneDrive/Documentos/Minimarket PRO/Version 1.0/src/components/SaleForm.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { getCurrentMarket } from '../utils/auth';\nimport CustomerSearchModal from './CustomerSearchModal';\nimport { getAllData } from '../utils/indexedDb';\n\nconst SaleForm = ({ products, onAddSale, onCancel }) => {\n  const [saleItems, setSaleItems] = useState([]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [quantity, setQuantity] = useState(1); // Cantidad para productos por unidad\n  const [customerName, setCustomerName] = useState('');\n  const [paymentMethod, setPaymentMethod] = useState('cash');\n  const [invoiceType, setInvoiceType] = useState('ticket');\n  const [cashReceived, setCashReceived] = useState(0);\n\n  const [showCustomerSearchModal, setShowCustomerSearchModal] = useState(false);\n  const [currentAccountCustomer, setCurrentAccountCustomer] = useState(null);\n  const [allCustomers, setAllCustomers] = useState([]);\n  const [message, setMessage] = useState({ type: '', text: '' });\n\n  const barcodeScannerRef = useRef(null);\n  const [weightInput, setWeightInput] = useState(0); // Peso en kilogramos (ej. 0.250)\n  const weightInputRef = useRef(null);\n\n  useEffect(() => {\n    const loadCustomers = async () => {\n      const savedCustomers = await getAllData('customers');\n      const marketId = getCurrentMarket();\n      const customersForMarket = savedCustomers.filter(c => c.marketId === marketId);\n      setAllCustomers(customersForMarket);\n    };\n    loadCustomers();\n  }, []);\n\n  useEffect(() => {\n    if (searchTerm.length > 1) {\n      const results = products.filter(\n        product => \n          (product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n          (product.barcode && product.barcode.includes(searchTerm))) &&\n          product.stock > 0 &&\n          !saleItems.some(item => item.productId === product.id)\n      );\n      setSearchResults(results);\n    } else {\n      setSearchResults([]);\n    }\n  }, [searchTerm, products, saleItems]);\n\n  const handleBarcodeScan = (e) => {\n    if (e.key === 'Enter') {\n      const scannedBarcode = e.target.value;\n      const foundProduct = products.find(p => p.barcode === scannedBarcode);\n      if (foundProduct) {\n        setSelectedProduct(foundProduct);\n        setSearchTerm(foundProduct.name);\n        setQuantity(1);\n        setWeightInput(0);\n        setSearchResults([]);\n        barcodeScannerRef.current.value = '';\n        if (foundProduct.unit === 'gramos' && weightInputRef.current) {\n          weightInputRef.current.focus();\n        }\n      } else {\n        setMessage({ type: 'error', text: `Producto con código ${scannedBarcode} no encontrado.` });\n      }\n    }\n  };\n\n  const handleAddItem = () => {\n    if (!selectedProduct) {\n      setMessage({ type: 'error', text: 'Debe seleccionar un producto.' });\n      return;\n    }\n\n    let itemQuantity = quantity;\n    let itemPrice = selectedProduct.price; // Precio por unidad o por KG\n    let itemSubtotal = selectedProduct.price * quantity;\n    let displayUnit = selectedProduct.unit;\n\n    if (selectedProduct.unit === 'gramos') {\n      if (weightInput <= 0) {\n        setMessage({ type: 'error', text: 'Debe ingresar un peso válido para productos por gramo.' });\n        return;\n      }\n      itemQuantity = weightInput; // La cantidad es el peso en gramos\n      itemPrice = selectedProduct.price; // Precio por KG\n      itemSubtotal = (selectedProduct.price / 1000) * weightInput; // Subtotal basado en peso\n      displayUnit = 'kg'; // Mostrar en kg en el carrito\n    } else {\n      if (quantity <= 0) {\n        setMessage({ type: 'error', text: 'Debe ingresar una cantidad válida.' });\n        return;\n      }\n      if (quantity > selectedProduct.stock) {\n        setMessage({ type: 'error', text: `No hay suficiente stock para ${selectedProduct.name}. Stock actual: ${selectedProduct.stock}` });\n        return;\n      }\n    }\n\n    const newItem = {\n      productId: selectedProduct.id,\n      name: selectedProduct.name,\n      price: itemPrice, // Precio por unidad o por KG\n      quantity: itemQuantity, // Cantidad de unidades o peso en gramos\n      subtotal: itemSubtotal,\n      lots: selectedProduct.lots,\n      unit: displayUnit // Unidad para mostrar en el ticket/carrito\n    };\n\n    setSaleItems([...saleItems, newItem]);\n    setSelectedProduct(null);\n    setSearchTerm('');\n    setQuantity(1);\n    setWeightInput(0);\n    setSearchResults([]);\n    setMessage({ type: '', text: '' });\n  };\n\n  const handleRemoveItem = (index) => {\n    const newItems = [...saleItems];\n    newItems.splice(index, 1);\n    setSaleItems(newItems);\n  };\n\n  const calculateTotal = () => saleItems.reduce((sum, item) => sum + item.subtotal, 0);\n  const calculateSubtotal = () => calculateTotal() / 1.21;\n  const calculateTax = () => calculateTotal() - calculateSubtotal();\n  const calculateChange = () => {\n    if (paymentMethod === 'cash') {\n      return cashReceived - calculateTotal();\n    }\n    return 0;\n  };\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    setMessage({ type: '', text: '' });\n\n    if (saleItems.length === 0) {\n      setMessage({ type: 'error', text: 'No hay productos en el carrito.' });\n      return;\n    }\n    if (paymentMethod === 'cash' && cashReceived < calculateTotal()) {\n      setMessage({ type: 'error', text: 'El efectivo recibido es insuficiente.' });\n      return;\n    }\n    if (paymentMethod === 'current_account' && !currentAccountCustomer) {\n      setMessage({ type: 'error', text: 'Debe seleccionar un cliente para la cuenta corriente.' });\n      return;\n    }\n\n    const total = calculateTotal();\n    const subtotal = calculateSubtotal();\n    const tax = calculateTax();\n\n    const newSale = {\n      id: Date.now(),\n      date: new Date().toISOString(),\n      customerName: currentAccountCustomer ? `${currentAccountCustomer.name} ${currentAccountCustomer.lastName}` : customerName,\n      customerDNI: currentAccountCustomer ? currentAccountCustomer.dni : null,\n      paymentMethod,\n      invoiceType,\n      items: saleItems,\n      total,\n      tax,\n      subtotal,\n      marketId: getCurrentMarket()\n    };\n\n    try {\n      onAddSale(newSale);\n      if (paymentMethod === 'current_account') {\n        setMessage({ type: 'success', text: `Venta agregada con éxito a la cuenta corriente de ${currentAccountCustomer.name} ${currentAccountCustomer.lastName}.` });\n      } else {\n        setMessage({ type: 'success', text: 'Venta finalizada con éxito.' });\n      }\n      handlePrintTicket(newSale);\n      setSaleItems([]);\n      setSearchTerm('');\n      setSelectedProduct(null);\n      setQuantity(1);\n      setWeightInput(0);\n      setCustomerName('');\n      setPaymentMethod('cash');\n      setInvoiceType('ticket');\n      setCashReceived(0);\n      setCurrentAccountCustomer(null);\n    } catch (error) {\n      setMessage({ type: 'error', text: `No fue posible agregar la venta: ${error.message || 'Error desconocido'}` });\n    }\n  };\n\n  const handleConsultPrice = () => {\n    if (selectedProduct) {\n      alert(`El precio de ${selectedProduct.name} es $${selectedProduct.price.toFixed(2)}.`);\n    } else {\n      alert('Por favor, selecciona un producto para consultar su precio.');\n    }\n  };\n\n  const handlePaymentMethodChange = (e) => {\n    const method = e.target.value;\n    setPaymentMethod(method);\n    setCashReceived(0);\n    if (method === 'current_account') {\n      setShowCustomerSearchModal(true);\n    } else {\n      setCurrentAccountCustomer(null);\n    }\n  };\n\n  const handleSelectCurrentAccountCustomer = (customer) => {\n    setCurrentAccountCustomer(customer);\n    setShowCustomerSearchModal(false);\n  };\n\n  const handlePrintTicket = (sale) => {\n    const printWindow = window.open('', '_blank');\n    let ticketContent = `\n      <html>\n      <head>\n        <title>Ticket de Venta</title>\n        <style>\n          body { font-family: 'Courier New', monospace; font-size: 12px; width: 58mm; margin: 0 auto; padding: 5mm; }\n          .header, .footer { text-align: center; margin-bottom: 5mm; }\n          .items { width: 100%; border-collapse: collapse; margin-bottom: 5mm; }\n          .items th, .items td { padding: 1mm 0; text-align: left; }\n          .items th { border-bottom: 1px dashed #000; }\n          .total { text-align: right; font-weight: bold; margin-top: 2mm; }\n          .line { border-top: 1px dashed #000; margin: 2mm 0; }\n        </style>\n      </head>\n      <body>\n        <div class=\"header\">\n          <h3>MINIMARKET PRO</h3>\n          <p>Ticket de ${sale.invoiceType === 'ticket' ? 'Venta' : `Factura ${sale.invoiceType}`}</p>\n          <p>Fecha: ${new Date(sale.date).toLocaleString()}</p>\n          <p>Cliente: ${sale.customerName || 'Consumidor Final'}</p>\n          <div class=\"line\"></div>\n        </div>\n        \n        <table class=\"items\">\n          <thead>\n            <tr>\n              <th>Producto</th>\n              <th>Cant.</th>\n              <th>Precio</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ${sale.items.map(item => `\n              <tr>\n                <td>${item.name}</td>\n                <td>${item.quantity} ${item.unit === 'kg' ? 'kg' : (item.unit === 'gr' ? 'gr' : '')}</td>\n                <td>$${item.price.toFixed(2)}</td>\n                <td>$${item.subtotal.toFixed(2)}</td>\n              </tr>\n            `).join('')}\n          </tbody>\n        </table>\n        <div class=\"line\"></div>\n        <div class=\"total\">\n          <p>Subtotal: $${sale.subtotal.toFixed(2)}</p>\n          <p>IVA (21%): $${sale.tax.toFixed(2)}</p>\n          <p>TOTAL: $${sale.total.toFixed(2)}</p>\n          <p>Método de Pago: ${sale.paymentMethod}</p>\n          ${sale.paymentMethod === 'cash' ? `<p>Efectivo Recibido: $${cashReceived.toFixed(2)}</p><p>Cambio: $${calculateChange().toFixed(2)}</p>` : ''}\n        </div>\n        <div class=\"line\"></div>\n        <div class=\"footer\">\n          <p>¡Gracias por su compra!</p>\n        </div>\n      </body>\n      </html>\n    `;\n    printWindow.document.write(ticketContent);\n    printWindow.document.close();\n    printWindow.print();\n  };\n\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800\">\n      <h3 className=\"text-lg font-semibold mb-4 text-gray-800 dark:text-white\">Nueva Venta</h3>\n      <form onSubmit={handleSubmit}>\n        {message.text && (\n          <div className={`p-3 mb-4 rounded-md ${message.type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>\n            {message.text}\n          </div>\n        )}\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Nombre del Cliente (Opcional)</label>\n            <input\n              type=\"text\"\n              value={currentAccountCustomer ? `${currentAccountCustomer.name} ${currentAccountCustomer.lastName}` : customerName}\n              onChange={(e) => setCustomerName(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              placeholder=\"Consumidor Final\"\n              readOnly={!!currentAccountCustomer}\n            />\n          </div>\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Tipo de Comprobante</label>\n            <select\n              value={invoiceType}\n              onChange={(e) => setInvoiceType(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            >\n              <option value=\"ticket\">Ticket</option>\n              <option value=\"A\">Factura A</option>\n              <option value=\"B\">Factura B</option>\n              <option value=\"C\">Factura C</option>\n            </select>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <h4 className=\"text-md font-medium text-gray-700 dark:text-gray-200 mb-2\">Agregar Productos</h4>\n          <div className=\"space-y-4\">\n            <div className=\"relative\">\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Escanear Código de Barras</label>\n              <input\n                type=\"text\"\n                ref={barcodeScannerRef}\n                onKeyDown={handleBarcodeScan}\n                placeholder=\"Escanear producto...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 mb-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              />\n              <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">O buscar por nombre</label>\n              <input\n                type=\"text\"\n                value={searchTerm}\n                onChange={(e) => {\n                  setSearchTerm(e.target.value);\n                  setSelectedProduct(null);\n                }}\n                placeholder=\"Buscar producto por nombre...\"\n                className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n              />\n              {searchResults.length > 0 && (\n                <div className=\"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md max-h-60 overflow-auto dark:bg-gray-700\">\n                  {searchResults.map(product => (\n                    <div\n                      key={product.id}\n                      className={`px-4 py-2 hover:bg-gray-100 cursor-pointer ${selectedProduct?.id === product.id ? 'bg-blue-50' : ''} dark:hover:bg-gray-600 dark:text-gray-200`}\n                      onClick={() => {\n                        setSelectedProduct(product);\n                        setSearchTerm(product.name);\n                        setSearchResults([]);\n                      }}\n                    >\n                      <div className=\"font-medium\">{product.name}</div>\n                      <div className=\"text-sm text-gray-600 dark:text-gray-400\">\n                        ${product.price.toFixed(2)} | Stock: {product.stock} | {product.barcode}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {selectedProduct && (\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 items-end\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Producto seleccionado</label>\n                  <div className=\"p-2 bg-gray-50 rounded-md dark:bg-gray-700\">\n                    <div className=\"font-medium text-gray-800 dark:text-white\">{selectedProduct.name}</div>\n                    <div className=\"text-sm text-gray-600 dark:text-gray-400\">${selectedProduct.price.toFixed(2)}</div>\n                    <div className=\"text-xs text-gray-500 dark:text-gray-400\">Stock: {selectedProduct.stock}</div>\n                    {selectedProduct.lots && selectedProduct.lots.length > 0 && (\n                      <div className=\"text-xs text-gray-500 dark:text-gray-400\">\n                        Vencimiento más próximo: {selectedProduct.lots[0].expiryDate}\n                      </div>\n                    )}\n                  </div>\n                </div>\n                {selectedProduct.unit === 'gramos' ? (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Peso (gramos)</label>\n                    <input\n                      type=\"number\"\n                      min=\"0\"\n                      step=\"1\"\n                      value={weightInput}\n                      onChange={(e) => setWeightInput(parseFloat(e.target.value) || 0)}\n                      ref={weightInputRef}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                    />\n                    <p className=\"text-sm text-gray-600 dark:text-gray-400 mt-1\">\n                      Precio estimado: ${((selectedProduct.price / 1000) * weightInput).toFixed(2)}\n                    </p>\n                  </div>\n                ) : (\n                  <div>\n                    <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Cantidad</label>\n                    <input\n                      type=\"number\"\n                      min=\"1\"\n                      max={selectedProduct.stock}\n                      value={quantity}\n                      onChange={(e) => setQuantity(Math.min(selectedProduct.stock, parseInt(e.target.value) || 1))}\n                      className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n                    />\n                  </div>\n                )}\n                <div className=\"flex flex-col space-y-2\">\n                  <button\n                    type=\"button\"\n                    onClick={handleAddItem}\n                    className=\"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  >\n                    Agregar al Carrito\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={handleConsultPrice}\n                    className=\"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600\"\n                  >\n                    Consultar Precio\n                  </button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {saleItems.length > 0 && (\n          <div className=\"mb-6\">\n            <h4 className=\"text-md font-medium text-gray-700 dark:text-gray-200 mb-2\">Productos en Carrito</h4>\n            <div className=\"bg-gray-50 p-4 rounded-md dark:bg-gray-700\">\n              <table className=\"min-w-full divide-y divide-gray-200 dark:divide-gray-600\">\n                <thead>\n                  <tr>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Producto</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Precio Unit.</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Cantidad</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Subtotal</th>\n                    <th className=\"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300\">Acción</th>\n                  </tr>\n                </thead>\n                <tbody className=\"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700\">\n                  {saleItems.map((item, index) => (\n                    <tr key={index}>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\">{item.name}</td>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\">${item.price.toFixed(2)}</td>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\">{item.quantity} {item.unit === 'gramos' ? 'gr' : ''}</td>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white\">${item.subtotal.toFixed(2)}</td>\n                      <td className=\"px-4 py-2 whitespace-nowrap text-sm font-medium\">\n                        <button\n                          type=\"button\"\n                          onClick={() => handleRemoveItem(index)}\n                          className=\"text-red-600 hover:text-red-900\"\n                        >\n                          Eliminar\n                        </button>\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n                <tfoot>\n                  <tr>\n                    <td colSpan=\"3\" className=\"px-4 py-2 text-right text-sm font-medium text-gray-700 dark:text-gray-300\">Subtotal (sin IVA):</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\">\n                      ${calculateSubtotal().toFixed(2)}\n                    </td>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td colSpan=\"3\" className=\"px-4 py-2 text-right text-sm font-medium text-gray-700 dark:text-gray-300\">IVA (21%):</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white\">\n                      ${calculateTax().toFixed(2)}\n                    </td>\n                    <td></td>\n                  </tr>\n                  <tr>\n                    <td colSpan=\"3\" className=\"px-4 py-2 text-right text-lg font-bold text-gray-800 dark:text-white\">Total:</td>\n                    <td className=\"px-4 py-2 whitespace-nowrap text-lg font-bold text-gray-900 dark:text-white\">\n                      ${calculateTotal().toFixed(2)}\n                    </td>\n                    <td></td>\n                  </tr>\n                </tfoot>\n              </table>\n            </div>\n          </div>\n        )}\n\n        <div className=\"mb-6\">\n          <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Método de Pago</label>\n          <select\n            value={paymentMethod}\n            onChange={handlePaymentMethodChange}\n            className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n          >\n            <option value=\"cash\">Efectivo</option>\n            <option value=\"debit\">Débito</option>\n            <option value=\"credit\">Crédito</option>\n            <option value=\"mp\">Mercado Pago</option>\n            <option value=\"current_account\">Cuenta Corriente</option>\n          </select>\n        </div>\n\n        {paymentMethod === 'cash' && (\n          <div className=\"mb-6\">\n            <label className=\"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1\">Efectivo Recibido</label>\n            <input\n              type=\"number\"\n              min=\"0\"\n              step=\"0.01\"\n              value={cashReceived}\n              onChange={(e) => setCashReceived(parseFloat(e.target.value) || 0)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white\"\n            />\n            <p className=\"text-lg font-bold text-right mt-2 text-gray-800 dark:text-white\">Cambio: ${calculateChange().toFixed(2)}</p>\n          </div>\n        )}\n\n        <div className=\"mt-6 flex justify-end space-x-3\">\n          <button\n            type=\"button\"\n            onClick={onCancel}\n            className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600\"\n          >\n            Cancelar\n          </button>\n          <button\n            type=\"submit\"\n            disabled={saleItems.length === 0 || (paymentMethod === 'cash' && cashReceived < calculateTotal()) || (paymentMethod === 'current_account' && !currentAccountCustomer)}\n            className={`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ${saleItems.length === 0 || (paymentMethod === 'cash' && cashReceived < calculateTotal()) || (paymentMethod === 'current_account' && !currentAccountCustomer) ? 'bg-gray-400' : 'bg-green-600 hover:bg-green-700'} focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500`}\n          >\n            Finalizar Venta\n          </button>\n        </div>\n      </form>\n\n      {showCustomerSearchModal && (\n        <CustomerSearchModal\n          customers={allCustomers}\n          onSelectCustomer={handleSelectCurrentAccountCustomer}\n          onClose={() => {\n            setShowCustomerSearchModal(false);\n            setPaymentMethod('cash');\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default SaleForm;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}