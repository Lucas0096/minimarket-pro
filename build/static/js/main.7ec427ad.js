/*! For license information please see main.7ec427ad.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,r)=>{e.exports=r(202)},153:(e,t,r)=>{var a=r(43),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var a,l={},d=null,c=null;for(a in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,a)&&!i.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:n,type:e,key:d,ref:c,props:l,_owner:o.current}}t.jsx=d,t.jsxs=d},202:(e,t)=>{var r=Symbol.for("react.element"),a=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),i=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,x={};function h(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||f}function y(){}function b(e,t,r){this.props=e,this.context=t,this.refs=x,this.updater=r||f}h.prototype.isReactComponent={},h.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},h.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=h.prototype;var v=b.prototype=new y;v.constructor=b,g(v,h.prototype),v.isPureReactComponent=!0;var k=Array.isArray,w=Object.prototype.hasOwnProperty,j={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,a){var n,l={},s=null,o=null;if(null!=t)for(n in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)w.call(t,n)&&!N.hasOwnProperty(n)&&(l[n]=t[n]);var i=arguments.length-2;if(1===i)l.children=a;else if(1<i){for(var d=Array(i),c=0;c<i;c++)d[c]=arguments[c+2];l.children=d}if(e&&e.defaultProps)for(n in i=e.defaultProps)void 0===l[n]&&(l[n]=i[n]);return{$$typeof:r,type:e,key:s,ref:o,props:l,_owner:j.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var E=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,n,l,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var i=!1;if(null===e)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case r:case a:i=!0}}if(i)return s=s(i=e),e=""===l?"."+P(i,0):l,k(s)?(n="",null!=e&&(n=e.replace(E,"$&/")+"/"),D(s,t,n,"",(function(e){return e}))):null!=s&&(C(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,n+(!s.key||i&&i.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+e)),t.push(s)),1;if(i=0,l=""===l?".":l+":",k(e))for(var d=0;d<e.length;d++){var c=l+P(o=e[d],d);i+=D(o,t,n,c,s)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),d=0;!(o=e.next()).done;)i+=D(o=o.value,t,n,c=l+P(o,d++),s);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function _(e,t,r){if(null==e)return e;var a=[],n=0;return D(e,a,"","",(function(e){return t.call(r,e,n++)})),a}function M(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var z={current:null},I={transition:null},L={ReactCurrentDispatcher:z,ReactCurrentBatchConfig:I,ReactCurrentOwner:j};function T(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:_,forEach:function(e,t,r){_(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return _(e,(function(){t++})),t},toArray:function(e){return _(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=h,t.Fragment=n,t.Profiler=s,t.PureComponent=b,t.StrictMode=l,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=T,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=g({},e.props),l=e.key,s=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,o=j.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(d in t)w.call(t,d)&&!N.hasOwnProperty(d)&&(n[d]=void 0===t[d]&&void 0!==i?i[d]:t[d])}var d=arguments.length-2;if(1===d)n.children=a;else if(1<d){i=Array(d);for(var c=0;c<d;c++)i[c]=arguments[c+2];n.children=i}return{$$typeof:r,type:e.type,key:l,ref:s,props:n,_owner:o}},t.createContext=function(e){return(e={$$typeof:i,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=T,t.useCallback=function(e,t){return z.current.useCallback(e,t)},t.useContext=function(e){return z.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return z.current.useDeferredValue(e)},t.useEffect=function(e,t){return z.current.useEffect(e,t)},t.useId=function(){return z.current.useId()},t.useImperativeHandle=function(e,t,r){return z.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return z.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return z.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return z.current.useMemo(e,t)},t.useReducer=function(e,t,r){return z.current.useReducer(e,t,r)},t.useRef=function(e){return z.current.useRef(e)},t.useState=function(e){return z.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return z.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return z.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var a=r-1>>>1,n=e[a];if(!(0<l(n,t)))break e;e[a]=t,e[r]=n,r=a}}function a(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var a=0,n=e.length,s=n>>>1;a<s;){var o=2*(a+1)-1,i=e[o],d=o+1,c=e[d];if(0>l(i,r))d<n&&0>l(c,i)?(e[a]=c,e[d]=r,a=d):(e[a]=i,e[o]=r,a=o);else{if(!(d<n&&0>l(c,r)))break e;e[a]=c,e[d]=r,a=d}}}return t}function l(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,i=o.now();t.unstable_now=function(){return o.now()-i}}var d=[],c=[],u=1,m=null,p=3,f=!1,g=!1,x=!1,h="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=a(c);null!==t;){if(null===t.callback)n(c);else{if(!(t.startTime<=e))break;n(c),t.sortIndex=t.expirationTime,r(d,t)}t=a(c)}}function k(e){if(x=!1,v(e),!g)if(null!==a(d))g=!0,I(w);else{var t=a(c);null!==t&&L(k,t.startTime-e)}}function w(e,r){g=!1,x&&(x=!1,y(C),C=-1),f=!0;var l=p;try{for(v(r),m=a(d);null!==m&&(!(m.expirationTime>r)||e&&!D());){var s=m.callback;if("function"===typeof s){m.callback=null,p=m.priorityLevel;var o=s(m.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?m.callback=o:m===a(d)&&n(d),v(r)}else n(d);m=a(d)}if(null!==m)var i=!0;else{var u=a(c);null!==u&&L(k,u.startTime-r),i=!1}return i}finally{m=null,p=l,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var j,N=!1,S=null,C=-1,E=5,P=-1;function D(){return!(t.unstable_now()-P<E)}function _(){if(null!==S){var e=t.unstable_now();P=e;var r=!0;try{r=S(!0,e)}finally{r?j():(N=!1,S=null)}}else N=!1}if("function"===typeof b)j=function(){b(_)};else if("undefined"!==typeof MessageChannel){var M=new MessageChannel,z=M.port2;M.port1.onmessage=_,j=function(){z.postMessage(null)}}else j=function(){h(_,0)};function I(e){S=e,N||(N=!0,j())}function L(e,r){C=h((function(){e(t.unstable_now())}),r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return a(d)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var r=p;p=t;try{return e()}finally{p=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=p;p=e;try{return t()}finally{p=r}},t.unstable_scheduleCallback=function(e,n,l){var s=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?s+l:s:l=s,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:n,priorityLevel:e,startTime:l,expirationTime:o=l+o,sortIndex:-1},l>s?(e.sortIndex=l,r(c,e),null===a(d)&&e===a(c)&&(x?(y(C),C=-1):x=!0,L(k,l-s))):(e.sortIndex=o,r(d,e),g||f||(g=!0,I(w))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=p;return function(){var r=p;p=t;try{return e.apply(this,arguments)}finally{p=r}}}},391:(e,t,r)=>{var a=r(950);t.H=a.createRoot,a.hydrateRoot},579:(e,t,r)=>{e.exports=r(153)},730:(e,t,r)=>{var a=r(43),n=r(853);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function i(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(o[e]=t,e=0;e<t.length;e++)s.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},f={};function g(e,t,r,a,n,l,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=s}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){x[e]=new g(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];x[t]=new g(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){x[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){x[e]=new g(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){x[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){x[e]=new g(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){x[e]=new g(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){x[e]=new g(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){x[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)}));var h=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,r,a){var n=x.hasOwnProperty(t)?x[t]:null;(null!==n?0!==n.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,r,a){if(null===t||"undefined"===typeof t||function(e,t,r,a){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,a))return!0;if(a)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,a)&&(r=null),a||null===n?function(e){return!!u.call(f,e)||!u.call(p,e)&&(m.test(e)?f[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,a=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,a?e.setAttributeNS(a,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(h,y);x[t]=new g(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(h,y);x[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(h,y);x[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){x[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)})),x.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){x[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)}));var v=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),E=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),z=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var I=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var F,R=Object.assign;function O(e){if(void 0===F)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var A=!1;function $(e,t){if(!e||A)return"";A=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var a=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){a=d}e.call(t.prototype)}else{try{throw Error()}catch(d){a=d}e()}}catch(d){if(d&&a&&"string"===typeof d.stack){for(var n=d.stack.split("\n"),l=a.stack.split("\n"),s=n.length-1,o=l.length-1;1<=s&&0<=o&&n[s]!==l[o];)o--;for(;1<=s&&0<=o;s--,o--)if(n[s]!==l[o]){if(1!==s||1!==o)do{if(s--,0>--o||n[s]!==l[o]){var i="\n"+n[s].replace(" at new "," at ");return e.displayName&&i.includes("<anonymous>")&&(i=i.replace("<anonymous>",e.displayName)),i}}while(1<=s&&0<=o);break}}}finally{A=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?O(e):""}function U(e){switch(e.tag){case 5:return O(e.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return e=$(e.type,!1);case 11:return e=$(e.type.render,!1);case 1:return e=$(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case j:return"Fragment";case w:return"Portal";case S:return"Profiler";case N:return"StrictMode";case D:return"Suspense";case _:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case z:t=e._payload,e=e._init;try{return B(e(t))}catch(r){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,l=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){a=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),a="";return e&&(a=H(e)?e.checked?"true":"false":e.value),(e=a)!==r&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var r=t.checked;return R({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function K(e,t){var r=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;r=q(null!=t.value?t.value:r),e._wrapperState={initialChecked:a,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function X(e,t){J(e,t);var r=q(t.value),a=t.type;if(null!=r)"number"===a?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,r):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ee(e,t,r){"number"===t&&G(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var te=Array.isArray;function re(e,t,r,a){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&a&&(e[r].defaultSelected=!0)}else{for(r=""+q(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(a&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return R({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ne(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(l(92));if(te(r)){if(1<r.length)throw Error(l(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:q(r)}}function le(e,t){var r=q(t.value),a=q(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=a&&(e.defaultValue=""+a)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ie(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ce,ue=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,a){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function me(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function xe(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var a=0===r.indexOf("--"),n=ge(r,t[r],a);"float"===r&&(r="cssFloat"),a?e.setProperty(r,n):e[r]=n}}Object.keys(pe).forEach((function(e){fe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var he=R({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(he[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(l(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ve=null;function ke(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,je=null,Ne=null;function Se(e){if(e=bn(e)){if("function"!==typeof we)throw Error(l(280));var t=e.stateNode;t&&(t=kn(t),we(e.stateNode,e.type,t))}}function Ce(e){je?Ne?Ne.push(e):Ne=[e]:je=e}function Ee(){if(je){var e=je,t=Ne;if(Ne=je=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Pe(e,t){return e(t)}function De(){}var _e=!1;function Me(e,t,r){if(_e)return e(t,r);_e=!0;try{return Pe(e,t,r)}finally{_e=!1,(null!==je||null!==Ne)&&(De(),Ee())}}function ze(e,t){var r=e.stateNode;if(null===r)return null;var a=kn(r);if(null===a)return null;r=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(l(231,t,typeof r));return r}var Ie=!1;if(c)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Ie=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(ce){Ie=!1}function Te(e,t,r,a,n,l,s,o,i){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(c){this.onError(c)}}var Fe=!1,Re=null,Oe=!1,Ae=null,$e={onError:function(e){Fe=!0,Re=e}};function Ue(e,t,r,a,n,l,s,o,i){Fe=!1,Re=null,Te.apply($e,arguments)}function Be(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(l(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(l(188));return t!==e?null:e}for(var r=e,a=t;;){var n=r.return;if(null===n)break;var s=n.alternate;if(null===s){if(null!==(a=n.return)){r=a;continue}break}if(n.child===s.child){for(s=n.child;s;){if(s===r)return qe(n),e;if(s===a)return qe(n),t;s=s.sibling}throw Error(l(188))}if(r.return!==a.return)r=n,a=s;else{for(var o=!1,i=n.child;i;){if(i===r){o=!0,r=n,a=s;break}if(i===a){o=!0,a=n,r=s;break}i=i.sibling}if(!o){for(i=s.child;i;){if(i===r){o=!0,r=s,a=n;break}if(i===a){o=!0,a=s,r=n;break}i=i.sibling}if(!o)throw Error(l(189))}}if(r.alternate!==a)throw Error(l(190))}if(3!==r.tag)throw Error(l(188));return r.stateNode.current===r?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Qe=n.unstable_scheduleCallback,Ge=n.unstable_cancelCallback,Ye=n.unstable_shouldYield,Ke=n.unstable_requestPaint,Je=n.unstable_now,Xe=n.unstable_getCurrentPriorityLevel,Ze=n.unstable_ImmediatePriority,et=n.unstable_UserBlockingPriority,tt=n.unstable_NormalPriority,rt=n.unstable_LowPriority,at=n.unstable_IdlePriority,nt=null,lt=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/it|0)|0},ot=Math.log,it=Math.LN2;var dt=64,ct=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var r=e.pendingLanes;if(0===r)return 0;var a=0,n=e.suspendedLanes,l=e.pingedLanes,s=268435455&r;if(0!==s){var o=s&~n;0!==o?a=ut(o):0!==(l&=s)&&(a=ut(l))}else 0!==(s=r&~n)?a=ut(s):0!==l&&(a=ut(l));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&n)&&((n=a&-a)>=(l=t&-t)||16===n&&0!==(4194240&l)))return t;if(0!==(4&a)&&(a|=16&r),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)n=1<<(r=31-st(t)),a|=e[r],t&=~n;return a}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=dt;return 0===(4194240&(dt<<=1))&&(dt=64),e}function xt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function ht(e,t,r){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=r}function yt(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var a=31-st(r),n=1<<a;n&t|e[a]&t&&(e[a]|=t),r&=~n}}var bt=0;function vt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var kt,wt,jt,Nt,St,Ct=!1,Et=[],Pt=null,Dt=null,_t=null,Mt=new Map,zt=new Map,It=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Tt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":zt.delete(t.pointerId)}}function Ft(e,t,r,a,n,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:r,eventSystemFlags:a,nativeEvent:l,targetContainers:[n]},null!==t&&(null!==(t=bn(t))&&wt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function Rt(e){var t=yn(e.target);if(null!==t){var r=Be(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Ve(r)))return e.blockedOn=t,void St(e.priority,(function(){jt(r)}))}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Ot(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=bn(r))&&wt(t),e.blockedOn=r,!1;var a=new(r=e.nativeEvent).constructor(r.type,r);ve=a,r.target.dispatchEvent(a),ve=null,t.shift()}return!0}function At(e,t,r){Ot(e)&&r.delete(t)}function $t(){Ct=!1,null!==Pt&&Ot(Pt)&&(Pt=null),null!==Dt&&Ot(Dt)&&(Dt=null),null!==_t&&Ot(_t)&&(_t=null),Mt.forEach(At),zt.forEach(At)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,$t)))}function Bt(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var r=1;r<Et.length;r++){var a=Et[r];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Pt&&Ut(Pt,e),null!==Dt&&Ut(Dt,e),null!==_t&&Ut(_t,e),Mt.forEach(t),zt.forEach(t),r=0;r<It.length;r++)(a=It[r]).blockedOn===e&&(a.blockedOn=null);for(;0<It.length&&null===(r=It[0]).blockedOn;)Rt(r),null===r.blockedOn&&It.shift()}var Vt=v.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,r,a){var n=bt,l=Vt.transition;Vt.transition=null;try{bt=1,Qt(e,t,r,a)}finally{bt=n,Vt.transition=l}}function Wt(e,t,r,a){var n=bt,l=Vt.transition;Vt.transition=null;try{bt=4,Qt(e,t,r,a)}finally{bt=n,Vt.transition=l}}function Qt(e,t,r,a){if(qt){var n=Yt(e,t,r,a);if(null===n)Va(e,t,a,Gt,r),Tt(e,a);else if(function(e,t,r,a,n){switch(t){case"focusin":return Pt=Ft(Pt,e,t,r,a,n),!0;case"dragenter":return Dt=Ft(Dt,e,t,r,a,n),!0;case"mouseover":return _t=Ft(_t,e,t,r,a,n),!0;case"pointerover":var l=n.pointerId;return Mt.set(l,Ft(Mt.get(l)||null,e,t,r,a,n)),!0;case"gotpointercapture":return l=n.pointerId,zt.set(l,Ft(zt.get(l)||null,e,t,r,a,n)),!0}return!1}(n,e,t,r,a))a.stopPropagation();else if(Tt(e,a),4&t&&-1<Lt.indexOf(e)){for(;null!==n;){var l=bn(n);if(null!==l&&kt(l),null===(l=Yt(e,t,r,a))&&Va(e,t,a,Gt,r),l===n)break;n=l}null!==n&&a.stopPropagation()}else Va(e,t,a,null,r)}}var Gt=null;function Yt(e,t,r,a){if(Gt=null,null!==(e=yn(e=ke(a))))if(null===(t=Be(e)))e=null;else if(13===(r=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Kt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case Ze:return 1;case et:return 4;case tt:case rt:return 16;case at:return 536870912;default:return 16}default:return 16}}var Jt=null,Xt=null,Zt=null;function er(){if(Zt)return Zt;var e,t,r=Xt,a=r.length,n="value"in Jt?Jt.value:Jt.textContent,l=n.length;for(e=0;e<a&&r[e]===n[e];e++);var s=a-e;for(t=1;t<=s&&r[a-t]===n[l-t];t++);return Zt=n.slice(e,1<t?1-t:void 0)}function tr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rr(){return!0}function ar(){return!1}function nr(e){function t(t,r,a,n,l){for(var s in this._reactName=t,this._targetInst=a,this.type=r,this.nativeEvent=n,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(n):n[s]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?rr:ar,this.isPropagationStopped=ar,this}return R(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),t}var lr,sr,or,ir={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dr=nr(ir),cr=R({},ir,{view:0,detail:0}),ur=nr(cr),mr=R({},cr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==or&&(or&&"mousemove"===e.type?(lr=e.screenX-or.screenX,sr=e.screenY-or.screenY):sr=lr=0,or=e),lr)},movementY:function(e){return"movementY"in e?e.movementY:sr}}),pr=nr(mr),fr=nr(R({},mr,{dataTransfer:0})),gr=nr(R({},cr,{relatedTarget:0})),xr=nr(R({},ir,{animationName:0,elapsedTime:0,pseudoElement:0})),hr=R({},ir,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yr=nr(hr),br=nr(R({},ir,{data:0})),vr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},kr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function Nr(){return jr}var Sr=R({},cr,{key:function(e){if(e.key){var t=vr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?kr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(e){return"keypress"===e.type?tr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=nr(Sr),Er=nr(R({},mr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pr=nr(R({},cr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr})),Dr=nr(R({},ir,{propertyName:0,elapsedTime:0,pseudoElement:0})),_r=R({},mr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mr=nr(_r),zr=[9,13,27,32],Ir=c&&"CompositionEvent"in window,Lr=null;c&&"documentMode"in document&&(Lr=document.documentMode);var Tr=c&&"TextEvent"in window&&!Lr,Fr=c&&(!Ir||Lr&&8<Lr&&11>=Lr),Rr=String.fromCharCode(32),Or=!1;function Ar(e,t){switch(e){case"keyup":return-1!==zr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $r(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ur=!1;var Br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Br[e.type]:"textarea"===t}function qr(e,t,r,a){Ce(a),0<(t=Ha(t,"onChange")).length&&(r=new dr("onChange","change",null,r,a),e.push({event:r,listeners:t}))}var Hr=null,Wr=null;function Qr(e){Ra(e,0)}function Gr(e){if(Q(vn(e)))return e}function Yr(e,t){if("change"===e)return t}var Kr=!1;if(c){var Jr;if(c){var Xr="oninput"in document;if(!Xr){var Zr=document.createElement("div");Zr.setAttribute("oninput","return;"),Xr="function"===typeof Zr.oninput}Jr=Xr}else Jr=!1;Kr=Jr&&(!document.documentMode||9<document.documentMode)}function ea(){Hr&&(Hr.detachEvent("onpropertychange",ta),Wr=Hr=null)}function ta(e){if("value"===e.propertyName&&Gr(Wr)){var t=[];qr(t,Wr,e,ke(e)),Me(Qr,t)}}function ra(e,t,r){"focusin"===e?(ea(),Wr=r,(Hr=t).attachEvent("onpropertychange",ta)):"focusout"===e&&ea()}function aa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Wr)}function na(e,t){if("click"===e)return Gr(t)}function la(e,t){if("input"===e||"change"===e)return Gr(t)}var sa="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function oa(e,t){if(sa(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),a=Object.keys(t);if(r.length!==a.length)return!1;for(a=0;a<r.length;a++){var n=r[a];if(!u.call(t,n)||!sa(e[n],t[n]))return!1}return!0}function ia(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function da(e,t){var r,a=ia(e);for(e=0;a;){if(3===a.nodeType){if(r=e+a.textContent.length,e<=t&&r>=t)return{node:a,offset:t-e};e=r}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ia(a)}}function ca(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ca(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ua(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(a){r=!1}if(!r)break;t=G((e=t.contentWindow).document)}return t}function ma(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pa(e){var t=ua(),r=e.focusedElem,a=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&ca(r.ownerDocument.documentElement,r)){if(null!==a&&ma(r))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if((e=(t=r.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var n=r.textContent.length,l=Math.min(a.start,n);a=void 0===a.end?l:Math.min(a.end,n),!e.extend&&l>a&&(n=a,a=l,l=n),n=da(r,l);var s=da(r,a);n&&s&&(1!==e.rangeCount||e.anchorNode!==n.node||e.anchorOffset!==n.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&((t=t.createRange()).setStart(n.node,n.offset),e.removeAllRanges(),l>a?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}for(t=[],e=r;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof r.focus&&r.focus(),r=0;r<t.length;r++)(e=t[r]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fa=c&&"documentMode"in document&&11>=document.documentMode,ga=null,xa=null,ha=null,ya=!1;function ba(e,t,r){var a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;ya||null==ga||ga!==G(a)||("selectionStart"in(a=ga)&&ma(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},ha&&oa(ha,a)||(ha=a,0<(a=Ha(xa,"onSelect")).length&&(t=new dr("onSelect","select",null,t,r),e.push({event:t,listeners:a}),t.target=ga)))}function va(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var ka={animationend:va("Animation","AnimationEnd"),animationiteration:va("Animation","AnimationIteration"),animationstart:va("Animation","AnimationStart"),transitionend:va("Transition","TransitionEnd")},wa={},ja={};function Na(e){if(wa[e])return wa[e];if(!ka[e])return e;var t,r=ka[e];for(t in r)if(r.hasOwnProperty(t)&&t in ja)return wa[e]=r[t];return e}c&&(ja=document.createElement("div").style,"AnimationEvent"in window||(delete ka.animationend.animation,delete ka.animationiteration.animation,delete ka.animationstart.animation),"TransitionEvent"in window||delete ka.transitionend.transition);var Sa=Na("animationend"),Ca=Na("animationiteration"),Ea=Na("animationstart"),Pa=Na("transitionend"),Da=new Map,_a="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ma(e,t){Da.set(e,t),i(t,[e])}for(var za=0;za<_a.length;za++){var Ia=_a[za];Ma(Ia.toLowerCase(),"on"+(Ia[0].toUpperCase()+Ia.slice(1)))}Ma(Sa,"onAnimationEnd"),Ma(Ca,"onAnimationIteration"),Ma(Ea,"onAnimationStart"),Ma("dblclick","onDoubleClick"),Ma("focusin","onFocus"),Ma("focusout","onBlur"),Ma(Pa,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var La="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ta=new Set("cancel close invalid load scroll toggle".split(" ").concat(La));function Fa(e,t,r){var a=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,a,n,s,o,i,d){if(Ue.apply(this,arguments),Fe){if(!Fe)throw Error(l(198));var c=Re;Fe=!1,Re=null,Oe||(Oe=!0,Ae=c)}}(a,t,void 0,e),e.currentTarget=null}function Ra(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var a=e[r],n=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var s=a.length-1;0<=s;s--){var o=a[s],i=o.instance,d=o.currentTarget;if(o=o.listener,i!==l&&n.isPropagationStopped())break e;Fa(n,o,d),l=i}else for(s=0;s<a.length;s++){if(i=(o=a[s]).instance,d=o.currentTarget,o=o.listener,i!==l&&n.isPropagationStopped())break e;Fa(n,o,d),l=i}}}if(Oe)throw e=Ae,Oe=!1,Ae=null,e}function Oa(e,t){var r=t[gn];void 0===r&&(r=t[gn]=new Set);var a=e+"__bubble";r.has(a)||(Ba(t,e,2,!1),r.add(a))}function Aa(e,t,r){var a=0;t&&(a|=4),Ba(r,e,a,t)}var $a="_reactListening"+Math.random().toString(36).slice(2);function Ua(e){if(!e[$a]){e[$a]=!0,s.forEach((function(t){"selectionchange"!==t&&(Ta.has(t)||Aa(t,!1,e),Aa(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[$a]||(t[$a]=!0,Aa("selectionchange",!1,t))}}function Ba(e,t,r,a){switch(Kt(t)){case 1:var n=Ht;break;case 4:n=Wt;break;default:n=Qt}r=n.bind(null,t,r,e),n=void 0,!Ie||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),a?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Va(e,t,r,a,n){var l=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var s=a.tag;if(3===s||4===s){var o=a.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===s)for(s=a.return;null!==s;){var i=s.tag;if((3===i||4===i)&&((i=s.stateNode.containerInfo)===n||8===i.nodeType&&i.parentNode===n))return;s=s.return}for(;null!==o;){if(null===(s=yn(o)))return;if(5===(i=s.tag)||6===i){a=l=s;continue e}o=o.parentNode}}a=a.return}Me((function(){var a=l,n=ke(r),s=[];e:{var o=Da.get(e);if(void 0!==o){var i=dr,d=e;switch(e){case"keypress":if(0===tr(r))break e;case"keydown":case"keyup":i=Cr;break;case"focusin":d="focus",i=gr;break;case"focusout":d="blur",i=gr;break;case"beforeblur":case"afterblur":i=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":i=pr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":i=fr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":i=Pr;break;case Sa:case Ca:case Ea:i=xr;break;case Pa:i=Dr;break;case"scroll":i=ur;break;case"wheel":i=Mr;break;case"copy":case"cut":case"paste":i=yr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":i=Er}var c=0!==(4&t),u=!c&&"scroll"===e,m=c?null!==o?o+"Capture":null:o;c=[];for(var p,f=a;null!==f;){var g=(p=f).stateNode;if(5===p.tag&&null!==g&&(p=g,null!==m&&(null!=(g=ze(f,m))&&c.push(qa(f,g,p)))),u)break;f=f.return}0<c.length&&(o=new i(o,d,null,r,n),s.push({event:o,listeners:c}))}}if(0===(7&t)){if(i="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||r===ve||!(d=r.relatedTarget||r.fromElement)||!yn(d)&&!d[fn])&&(i||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,i?(i=a,null!==(d=(d=r.relatedTarget||r.toElement)?yn(d):null)&&(d!==(u=Be(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(i=null,d=a),i!==d)){if(c=pr,g="onMouseLeave",m="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Er,g="onPointerLeave",m="onPointerEnter",f="pointer"),u=null==i?o:vn(i),p=null==d?o:vn(d),(o=new c(g,f+"leave",i,r,n)).target=u,o.relatedTarget=p,g=null,yn(n)===a&&((c=new c(m,f+"enter",d,r,n)).target=p,c.relatedTarget=u,g=c),u=g,i&&d)e:{for(m=d,f=0,p=c=i;p;p=Wa(p))f++;for(p=0,g=m;g;g=Wa(g))p++;for(;0<f-p;)c=Wa(c),f--;for(;0<p-f;)m=Wa(m),p--;for(;f--;){if(c===m||null!==m&&c===m.alternate)break e;c=Wa(c),m=Wa(m)}c=null}else c=null;null!==i&&Qa(s,o,i,c,!1),null!==d&&null!==u&&Qa(s,u,d,c,!0)}if("select"===(i=(o=a?vn(a):window).nodeName&&o.nodeName.toLowerCase())||"input"===i&&"file"===o.type)var x=Yr;else if(Vr(o))if(Kr)x=la;else{x=aa;var h=ra}else(i=o.nodeName)&&"input"===i.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(x=na);switch(x&&(x=x(e,a))?qr(s,x,r,n):(h&&h(e,o,a),"focusout"===e&&(h=o._wrapperState)&&h.controlled&&"number"===o.type&&ee(o,"number",o.value)),h=a?vn(a):window,e){case"focusin":(Vr(h)||"true"===h.contentEditable)&&(ga=h,xa=a,ha=null);break;case"focusout":ha=xa=ga=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,ba(s,r,n);break;case"selectionchange":if(fa)break;case"keydown":case"keyup":ba(s,r,n)}var y;if(Ir)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Ur?Ar(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Fr&&"ko"!==r.locale&&(Ur||"onCompositionStart"!==b?"onCompositionEnd"===b&&Ur&&(y=er()):(Xt="value"in(Jt=n)?Jt.value:Jt.textContent,Ur=!0)),0<(h=Ha(a,b)).length&&(b=new br(b,e,null,r,n),s.push({event:b,listeners:h}),y?b.data=y:null!==(y=$r(r))&&(b.data=y))),(y=Tr?function(e,t){switch(e){case"compositionend":return $r(t);case"keypress":return 32!==t.which?null:(Or=!0,Rr);case"textInput":return(e=t.data)===Rr&&Or?null:e;default:return null}}(e,r):function(e,t){if(Ur)return"compositionend"===e||!Ir&&Ar(e,t)?(e=er(),Zt=Xt=Jt=null,Ur=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(a=Ha(a,"onBeforeInput")).length&&(n=new br("onBeforeInput","beforeinput",null,r,n),s.push({event:n,listeners:a}),n.data=y))}Ra(s,t)}))}function qa(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ha(e,t){for(var r=t+"Capture",a=[];null!==e;){var n=e,l=n.stateNode;5===n.tag&&null!==l&&(n=l,null!=(l=ze(e,r))&&a.unshift(qa(e,l,n)),null!=(l=ze(e,t))&&a.push(qa(e,l,n))),e=e.return}return a}function Wa(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qa(e,t,r,a,n){for(var l=t._reactName,s=[];null!==r&&r!==a;){var o=r,i=o.alternate,d=o.stateNode;if(null!==i&&i===a)break;5===o.tag&&null!==d&&(o=d,n?null!=(i=ze(r,l))&&s.unshift(qa(r,i,o)):n||null!=(i=ze(r,l))&&s.push(qa(r,i,o))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}var Ga=/\r\n?/g,Ya=/\u0000|\uFFFD/g;function Ka(e){return("string"===typeof e?e:""+e).replace(Ga,"\n").replace(Ya,"")}function Ja(e,t,r){if(t=Ka(t),Ka(e)!==t&&r)throw Error(l(425))}function Xa(){}var Za=null,en=null;function tn(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rn="function"===typeof setTimeout?setTimeout:void 0,an="function"===typeof clearTimeout?clearTimeout:void 0,nn="function"===typeof Promise?Promise:void 0,ln="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof nn?function(e){return nn.resolve(null).then(e).catch(sn)}:rn;function sn(e){setTimeout((function(){throw e}))}function on(e,t){var r=t,a=0;do{var n=r.nextSibling;if(e.removeChild(r),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===a)return e.removeChild(n),void Bt(t);a--}else"$"!==r&&"$?"!==r&&"$!"!==r||a++;r=n}while(r);Bt(t)}function dn(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function cn(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var un=Math.random().toString(36).slice(2),mn="__reactFiber$"+un,pn="__reactProps$"+un,fn="__reactContainer$"+un,gn="__reactEvents$"+un,xn="__reactListeners$"+un,hn="__reactHandles$"+un;function yn(e){var t=e[mn];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fn]||r[mn]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=cn(e);null!==e;){if(r=e[mn])return r;e=cn(e)}return t}r=(e=r).parentNode}return null}function bn(e){return!(e=e[mn]||e[fn])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function vn(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function kn(e){return e[pn]||null}var wn=[],jn=-1;function Nn(e){return{current:e}}function Sn(e){0>jn||(e.current=wn[jn],wn[jn]=null,jn--)}function Cn(e,t){jn++,wn[jn]=e.current,e.current=t}var En={},Pn=Nn(En),Dn=Nn(!1),_n=En;function Mn(e,t){var r=e.type.contextTypes;if(!r)return En;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var n,l={};for(n in r)l[n]=t[n];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function zn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function In(){Sn(Dn),Sn(Pn)}function Ln(e,t,r){if(Pn.current!==En)throw Error(l(168));Cn(Pn,t),Cn(Dn,r)}function Tn(e,t,r){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return r;for(var n in a=a.getChildContext())if(!(n in t))throw Error(l(108,V(e)||"Unknown",n));return R({},r,a)}function Fn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||En,_n=Pn.current,Cn(Pn,e),Cn(Dn,Dn.current),!0}function Rn(e,t,r){var a=e.stateNode;if(!a)throw Error(l(169));r?(e=Tn(e,t,_n),a.__reactInternalMemoizedMergedChildContext=e,Sn(Dn),Sn(Pn),Cn(Pn,e)):Sn(Dn),Cn(Dn,r)}var On=null,An=!1,$n=!1;function Un(e){null===On?On=[e]:On.push(e)}function Bn(){if(!$n&&null!==On){$n=!0;var e=0,t=bt;try{var r=On;for(bt=1;e<r.length;e++){var a=r[e];do{a=a(!0)}while(null!==a)}On=null,An=!1}catch(n){throw null!==On&&(On=On.slice(e+1)),Qe(Ze,Bn),n}finally{bt=t,$n=!1}}return null}var Vn=[],qn=0,Hn=null,Wn=0,Qn=[],Gn=0,Yn=null,Kn=1,Jn="";function Xn(e,t){Vn[qn++]=Wn,Vn[qn++]=Hn,Hn=e,Wn=t}function Zn(e,t,r){Qn[Gn++]=Kn,Qn[Gn++]=Jn,Qn[Gn++]=Yn,Yn=e;var a=Kn;e=Jn;var n=32-st(a)-1;a&=~(1<<n),r+=1;var l=32-st(t)+n;if(30<l){var s=n-n%5;l=(a&(1<<s)-1).toString(32),a>>=s,n-=s,Kn=1<<32-st(t)+n|r<<n|a,Jn=l+e}else Kn=1<<l|r<<n|a,Jn=e}function el(e){null!==e.return&&(Xn(e,1),Zn(e,1,0))}function tl(e){for(;e===Hn;)Hn=Vn[--qn],Vn[qn]=null,Wn=Vn[--qn],Vn[qn]=null;for(;e===Yn;)Yn=Qn[--Gn],Qn[Gn]=null,Jn=Qn[--Gn],Qn[Gn]=null,Kn=Qn[--Gn],Qn[Gn]=null}var rl=null,al=null,nl=!1,ll=null;function sl(e,t){var r=Md(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,null===(t=e.deletions)?(e.deletions=[r],e.flags|=16):t.push(r)}function ol(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,rl=e,al=dn(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,rl=e,al=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(r=null!==Yn?{id:Kn,overflow:Jn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},(r=Md(18,null,null,0)).stateNode=t,r.return=e,e.child=r,rl=e,al=null,!0);default:return!1}}function il(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function dl(e){if(nl){var t=al;if(t){var r=t;if(!ol(e,t)){if(il(e))throw Error(l(418));t=dn(r.nextSibling);var a=rl;t&&ol(e,t)?sl(a,r):(e.flags=-4097&e.flags|2,nl=!1,rl=e)}}else{if(il(e))throw Error(l(418));e.flags=-4097&e.flags|2,nl=!1,rl=e}}}function cl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;rl=e}function ul(e){if(e!==rl)return!1;if(!nl)return cl(e),nl=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!tn(e.type,e.memoizedProps)),t&&(t=al)){if(il(e))throw ml(),Error(l(418));for(;t;)sl(e,t),t=dn(t.nextSibling)}if(cl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){al=dn(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}al=null}}else al=rl?dn(e.stateNode.nextSibling):null;return!0}function ml(){for(var e=al;e;)e=dn(e.nextSibling)}function pl(){al=rl=null,nl=!1}function fl(e){null===ll?ll=[e]:ll.push(e)}var gl=v.ReactCurrentBatchConfig;function xl(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(l(309));var a=r.stateNode}if(!a)throw Error(l(147,e));var n=a,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=n.refs;null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(l(284));if(!r._owner)throw Error(l(290,e))}return e}function hl(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function yl(e){return(0,e._init)(e._payload)}function bl(e){function t(t,r){if(e){var a=t.deletions;null===a?(t.deletions=[r],t.flags|=16):a.push(r)}}function r(r,a){if(!e)return null;for(;null!==a;)t(r,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Id(e,t)).index=0,e.sibling=null,e}function s(t,r,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<r?(t.flags|=2,r):a:(t.flags|=2,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function i(e,t,r,a){return null===t||6!==t.tag?((t=Rd(r,e.mode,a)).return=e,t):((t=n(t,r)).return=e,t)}function d(e,t,r,a){var l=r.type;return l===j?u(e,t,r.props.children,a,r.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===z&&yl(l)===t.type)?((a=n(t,r.props)).ref=xl(e,t,r),a.return=e,a):((a=Ld(r.type,r.key,r.props,null,e.mode,a)).ref=xl(e,t,r),a.return=e,a)}function c(e,t,r,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Od(r,e.mode,a)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function u(e,t,r,a,l){return null===t||7!==t.tag?((t=Td(r,e.mode,a,l)).return=e,t):((t=n(t,r)).return=e,t)}function m(e,t,r){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Rd(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case k:return(r=Ld(t.type,t.key,t.props,null,e.mode,r)).ref=xl(e,null,t),r.return=e,r;case w:return(t=Od(t,e.mode,r)).return=e,t;case z:return m(e,(0,t._init)(t._payload),r)}if(te(t)||T(t))return(t=Td(t,e.mode,r,null)).return=e,t;hl(e,t)}return null}function p(e,t,r,a){var n=null!==t?t.key:null;if("string"===typeof r&&""!==r||"number"===typeof r)return null!==n?null:i(e,t,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case k:return r.key===n?d(e,t,r,a):null;case w:return r.key===n?c(e,t,r,a):null;case z:return p(e,t,(n=r._init)(r._payload),a)}if(te(r)||T(r))return null!==n?null:u(e,t,r,a,null);hl(e,r)}return null}function f(e,t,r,a,n){if("string"===typeof a&&""!==a||"number"===typeof a)return i(t,e=e.get(r)||null,""+a,n);if("object"===typeof a&&null!==a){switch(a.$$typeof){case k:return d(t,e=e.get(null===a.key?r:a.key)||null,a,n);case w:return c(t,e=e.get(null===a.key?r:a.key)||null,a,n);case z:return f(e,t,r,(0,a._init)(a._payload),n)}if(te(a)||T(a))return u(t,e=e.get(r)||null,a,n,null);hl(t,a)}return null}function g(n,l,o,i){for(var d=null,c=null,u=l,g=l=0,x=null;null!==u&&g<o.length;g++){u.index>g?(x=u,u=null):x=u.sibling;var h=p(n,u,o[g],i);if(null===h){null===u&&(u=x);break}e&&u&&null===h.alternate&&t(n,u),l=s(h,l,g),null===c?d=h:c.sibling=h,c=h,u=x}if(g===o.length)return r(n,u),nl&&Xn(n,g),d;if(null===u){for(;g<o.length;g++)null!==(u=m(n,o[g],i))&&(l=s(u,l,g),null===c?d=u:c.sibling=u,c=u);return nl&&Xn(n,g),d}for(u=a(n,u);g<o.length;g++)null!==(x=f(u,n,g,o[g],i))&&(e&&null!==x.alternate&&u.delete(null===x.key?g:x.key),l=s(x,l,g),null===c?d=x:c.sibling=x,c=x);return e&&u.forEach((function(e){return t(n,e)})),nl&&Xn(n,g),d}function x(n,o,i,d){var c=T(i);if("function"!==typeof c)throw Error(l(150));if(null==(i=c.call(i)))throw Error(l(151));for(var u=c=null,g=o,x=o=0,h=null,y=i.next();null!==g&&!y.done;x++,y=i.next()){g.index>x?(h=g,g=null):h=g.sibling;var b=p(n,g,y.value,d);if(null===b){null===g&&(g=h);break}e&&g&&null===b.alternate&&t(n,g),o=s(b,o,x),null===u?c=b:u.sibling=b,u=b,g=h}if(y.done)return r(n,g),nl&&Xn(n,x),c;if(null===g){for(;!y.done;x++,y=i.next())null!==(y=m(n,y.value,d))&&(o=s(y,o,x),null===u?c=y:u.sibling=y,u=y);return nl&&Xn(n,x),c}for(g=a(n,g);!y.done;x++,y=i.next())null!==(y=f(g,n,x,y.value,d))&&(e&&null!==y.alternate&&g.delete(null===y.key?x:y.key),o=s(y,o,x),null===u?c=y:u.sibling=y,u=y);return e&&g.forEach((function(e){return t(n,e)})),nl&&Xn(n,x),c}return function e(a,l,s,i){if("object"===typeof s&&null!==s&&s.type===j&&null===s.key&&(s=s.props.children),"object"===typeof s&&null!==s){switch(s.$$typeof){case k:e:{for(var d=s.key,c=l;null!==c;){if(c.key===d){if((d=s.type)===j){if(7===c.tag){r(a,c.sibling),(l=n(c,s.props.children)).return=a,a=l;break e}}else if(c.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===z&&yl(d)===c.type){r(a,c.sibling),(l=n(c,s.props)).ref=xl(a,c,s),l.return=a,a=l;break e}r(a,c);break}t(a,c),c=c.sibling}s.type===j?((l=Td(s.props.children,a.mode,i,s.key)).return=a,a=l):((i=Ld(s.type,s.key,s.props,null,a.mode,i)).ref=xl(a,l,s),i.return=a,a=i)}return o(a);case w:e:{for(c=s.key;null!==l;){if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===s.containerInfo&&l.stateNode.implementation===s.implementation){r(a,l.sibling),(l=n(l,s.children||[])).return=a,a=l;break e}r(a,l);break}t(a,l),l=l.sibling}(l=Od(s,a.mode,i)).return=a,a=l}return o(a);case z:return e(a,l,(c=s._init)(s._payload),i)}if(te(s))return g(a,l,s,i);if(T(s))return x(a,l,s,i);hl(a,s)}return"string"===typeof s&&""!==s||"number"===typeof s?(s=""+s,null!==l&&6===l.tag?(r(a,l.sibling),(l=n(l,s)).return=a,a=l):(r(a,l),(l=Rd(s,a.mode,i)).return=a,a=l),o(a)):r(a,l)}}var vl=bl(!0),kl=bl(!1),wl=Nn(null),jl=null,Nl=null,Sl=null;function Cl(){Sl=Nl=jl=null}function El(e){var t=wl.current;Sn(wl),e._currentValue=t}function Pl(e,t,r){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===r)break;e=e.return}}function Dl(e,t){jl=e,Sl=Nl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function _l(e){var t=e._currentValue;if(Sl!==e)if(e={context:e,memoizedValue:t,next:null},null===Nl){if(null===jl)throw Error(l(308));Nl=e,jl.dependencies={lanes:0,firstContext:e}}else Nl=Nl.next=e;return t}var Ml=null;function zl(e){null===Ml?Ml=[e]:Ml.push(e)}function Il(e,t,r,a){var n=t.interleaved;return null===n?(r.next=r,zl(t)):(r.next=n.next,n.next=r),t.interleaved=r,Ll(e,a)}function Ll(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}var Tl=!1;function Fl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ol(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Al(e,t,r){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Pi)){var n=a.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),a.pending=t,Ll(e,r)}return null===(n=a.interleaved)?(t.next=t,zl(a)):(t.next=n.next,n.next=t),a.interleaved=t,Ll(e,r)}function $l(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&r))){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,yt(e,r)}}function Ul(e,t){var r=e.updateQueue,a=e.alternate;if(null!==a&&r===(a=a.updateQueue)){var n=null,l=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===l?n=l=s:l=l.next=s,r=r.next}while(null!==r);null===l?n=l=t:l=l.next=t}else n=l=t;return r={baseState:a.baseState,firstBaseUpdate:n,lastBaseUpdate:l,shared:a.shared,effects:a.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Bl(e,t,r,a){var n=e.updateQueue;Tl=!1;var l=n.firstBaseUpdate,s=n.lastBaseUpdate,o=n.shared.pending;if(null!==o){n.shared.pending=null;var i=o,d=i.next;i.next=null,null===s?l=d:s.next=d,s=i;var c=e.alternate;null!==c&&((o=(c=c.updateQueue).lastBaseUpdate)!==s&&(null===o?c.firstBaseUpdate=d:o.next=d,c.lastBaseUpdate=i))}if(null!==l){var u=n.baseState;for(s=0,c=d=i=null,o=l;;){var m=o.lane,p=o.eventTime;if((a&m)===m){null!==c&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(m=t,p=r,g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(p,u,m);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(m="function"===typeof(f=g.payload)?f.call(p,u,m):f)||void 0===m)break e;u=R({},u,m);break e;case 2:Tl=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(m=n.effects)?n.effects=[o]:m.push(o))}else p={eventTime:p,lane:m,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===c?(d=c=p,i=u):c=c.next=p,s|=m;if(null===(o=o.next)){if(null===(o=n.shared.pending))break;o=(m=o).next,m.next=null,n.lastBaseUpdate=m,n.shared.pending=null}}if(null===c&&(i=u),n.baseState=i,n.firstBaseUpdate=d,n.lastBaseUpdate=c,null!==(t=n.shared.interleaved)){n=t;do{s|=n.lane,n=n.next}while(n!==t)}else null===l&&(n.shared.lanes=0);Fi|=s,e.lanes=s,e.memoizedState=u}}function Vl(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],n=a.callback;if(null!==n){if(a.callback=null,a=r,"function"!==typeof n)throw Error(l(191,n));n.call(a)}}}var ql={},Hl=Nn(ql),Wl=Nn(ql),Ql=Nn(ql);function Gl(e){if(e===ql)throw Error(l(174));return e}function Yl(e,t){switch(Cn(Ql,t),Cn(Wl,e),Cn(Hl,ql),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ie(null,"");break;default:t=ie(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Sn(Hl),Cn(Hl,t)}function Kl(){Sn(Hl),Sn(Wl),Sn(Ql)}function Jl(e){Gl(Ql.current);var t=Gl(Hl.current),r=ie(t,e.type);t!==r&&(Cn(Wl,e),Cn(Hl,r))}function Xl(e){Wl.current===e&&(Sn(Hl),Sn(Wl))}var Zl=Nn(0);function es(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ts=[];function rs(){for(var e=0;e<ts.length;e++)ts[e]._workInProgressVersionPrimary=null;ts.length=0}var as=v.ReactCurrentDispatcher,ns=v.ReactCurrentBatchConfig,ls=0,ss=null,os=null,is=null,ds=!1,cs=!1,us=0,ms=0;function ps(){throw Error(l(321))}function fs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sa(e[r],t[r]))return!1;return!0}function gs(e,t,r,a,n,s){if(ls=s,ss=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,as.current=null===e||null===e.memoizedState?Xs:Zs,e=r(a,n),cs){s=0;do{if(cs=!1,us=0,25<=s)throw Error(l(301));s+=1,is=os=null,t.updateQueue=null,as.current=eo,e=r(a,n)}while(cs)}if(as.current=Js,t=null!==os&&null!==os.next,ls=0,is=os=ss=null,ds=!1,t)throw Error(l(300));return e}function xs(){var e=0!==us;return us=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===is?ss.memoizedState=is=e:is=is.next=e,is}function ys(){if(null===os){var e=ss.alternate;e=null!==e?e.memoizedState:null}else e=os.next;var t=null===is?ss.memoizedState:is.next;if(null!==t)is=t,os=e;else{if(null===e)throw Error(l(310));e={memoizedState:(os=e).memoizedState,baseState:os.baseState,baseQueue:os.baseQueue,queue:os.queue,next:null},null===is?ss.memoizedState=is=e:is=is.next=e}return is}function bs(e,t){return"function"===typeof t?t(e):t}function vs(e){var t=ys(),r=t.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=e;var a=os,n=a.baseQueue,s=r.pending;if(null!==s){if(null!==n){var o=n.next;n.next=s.next,s.next=o}a.baseQueue=n=s,r.pending=null}if(null!==n){s=n.next,a=a.baseState;var i=o=null,d=null,c=s;do{var u=c.lane;if((ls&u)===u)null!==d&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var m={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===d?(i=d=m,o=a):d=d.next=m,ss.lanes|=u,Fi|=u}c=c.next}while(null!==c&&c!==s);null===d?o=a:d.next=i,sa(a,t.memoizedState)||(bo=!0),t.memoizedState=a,t.baseState=o,t.baseQueue=d,r.lastRenderedState=a}if(null!==(e=r.interleaved)){n=e;do{s=n.lane,ss.lanes|=s,Fi|=s,n=n.next}while(n!==e)}else null===n&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ks(e){var t=ys(),r=t.queue;if(null===r)throw Error(l(311));r.lastRenderedReducer=e;var a=r.dispatch,n=r.pending,s=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{s=e(s,o.action),o=o.next}while(o!==n);sa(s,t.memoizedState)||(bo=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),r.lastRenderedState=s}return[s,a]}function ws(){}function js(e,t){var r=ss,a=ys(),n=t(),s=!sa(a.memoizedState,n);if(s&&(a.memoizedState=n,bo=!0),a=a.queue,Ts(Cs.bind(null,r,a,e),[e]),a.getSnapshot!==t||s||null!==is&&1&is.memoizedState.tag){if(r.flags|=2048,_s(9,Ss.bind(null,r,a,n,t),void 0,null),null===Di)throw Error(l(349));0!==(30&ls)||Ns(r,t,n)}return n}function Ns(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function Ss(e,t,r,a){t.value=r,t.getSnapshot=a,Es(t)&&Ps(e)}function Cs(e,t,r){return r((function(){Es(t)&&Ps(e)}))}function Es(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sa(e,r)}catch(a){return!0}}function Ps(e){var t=Ll(e,1);null!==t&&rd(t,e,1,-1)}function Ds(e){var t=hs();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bs,lastRenderedState:e},t.queue=e,e=e.dispatch=Qs.bind(null,ss,e),[t.memoizedState,e]}function _s(e,t,r,a){return e={tag:e,create:t,destroy:r,deps:a,next:null},null===(t=ss.updateQueue)?(t={lastEffect:null,stores:null},ss.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(a=r.next,r.next=e,e.next=a,t.lastEffect=e),e}function Ms(){return ys().memoizedState}function zs(e,t,r,a){var n=hs();ss.flags|=e,n.memoizedState=_s(1|t,r,void 0,void 0===a?null:a)}function Is(e,t,r,a){var n=ys();a=void 0===a?null:a;var l=void 0;if(null!==os){var s=os.memoizedState;if(l=s.destroy,null!==a&&fs(a,s.deps))return void(n.memoizedState=_s(t,r,l,a))}ss.flags|=e,n.memoizedState=_s(1|t,r,l,a)}function Ls(e,t){return zs(8390656,8,e,t)}function Ts(e,t){return Is(2048,8,e,t)}function Fs(e,t){return Is(4,2,e,t)}function Rs(e,t){return Is(4,4,e,t)}function Os(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function As(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,Is(4,4,Os.bind(null,t,e),r)}function $s(){}function Us(e,t){var r=ys();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&fs(t,a[1])?a[0]:(r.memoizedState=[e,t],e)}function Bs(e,t){var r=ys();t=void 0===t?null:t;var a=r.memoizedState;return null!==a&&null!==t&&fs(t,a[1])?a[0]:(e=e(),r.memoizedState=[e,t],e)}function Vs(e,t,r){return 0===(21&ls)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=r):(sa(r,t)||(r=gt(),ss.lanes|=r,Fi|=r,e.baseState=!0),t)}function qs(e,t){var r=bt;bt=0!==r&&4>r?r:4,e(!0);var a=ns.transition;ns.transition={};try{e(!1),t()}finally{bt=r,ns.transition=a}}function Hs(){return ys().memoizedState}function Ws(e,t,r){var a=td(e);if(r={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null},Gs(e))Ys(t,r);else if(null!==(r=Il(e,t,r,a))){rd(r,e,a,ed()),Ks(r,t,a)}}function Qs(e,t,r){var a=td(e),n={lane:a,action:r,hasEagerState:!1,eagerState:null,next:null};if(Gs(e))Ys(t,n);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var s=t.lastRenderedState,o=l(s,r);if(n.hasEagerState=!0,n.eagerState=o,sa(o,s)){var i=t.interleaved;return null===i?(n.next=n,zl(t)):(n.next=i.next,i.next=n),void(t.interleaved=n)}}catch(d){}null!==(r=Il(e,t,n,a))&&(rd(r,e,a,n=ed()),Ks(r,t,a))}}function Gs(e){var t=e.alternate;return e===ss||null!==t&&t===ss}function Ys(e,t){cs=ds=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ks(e,t,r){if(0!==(4194240&r)){var a=t.lanes;r|=a&=e.pendingLanes,t.lanes=r,yt(e,r)}}var Js={readContext:_l,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},Xs={readContext:_l,useCallback:function(e,t){return hs().memoizedState=[e,void 0===t?null:t],e},useContext:_l,useEffect:Ls,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,zs(4194308,4,Os.bind(null,t,e),r)},useLayoutEffect:function(e,t){return zs(4194308,4,e,t)},useInsertionEffect:function(e,t){return zs(4,2,e,t)},useMemo:function(e,t){var r=hs();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var a=hs();return t=void 0!==r?r(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=Ws.bind(null,ss,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},hs().memoizedState=e},useState:Ds,useDebugValue:$s,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=Ds(!1),t=e[0];return e=qs.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var a=ss,n=hs();if(nl){if(void 0===r)throw Error(l(407));r=r()}else{if(r=t(),null===Di)throw Error(l(349));0!==(30&ls)||Ns(a,t,r)}n.memoizedState=r;var s={value:r,getSnapshot:t};return n.queue=s,Ls(Cs.bind(null,a,s,e),[e]),a.flags|=2048,_s(9,Ss.bind(null,a,s,r,t),void 0,null),r},useId:function(){var e=hs(),t=Di.identifierPrefix;if(nl){var r=Jn;t=":"+t+"R"+(r=(Kn&~(1<<32-st(Kn)-1)).toString(32)+r),0<(r=us++)&&(t+="H"+r.toString(32)),t+=":"}else t=":"+t+"r"+(r=ms++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Zs={readContext:_l,useCallback:Us,useContext:_l,useEffect:Ts,useImperativeHandle:As,useInsertionEffect:Fs,useLayoutEffect:Rs,useMemo:Bs,useReducer:vs,useRef:Ms,useState:function(){return vs(bs)},useDebugValue:$s,useDeferredValue:function(e){return Vs(ys(),os.memoizedState,e)},useTransition:function(){return[vs(bs)[0],ys().memoizedState]},useMutableSource:ws,useSyncExternalStore:js,useId:Hs,unstable_isNewReconciler:!1},eo={readContext:_l,useCallback:Us,useContext:_l,useEffect:Ts,useImperativeHandle:As,useInsertionEffect:Fs,useLayoutEffect:Rs,useMemo:Bs,useReducer:ks,useRef:Ms,useState:function(){return ks(bs)},useDebugValue:$s,useDeferredValue:function(e){var t=ys();return null===os?t.memoizedState=e:Vs(t,os.memoizedState,e)},useTransition:function(){return[ks(bs)[0],ys().memoizedState]},useMutableSource:ws,useSyncExternalStore:js,useId:Hs,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var r in t=R({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}function ro(e,t,r,a){r=null===(r=r(a,t=e.memoizedState))||void 0===r?t:R({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var ao={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var a=ed(),n=td(e),l=Ol(a,n);l.payload=t,void 0!==r&&null!==r&&(l.callback=r),null!==(t=Al(e,l,n))&&(rd(t,e,n,a),$l(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var a=ed(),n=td(e),l=Ol(a,n);l.tag=1,l.payload=t,void 0!==r&&null!==r&&(l.callback=r),null!==(t=Al(e,l,n))&&(rd(t,e,n,a),$l(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ed(),a=td(e),n=Ol(r,a);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),null!==(t=Al(e,n,a))&&(rd(t,e,a,r),$l(t,e,a))}};function no(e,t,r,a,n,l,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,l,s):!t.prototype||!t.prototype.isPureReactComponent||(!oa(r,a)||!oa(n,l))}function lo(e,t,r){var a=!1,n=En,l=t.contextType;return"object"===typeof l&&null!==l?l=_l(l):(n=zn(t)?_n:Pn.current,l=(a=null!==(a=t.contextTypes)&&void 0!==a)?Mn(e,n):En),t=new t(r,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ao,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=l),t}function so(e,t,r,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,a),t.state!==e&&ao.enqueueReplaceState(t,t.state,null)}function oo(e,t,r,a){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs={},Fl(e);var l=t.contextType;"object"===typeof l&&null!==l?n.context=_l(l):(l=zn(t)?_n:Pn.current,n.context=Mn(e,l)),n.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(ro(e,t,l,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&ao.enqueueReplaceState(n,n.state,null),Bl(e,r,n,a),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4194308)}function io(e,t){try{var r="",a=t;do{r+=U(a),a=a.return}while(a);var n=r}catch(l){n="\nError generating stack: "+l.message+"\n"+l.stack}return{value:e,source:t,stack:n,digest:null}}function co(e,t,r){return{value:e,source:null,stack:null!=r?r:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}var mo="function"===typeof WeakMap?WeakMap:Map;function po(e,t,r){(r=Ol(-1,r)).tag=3,r.payload={element:null};var a=t.value;return r.callback=function(){qi||(qi=!0,Hi=a),uo(0,t)},r}function fo(e,t,r){(r=Ol(-1,r)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var n=t.value;r.payload=function(){return a(n)},r.callback=function(){uo(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(r.callback=function(){uo(0,t),"function"!==typeof a&&(null===Wi?Wi=new Set([this]):Wi.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}function go(e,t,r){var a=e.pingCache;if(null===a){a=e.pingCache=new mo;var n=new Set;a.set(t,n)}else void 0===(n=a.get(t))&&(n=new Set,a.set(t,n));n.has(r)||(n.add(r),e=Sd.bind(null,e,t,r),t.then(e,e))}function xo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ho(e,t,r,a,n){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,1===r.tag&&(null===r.alternate?r.tag=17:((t=Ol(-1,1)).tag=2,Al(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=n,e)}var yo=v.ReactCurrentOwner,bo=!1;function vo(e,t,r,a){t.child=null===e?kl(t,null,r,a):vl(t,e.child,r,a)}function ko(e,t,r,a,n){r=r.render;var l=t.ref;return Dl(t,n),a=gs(e,t,r,a,l,n),r=xs(),null===e||bo?(nl&&r&&el(t),t.flags|=1,vo(e,t,a,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,qo(e,t,n))}function wo(e,t,r,a,n){if(null===e){var l=r.type;return"function"!==typeof l||zd(l)||void 0!==l.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Ld(r.type,null,a,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,jo(e,t,l,a,n))}if(l=e.child,0===(e.lanes&n)){var s=l.memoizedProps;if((r=null!==(r=r.compare)?r:oa)(s,a)&&e.ref===t.ref)return qo(e,t,n)}return t.flags|=1,(e=Id(l,a)).ref=t.ref,e.return=t,t.child=e}function jo(e,t,r,a,n){if(null!==e){var l=e.memoizedProps;if(oa(l,a)&&e.ref===t.ref){if(bo=!1,t.pendingProps=a=l,0===(e.lanes&n))return t.lanes=e.lanes,qo(e,t,n);0!==(131072&e.flags)&&(bo=!0)}}return Co(e,t,r,a,n)}function No(e,t,r){var a=t.pendingProps,n=a.children,l=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cn(Ii,zi),zi|=r;else{if(0===(1073741824&r))return e=null!==l?l.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cn(Ii,zi),zi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==l?l.baseLanes:r,Cn(Ii,zi),zi|=a}else null!==l?(a=l.baseLanes|r,t.memoizedState=null):a=r,Cn(Ii,zi),zi|=a;return vo(e,t,n,r),t.child}function So(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,r,a,n){var l=zn(r)?_n:Pn.current;return l=Mn(t,l),Dl(t,n),r=gs(e,t,r,a,l,n),a=xs(),null===e||bo?(nl&&a&&el(t),t.flags|=1,vo(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n,qo(e,t,n))}function Eo(e,t,r,a,n){if(zn(r)){var l=!0;Fn(t)}else l=!1;if(Dl(t,n),null===t.stateNode)Vo(e,t),lo(t,r,a),oo(t,r,a,n),a=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var i=s.context,d=r.contextType;"object"===typeof d&&null!==d?d=_l(d):d=Mn(t,d=zn(r)?_n:Pn.current);var c=r.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof s.getSnapshotBeforeUpdate;u||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==a||i!==d)&&so(t,s,a,d),Tl=!1;var m=t.memoizedState;s.state=m,Bl(t,a,s,n),i=t.memoizedState,o!==a||m!==i||Dn.current||Tl?("function"===typeof c&&(ro(t,r,c,a),i=t.memoizedState),(o=Tl||no(t,r,o,a,m,i,d))?(u||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4194308)):("function"===typeof s.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=i),s.props=a,s.state=i,s.context=d,a=o):("function"===typeof s.componentDidMount&&(t.flags|=4194308),a=!1)}else{s=t.stateNode,Rl(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:to(t.type,o),s.props=d,u=t.pendingProps,m=s.context,"object"===typeof(i=r.contextType)&&null!==i?i=_l(i):i=Mn(t,i=zn(r)?_n:Pn.current);var p=r.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==u||m!==i)&&so(t,s,a,i),Tl=!1,m=t.memoizedState,s.state=m,Bl(t,a,s,n);var f=t.memoizedState;o!==u||m!==f||Dn.current||Tl?("function"===typeof p&&(ro(t,r,p,a),f=t.memoizedState),(d=Tl||no(t,r,d,a,m,f,i)||!1)?(c||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(a,f,i),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(a,f,i)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=f),s.props=a,s.state=f,s.context=i,a=d):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Po(e,t,r,a,l,n)}function Po(e,t,r,a,n,l){So(e,t);var s=0!==(128&t.flags);if(!a&&!s)return n&&Rn(t,r,!1),qo(e,t,l);a=t.stateNode,yo.current=t;var o=s&&"function"!==typeof r.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&s?(t.child=vl(t,e.child,null,l),t.child=vl(t,null,o,l)):vo(e,t,o,l),t.memoizedState=a.state,n&&Rn(t,r,!0),t.child}function Do(e){var t=e.stateNode;t.pendingContext?Ln(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ln(0,t.context,!1),Yl(e,t.containerInfo)}function _o(e,t,r,a,n){return pl(),fl(n),t.flags|=256,vo(e,t,r,a),t.child}var Mo,zo,Io,Lo,To={dehydrated:null,treeContext:null,retryLane:0};function Fo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ro(e,t,r){var a,n=t.pendingProps,s=Zl.current,o=!1,i=0!==(128&t.flags);if((a=i)||(a=(null===e||null!==e.memoizedState)&&0!==(2&s)),a?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),Cn(Zl,1&s),null===e)return dl(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(i=n.children,e=n.fallback,o?(n=t.mode,o=t.child,i={mode:"hidden",children:i},0===(1&n)&&null!==o?(o.childLanes=0,o.pendingProps=i):o=Fd(i,n,0,null),e=Td(e,n,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Fo(r),t.memoizedState=To,e):Oo(t,i));if(null!==(s=e.memoizedState)&&null!==(a=s.dehydrated))return function(e,t,r,a,n,s,o){if(r)return 256&t.flags?(t.flags&=-257,Ao(e,t,o,a=co(Error(l(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=a.fallback,n=t.mode,a=Fd({mode:"visible",children:a.children},n,0,null),(s=Td(s,n,o,null)).flags|=2,a.return=t,s.return=t,a.sibling=s,t.child=a,0!==(1&t.mode)&&vl(t,e.child,null,o),t.child.memoizedState=Fo(o),t.memoizedState=To,s);if(0===(1&t.mode))return Ao(e,t,o,null);if("$!"===n.data){if(a=n.nextSibling&&n.nextSibling.dataset)var i=a.dgst;return a=i,Ao(e,t,o,a=co(s=Error(l(419)),a,void 0))}if(i=0!==(o&e.childLanes),bo||i){if(null!==(a=Di)){switch(o&-o){case 4:n=2;break;case 16:n=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:n=32;break;case 536870912:n=268435456;break;default:n=0}0!==(n=0!==(n&(a.suspendedLanes|o))?0:n)&&n!==s.retryLane&&(s.retryLane=n,Ll(e,n),rd(a,e,n,-1))}return gd(),Ao(e,t,o,a=co(Error(l(421))))}return"$?"===n.data?(t.flags|=128,t.child=e.child,t=Ed.bind(null,e),n._reactRetry=t,null):(e=s.treeContext,al=dn(n.nextSibling),rl=t,nl=!0,ll=null,null!==e&&(Qn[Gn++]=Kn,Qn[Gn++]=Jn,Qn[Gn++]=Yn,Kn=e.id,Jn=e.overflow,Yn=t),t=Oo(t,a.children),t.flags|=4096,t)}(e,t,i,n,a,s,r);if(o){o=n.fallback,i=t.mode,a=(s=e.child).sibling;var d={mode:"hidden",children:n.children};return 0===(1&i)&&t.child!==s?((n=t.child).childLanes=0,n.pendingProps=d,t.deletions=null):(n=Id(s,d)).subtreeFlags=14680064&s.subtreeFlags,null!==a?o=Id(a,o):(o=Td(o,i,r,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,i=null===(i=e.child.memoizedState)?Fo(r):{baseLanes:i.baseLanes|r,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=e.childLanes&~r,t.memoizedState=To,n}return e=(o=e.child).sibling,n=Id(o,{mode:"visible",children:n.children}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Oo(e,t){return(t=Fd({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ao(e,t,r,a){return null!==a&&fl(a),vl(t,e.child,null,r),(e=Oo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function $o(e,t,r){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Pl(e.return,t,r)}function Uo(e,t,r,a,n){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:r,tailMode:n}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=r,l.tailMode=n)}function Bo(e,t,r){var a=t.pendingProps,n=a.revealOrder,l=a.tail;if(vo(e,t,a.children,r),0!==(2&(a=Zl.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$o(e,r,t);else if(19===e.tag)$o(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Cn(Zl,a),0===(1&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===es(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Uo(t,!1,n,r,l);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===es(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Uo(t,!0,r,null,l);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Fi|=t.lanes,0===(r&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(r=Id(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Id(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function Ho(e,t){if(!nl)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var a=null;null!==r;)null!==r.alternate&&(a=r),r=r.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function Wo(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,a=0;if(t)for(var n=e.child;null!==n;)r|=n.lanes|n.childLanes,a|=14680064&n.subtreeFlags,a|=14680064&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)r|=n.lanes|n.childLanes,a|=n.subtreeFlags,a|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=a,e.childLanes=r,t}function Qo(e,t,r){var a=t.pendingProps;switch(tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wo(t),null;case 1:case 17:return zn(t.type)&&In(),Wo(t),null;case 3:return a=t.stateNode,Kl(),Sn(Dn),Sn(Pn),rs(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(ul(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ll&&(sd(ll),ll=null))),zo(e,t),Wo(t),null;case 5:Xl(t);var n=Gl(Ql.current);if(r=t.type,null!==e&&null!=t.stateNode)Io(e,t,r,a,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(l(166));return Wo(t),null}if(e=Gl(Hl.current),ul(t)){a=t.stateNode,r=t.type;var s=t.memoizedProps;switch(a[mn]=t,a[pn]=s,e=0!==(1&t.mode),r){case"dialog":Oa("cancel",a),Oa("close",a);break;case"iframe":case"object":case"embed":Oa("load",a);break;case"video":case"audio":for(n=0;n<La.length;n++)Oa(La[n],a);break;case"source":Oa("error",a);break;case"img":case"image":case"link":Oa("error",a),Oa("load",a);break;case"details":Oa("toggle",a);break;case"input":K(a,s),Oa("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!s.multiple},Oa("invalid",a);break;case"textarea":ne(a,s),Oa("invalid",a)}for(var i in ye(r,s),n=null,s)if(s.hasOwnProperty(i)){var d=s[i];"children"===i?"string"===typeof d?a.textContent!==d&&(!0!==s.suppressHydrationWarning&&Ja(a.textContent,d,e),n=["children",d]):"number"===typeof d&&a.textContent!==""+d&&(!0!==s.suppressHydrationWarning&&Ja(a.textContent,d,e),n=["children",""+d]):o.hasOwnProperty(i)&&null!=d&&"onScroll"===i&&Oa("scroll",a)}switch(r){case"input":W(a),Z(a,s,!0);break;case"textarea":W(a),se(a);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(a.onclick=Xa)}a=n,t.updateQueue=a,null!==a&&(t.flags|=4)}else{i=9===n.nodeType?n:n.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(r)),"http://www.w3.org/1999/xhtml"===e?"script"===r?((e=i.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=i.createElement(r,{is:a.is}):(e=i.createElement(r),"select"===r&&(i=e,a.multiple?i.multiple=!0:a.size&&(i.size=a.size))):e=i.createElementNS(e,r),e[mn]=t,e[pn]=a,Mo(e,t,!1,!1),t.stateNode=e;e:{switch(i=be(r,a),r){case"dialog":Oa("cancel",e),Oa("close",e),n=a;break;case"iframe":case"object":case"embed":Oa("load",e),n=a;break;case"video":case"audio":for(n=0;n<La.length;n++)Oa(La[n],e);n=a;break;case"source":Oa("error",e),n=a;break;case"img":case"image":case"link":Oa("error",e),Oa("load",e),n=a;break;case"details":Oa("toggle",e),n=a;break;case"input":K(e,a),n=Y(e,a),Oa("invalid",e);break;case"option":default:n=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},n=R({},a,{value:void 0}),Oa("invalid",e);break;case"textarea":ne(e,a),n=ae(e,a),Oa("invalid",e)}for(s in ye(r,n),d=n)if(d.hasOwnProperty(s)){var c=d[s];"style"===s?xe(e,c):"dangerouslySetInnerHTML"===s?null!=(c=c?c.__html:void 0)&&ue(e,c):"children"===s?"string"===typeof c?("textarea"!==r||""!==c)&&me(e,c):"number"===typeof c&&me(e,""+c):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(o.hasOwnProperty(s)?null!=c&&"onScroll"===s&&Oa("scroll",e):null!=c&&b(e,s,c,i))}switch(r){case"input":W(e),Z(e,a,!1);break;case"textarea":W(e),se(e);break;case"option":null!=a.value&&e.setAttribute("value",""+q(a.value));break;case"select":e.multiple=!!a.multiple,null!=(s=a.value)?re(e,!!a.multiple,s,!1):null!=a.defaultValue&&re(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof n.onClick&&(e.onclick=Xa)}switch(r){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(l(166));if(r=Gl(Ql.current),Gl(Hl.current),ul(t)){if(a=t.stateNode,r=t.memoizedProps,a[mn]=t,(s=a.nodeValue!==r)&&null!==(e=rl))switch(e.tag){case 3:Ja(a.nodeValue,r,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ja(a.nodeValue,r,0!==(1&e.mode))}s&&(t.flags|=4)}else(a=(9===r.nodeType?r:r.ownerDocument).createTextNode(a))[mn]=t,t.stateNode=a}return Wo(t),null;case 13:if(Sn(Zl),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(nl&&null!==al&&0!==(1&t.mode)&&0===(128&t.flags))ml(),pl(),t.flags|=98560,s=!1;else if(s=ul(t),null!==a&&null!==a.dehydrated){if(null===e){if(!s)throw Error(l(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(l(317));s[mn]=t}else pl(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wo(t),s=!1}else null!==ll&&(sd(ll),ll=null),s=!0;if(!s)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=r,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zl.current)?0===Li&&(Li=3):gd())),null!==t.updateQueue&&(t.flags|=4),Wo(t),null);case 4:return Kl(),zo(e,t),null===e&&Ua(t.stateNode.containerInfo),Wo(t),null;case 10:return El(t.type._context),Wo(t),null;case 19:if(Sn(Zl),null===(s=t.memoizedState))return Wo(t),null;if(a=0!==(128&t.flags),null===(i=s.rendering))if(a)Ho(s,!1);else{if(0!==Li||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=es(e))){for(t.flags|=128,Ho(s,!1),null!==(a=i.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=r,r=t.child;null!==r;)e=a,(s=r).flags&=14680066,null===(i=s.alternate)?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,s.type=i.type,e=i.dependencies,s.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Cn(Zl,1&Zl.current|2),t.child}e=e.sibling}null!==s.tail&&Je()>Bi&&(t.flags|=128,a=!0,Ho(s,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=es(i))){if(t.flags|=128,a=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),Ho(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!nl)return Wo(t),null}else 2*Je()-s.renderingStartTime>Bi&&1073741824!==r&&(t.flags|=128,a=!0,Ho(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(r=s.last)?r.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Je(),t.sibling=null,r=Zl.current,Cn(Zl,a?1&r|2:1&r),t):(Wo(t),null);case 22:case 23:return ud(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&zi)&&(Wo(t),6&t.subtreeFlags&&(t.flags|=8192)):Wo(t),null;case 24:case 25:return null}throw Error(l(156,t.tag))}function Go(e,t){switch(tl(t),t.tag){case 1:return zn(t.type)&&In(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Kl(),Sn(Dn),Sn(Pn),rs(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xl(t),null;case 13:if(Sn(Zl),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));pl()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Sn(Zl),null;case 4:return Kl(),null;case 10:return El(t.type._context),null;case 22:case 23:return ud(),null;default:return null}}Mo=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},zo=function(){},Io=function(e,t,r,a){var n=e.memoizedProps;if(n!==a){e=t.stateNode,Gl(Hl.current);var l,s=null;switch(r){case"input":n=Y(e,n),a=Y(e,a),s=[];break;case"select":n=R({},n,{value:void 0}),a=R({},a,{value:void 0}),s=[];break;case"textarea":n=ae(e,n),a=ae(e,a),s=[];break;default:"function"!==typeof n.onClick&&"function"===typeof a.onClick&&(e.onclick=Xa)}for(c in ye(r,a),r=null,n)if(!a.hasOwnProperty(c)&&n.hasOwnProperty(c)&&null!=n[c])if("style"===c){var i=n[c];for(l in i)i.hasOwnProperty(l)&&(r||(r={}),r[l]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(o.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in a){var d=a[c];if(i=null!=n?n[c]:void 0,a.hasOwnProperty(c)&&d!==i&&(null!=d||null!=i))if("style"===c)if(i){for(l in i)!i.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(r||(r={}),r[l]="");for(l in d)d.hasOwnProperty(l)&&i[l]!==d[l]&&(r||(r={}),r[l]=d[l])}else r||(s||(s=[]),s.push(c,r)),r=d;else"dangerouslySetInnerHTML"===c?(d=d?d.__html:void 0,i=i?i.__html:void 0,null!=d&&i!==d&&(s=s||[]).push(c,d)):"children"===c?"string"!==typeof d&&"number"!==typeof d||(s=s||[]).push(c,""+d):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(o.hasOwnProperty(c)?(null!=d&&"onScroll"===c&&Oa("scroll",e),s||i===d||(s=[])):(s=s||[]).push(c,d))}r&&(s=s||[]).push("style",r);var c=s;(t.updateQueue=c)&&(t.flags|=4)}},Lo=function(e,t,r,a){r!==a&&(t.flags|=4)};var Yo=!1,Ko=!1,Jo="function"===typeof WeakSet?WeakSet:Set,Xo=null;function Zo(e,t){var r=e.ref;if(null!==r)if("function"===typeof r)try{r(null)}catch(a){Nd(e,t,a)}else r.current=null}function ei(e,t,r){try{r()}catch(a){Nd(e,t,a)}}var ti=!1;function ri(e,t,r){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var n=a=a.next;do{if((n.tag&e)===e){var l=n.destroy;n.destroy=void 0,void 0!==l&&ei(t,r,l)}n=n.next}while(n!==a)}}function ai(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var r=t=t.next;do{if((r.tag&e)===e){var a=r.create;r.destroy=a()}r=r.next}while(r!==t)}}function ni(e){var t=e.ref;if(null!==t){var r=e.stateNode;e.tag,e=r,"function"===typeof t?t(e):t.current=e}}function li(e){var t=e.alternate;null!==t&&(e.alternate=null,li(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[mn],delete t[pn],delete t[gn],delete t[xn],delete t[hn])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function si(e){return 5===e.tag||3===e.tag||4===e.tag}function oi(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||si(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ii(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Xa));else if(4!==a&&null!==(e=e.child))for(ii(e,t,r),e=e.sibling;null!==e;)ii(e,t,r),e=e.sibling}function di(e,t,r){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==a&&null!==(e=e.child))for(di(e,t,r),e=e.sibling;null!==e;)di(e,t,r),e=e.sibling}var ci=null,ui=!1;function mi(e,t,r){for(r=r.child;null!==r;)pi(e,t,r),r=r.sibling}function pi(e,t,r){if(lt&&"function"===typeof lt.onCommitFiberUnmount)try{lt.onCommitFiberUnmount(nt,r)}catch(o){}switch(r.tag){case 5:Ko||Zo(r,t);case 6:var a=ci,n=ui;ci=null,mi(e,t,r),ui=n,null!==(ci=a)&&(ui?(e=ci,r=r.stateNode,8===e.nodeType?e.parentNode.removeChild(r):e.removeChild(r)):ci.removeChild(r.stateNode));break;case 18:null!==ci&&(ui?(e=ci,r=r.stateNode,8===e.nodeType?on(e.parentNode,r):1===e.nodeType&&on(e,r),Bt(e)):on(ci,r.stateNode));break;case 4:a=ci,n=ui,ci=r.stateNode.containerInfo,ui=!0,mi(e,t,r),ci=a,ui=n;break;case 0:case 11:case 14:case 15:if(!Ko&&(null!==(a=r.updateQueue)&&null!==(a=a.lastEffect))){n=a=a.next;do{var l=n,s=l.destroy;l=l.tag,void 0!==s&&(0!==(2&l)||0!==(4&l))&&ei(r,t,s),n=n.next}while(n!==a)}mi(e,t,r);break;case 1:if(!Ko&&(Zo(r,t),"function"===typeof(a=r.stateNode).componentWillUnmount))try{a.props=r.memoizedProps,a.state=r.memoizedState,a.componentWillUnmount()}catch(o){Nd(r,t,o)}mi(e,t,r);break;case 21:mi(e,t,r);break;case 22:1&r.mode?(Ko=(a=Ko)||null!==r.memoizedState,mi(e,t,r),Ko=a):mi(e,t,r);break;default:mi(e,t,r)}}function fi(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new Jo),t.forEach((function(t){var a=Pd.bind(null,e,t);r.has(t)||(r.add(t),t.then(a,a))}))}}function gi(e,t){var r=t.deletions;if(null!==r)for(var a=0;a<r.length;a++){var n=r[a];try{var s=e,o=t,i=o;e:for(;null!==i;){switch(i.tag){case 5:ci=i.stateNode,ui=!1;break e;case 3:case 4:ci=i.stateNode.containerInfo,ui=!0;break e}i=i.return}if(null===ci)throw Error(l(160));pi(s,o,n),ci=null,ui=!1;var d=n.alternate;null!==d&&(d.return=null),n.return=null}catch(c){Nd(n,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)xi(t,e),t=t.sibling}function xi(e,t){var r=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gi(t,e),hi(e),4&a){try{ri(3,e,e.return),ai(3,e)}catch(x){Nd(e,e.return,x)}try{ri(5,e,e.return)}catch(x){Nd(e,e.return,x)}}break;case 1:gi(t,e),hi(e),512&a&&null!==r&&Zo(r,r.return);break;case 5:if(gi(t,e),hi(e),512&a&&null!==r&&Zo(r,r.return),32&e.flags){var n=e.stateNode;try{me(n,"")}catch(x){Nd(e,e.return,x)}}if(4&a&&null!=(n=e.stateNode)){var s=e.memoizedProps,o=null!==r?r.memoizedProps:s,i=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===i&&"radio"===s.type&&null!=s.name&&J(n,s),be(i,o);var c=be(i,s);for(o=0;o<d.length;o+=2){var u=d[o],m=d[o+1];"style"===u?xe(n,m):"dangerouslySetInnerHTML"===u?ue(n,m):"children"===u?me(n,m):b(n,u,m,c)}switch(i){case"input":X(n,s);break;case"textarea":le(n,s);break;case"select":var p=n._wrapperState.wasMultiple;n._wrapperState.wasMultiple=!!s.multiple;var f=s.value;null!=f?re(n,!!s.multiple,f,!1):p!==!!s.multiple&&(null!=s.defaultValue?re(n,!!s.multiple,s.defaultValue,!0):re(n,!!s.multiple,s.multiple?[]:"",!1))}n[pn]=s}catch(x){Nd(e,e.return,x)}}break;case 6:if(gi(t,e),hi(e),4&a){if(null===e.stateNode)throw Error(l(162));n=e.stateNode,s=e.memoizedProps;try{n.nodeValue=s}catch(x){Nd(e,e.return,x)}}break;case 3:if(gi(t,e),hi(e),4&a&&null!==r&&r.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(x){Nd(e,e.return,x)}break;case 4:default:gi(t,e),hi(e);break;case 13:gi(t,e),hi(e),8192&(n=e.child).flags&&(s=null!==n.memoizedState,n.stateNode.isHidden=s,!s||null!==n.alternate&&null!==n.alternate.memoizedState||(Ui=Je())),4&a&&fi(e);break;case 22:if(u=null!==r&&null!==r.memoizedState,1&e.mode?(Ko=(c=Ko)||u,gi(t,e),Ko=c):gi(t,e),hi(e),8192&a){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(Xo=e,u=e.child;null!==u;){for(m=Xo=u;null!==Xo;){switch(f=(p=Xo).child,p.tag){case 0:case 11:case 14:case 15:ri(4,p,p.return);break;case 1:Zo(p,p.return);var g=p.stateNode;if("function"===typeof g.componentWillUnmount){a=p,r=p.return;try{t=a,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){Nd(a,r,x)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){ki(m);continue}}null!==f?(f.return=p,Xo=f):ki(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{n=m.stateNode,c?"function"===typeof(s=n.style).setProperty?s.setProperty("display","none","important"):s.display="none":(i=m.stateNode,o=void 0!==(d=m.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,i.style.display=ge("display",o))}catch(x){Nd(e,e.return,x)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(x){Nd(e,e.return,x)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:gi(t,e),hi(e),4&a&&fi(e);case 21:}}function hi(e){var t=e.flags;if(2&t){try{e:{for(var r=e.return;null!==r;){if(si(r)){var a=r;break e}r=r.return}throw Error(l(160))}switch(a.tag){case 5:var n=a.stateNode;32&a.flags&&(me(n,""),a.flags&=-33),di(e,oi(e),n);break;case 3:case 4:var s=a.stateNode.containerInfo;ii(e,oi(e),s);break;default:throw Error(l(161))}}catch(o){Nd(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yi(e,t,r){Xo=e,bi(e,t,r)}function bi(e,t,r){for(var a=0!==(1&e.mode);null!==Xo;){var n=Xo,l=n.child;if(22===n.tag&&a){var s=null!==n.memoizedState||Yo;if(!s){var o=n.alternate,i=null!==o&&null!==o.memoizedState||Ko;o=Yo;var d=Ko;if(Yo=s,(Ko=i)&&!d)for(Xo=n;null!==Xo;)i=(s=Xo).child,22===s.tag&&null!==s.memoizedState?wi(n):null!==i?(i.return=s,Xo=i):wi(n);for(;null!==l;)Xo=l,bi(l,t,r),l=l.sibling;Xo=n,Yo=o,Ko=d}vi(e)}else 0!==(8772&n.subtreeFlags)&&null!==l?(l.return=n,Xo=l):vi(e)}}function vi(e){for(;null!==Xo;){var t=Xo;if(0!==(8772&t.flags)){var r=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ko||ai(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!Ko)if(null===r)a.componentDidMount();else{var n=t.elementType===t.type?r.memoizedProps:to(t.type,r.memoizedProps);a.componentDidUpdate(n,r.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&Vl(t,s,a);break;case 3:var o=t.updateQueue;if(null!==o){if(r=null,null!==t.child)switch(t.child.tag){case 5:case 1:r=t.child.stateNode}Vl(t,o,r)}break;case 5:var i=t.stateNode;if(null===r&&4&t.flags){r=i;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&r.focus();break;case"img":d.src&&(r.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Bt(m)}}}break;default:throw Error(l(163))}Ko||512&t.flags&&ni(t)}catch(p){Nd(t,t.return,p)}}if(t===e){Xo=null;break}if(null!==(r=t.sibling)){r.return=t.return,Xo=r;break}Xo=t.return}}function ki(e){for(;null!==Xo;){var t=Xo;if(t===e){Xo=null;break}var r=t.sibling;if(null!==r){r.return=t.return,Xo=r;break}Xo=t.return}}function wi(e){for(;null!==Xo;){var t=Xo;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ai(4,t)}catch(i){Nd(t,r,i)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var n=t.return;try{a.componentDidMount()}catch(i){Nd(t,n,i)}}var l=t.return;try{ni(t)}catch(i){Nd(t,l,i)}break;case 5:var s=t.return;try{ni(t)}catch(i){Nd(t,s,i)}}}catch(i){Nd(t,t.return,i)}if(t===e){Xo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Xo=o;break}Xo=t.return}}var ji,Ni=Math.ceil,Si=v.ReactCurrentDispatcher,Ci=v.ReactCurrentOwner,Ei=v.ReactCurrentBatchConfig,Pi=0,Di=null,_i=null,Mi=0,zi=0,Ii=Nn(0),Li=0,Ti=null,Fi=0,Ri=0,Oi=0,Ai=null,$i=null,Ui=0,Bi=1/0,Vi=null,qi=!1,Hi=null,Wi=null,Qi=!1,Gi=null,Yi=0,Ki=0,Ji=null,Xi=-1,Zi=0;function ed(){return 0!==(6&Pi)?Je():-1!==Xi?Xi:Xi=Je()}function td(e){return 0===(1&e.mode)?1:0!==(2&Pi)&&0!==Mi?Mi&-Mi:null!==gl.transition?(0===Zi&&(Zi=gt()),Zi):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Kt(e.type)}function rd(e,t,r,a){if(50<Ki)throw Ki=0,Ji=null,Error(l(185));ht(e,r,a),0!==(2&Pi)&&e===Di||(e===Di&&(0===(2&Pi)&&(Ri|=r),4===Li&&od(e,Mi)),ad(e,a),1===r&&0===Pi&&0===(1&t.mode)&&(Bi=Je()+500,An&&Bn()))}function ad(e,t){var r=e.callbackNode;!function(e,t){for(var r=e.suspendedLanes,a=e.pingedLanes,n=e.expirationTimes,l=e.pendingLanes;0<l;){var s=31-st(l),o=1<<s,i=n[s];-1===i?0!==(o&r)&&0===(o&a)||(n[s]=pt(o,t)):i<=t&&(e.expiredLanes|=o),l&=~o}}(e,t);var a=mt(e,e===Di?Mi:0);if(0===a)null!==r&&Ge(r),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=r&&Ge(r),1===t)0===e.tag?function(e){An=!0,Un(e)}(id.bind(null,e)):Un(id.bind(null,e)),ln((function(){0===(6&Pi)&&Bn()})),r=null;else{switch(vt(a)){case 1:r=Ze;break;case 4:r=et;break;case 16:default:r=tt;break;case 536870912:r=at}r=Dd(r,nd.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function nd(e,t){if(Xi=-1,Zi=0,0!==(6&Pi))throw Error(l(327));var r=e.callbackNode;if(wd()&&e.callbackNode!==r)return null;var a=mt(e,e===Di?Mi:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=xd(e,a);else{t=a;var n=Pi;Pi|=2;var s=fd();for(Di===e&&Mi===t||(Vi=null,Bi=Je()+500,md(e,t));;)try{yd();break}catch(i){pd(e,i)}Cl(),Si.current=s,Pi=n,null!==_i?t=0:(Di=null,Mi=0,t=Li)}if(0!==t){if(2===t&&(0!==(n=ft(e))&&(a=n,t=ld(e,n))),1===t)throw r=Ti,md(e,0),od(e,a),ad(e,Je()),r;if(6===t)od(e,a);else{if(n=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var r=t.updateQueue;if(null!==r&&null!==(r=r.stores))for(var a=0;a<r.length;a++){var n=r[a],l=n.getSnapshot;n=n.value;try{if(!sa(l(),n))return!1}catch(o){return!1}}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(n)&&(2===(t=xd(e,a))&&(0!==(s=ft(e))&&(a=s,t=ld(e,s))),1===t))throw r=Ti,md(e,0),od(e,a),ad(e,Je()),r;switch(e.finishedWork=n,e.finishedLanes=a,t){case 0:case 1:throw Error(l(345));case 2:case 5:kd(e,$i,Vi);break;case 3:if(od(e,a),(130023424&a)===a&&10<(t=Ui+500-Je())){if(0!==mt(e,0))break;if(((n=e.suspendedLanes)&a)!==a){ed(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=rn(kd.bind(null,e,$i,Vi),t);break}kd(e,$i,Vi);break;case 4:if(od(e,a),(4194240&a)===a)break;for(t=e.eventTimes,n=-1;0<a;){var o=31-st(a);s=1<<o,(o=t[o])>n&&(n=o),a&=~s}if(a=n,10<(a=(120>(a=Je()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Ni(a/1960))-a)){e.timeoutHandle=rn(kd.bind(null,e,$i,Vi),a);break}kd(e,$i,Vi);break;default:throw Error(l(329))}}}return ad(e,Je()),e.callbackNode===r?nd.bind(null,e):null}function ld(e,t){var r=Ai;return e.current.memoizedState.isDehydrated&&(md(e,t).flags|=256),2!==(e=xd(e,t))&&(t=$i,$i=r,null!==t&&sd(t)),e}function sd(e){null===$i?$i=e:$i.push.apply($i,e)}function od(e,t){for(t&=~Oi,t&=~Ri,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-st(t),a=1<<r;e[r]=-1,t&=~a}}function id(e){if(0!==(6&Pi))throw Error(l(327));wd();var t=mt(e,0);if(0===(1&t))return ad(e,Je()),null;var r=xd(e,t);if(0!==e.tag&&2===r){var a=ft(e);0!==a&&(t=a,r=ld(e,a))}if(1===r)throw r=Ti,md(e,0),od(e,t),ad(e,Je()),r;if(6===r)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,kd(e,$i,Vi),ad(e,Je()),null}function dd(e,t){var r=Pi;Pi|=1;try{return e(t)}finally{0===(Pi=r)&&(Bi=Je()+500,An&&Bn())}}function cd(e){null!==Gi&&0===Gi.tag&&0===(6&Pi)&&wd();var t=Pi;Pi|=1;var r=Ei.transition,a=bt;try{if(Ei.transition=null,bt=1,e)return e()}finally{bt=a,Ei.transition=r,0===(6&(Pi=t))&&Bn()}}function ud(){zi=Ii.current,Sn(Ii)}function md(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,an(r)),null!==_i)for(r=_i.return;null!==r;){var a=r;switch(tl(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&In();break;case 3:Kl(),Sn(Dn),Sn(Pn),rs();break;case 5:Xl(a);break;case 4:Kl();break;case 13:case 19:Sn(Zl);break;case 10:El(a.type._context);break;case 22:case 23:ud()}r=r.return}if(Di=e,_i=e=Id(e.current,null),Mi=zi=t,Li=0,Ti=null,Oi=Ri=Fi=0,$i=Ai=null,null!==Ml){for(t=0;t<Ml.length;t++)if(null!==(a=(r=Ml[t]).interleaved)){r.interleaved=null;var n=a.next,l=r.pending;if(null!==l){var s=l.next;l.next=n,a.next=s}r.pending=a}Ml=null}return e}function pd(e,t){for(;;){var r=_i;try{if(Cl(),as.current=Js,ds){for(var a=ss.memoizedState;null!==a;){var n=a.queue;null!==n&&(n.pending=null),a=a.next}ds=!1}if(ls=0,is=os=ss=null,cs=!1,us=0,Ci.current=null,null===r||null===r.return){Li=1,Ti=t,_i=null;break}e:{var s=e,o=r.return,i=r,d=t;if(t=Mi,i.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var c=d,u=i,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=xo(o);if(null!==f){f.flags&=-257,ho(f,o,i,0,t),1&f.mode&&go(s,c,t),d=c;var g=(t=f).updateQueue;if(null===g){var x=new Set;x.add(d),t.updateQueue=x}else g.add(d);break e}if(0===(1&t)){go(s,c,t),gd();break e}d=Error(l(426))}else if(nl&&1&i.mode){var h=xo(o);if(null!==h){0===(65536&h.flags)&&(h.flags|=256),ho(h,o,i,0,t),fl(io(d,i));break e}}s=d=io(d,i),4!==Li&&(Li=2),null===Ai?Ai=[s]:Ai.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t,Ul(s,po(0,d,t));break e;case 1:i=d;var y=s.type,b=s.stateNode;if(0===(128&s.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Wi||!Wi.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t,Ul(s,fo(s,i,t));break e}}s=s.return}while(null!==s)}vd(r)}catch(v){t=v,_i===r&&null!==r&&(_i=r=r.return);continue}break}}function fd(){var e=Si.current;return Si.current=Js,null===e?Js:e}function gd(){0!==Li&&3!==Li&&2!==Li||(Li=4),null===Di||0===(268435455&Fi)&&0===(268435455&Ri)||od(Di,Mi)}function xd(e,t){var r=Pi;Pi|=2;var a=fd();for(Di===e&&Mi===t||(Vi=null,md(e,t));;)try{hd();break}catch(n){pd(e,n)}if(Cl(),Pi=r,Si.current=a,null!==_i)throw Error(l(261));return Di=null,Mi=0,Li}function hd(){for(;null!==_i;)bd(_i)}function yd(){for(;null!==_i&&!Ye();)bd(_i)}function bd(e){var t=ji(e.alternate,e,zi);e.memoizedProps=e.pendingProps,null===t?vd(e):_i=t,Ci.current=null}function vd(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(r=Qo(r,t,zi)))return void(_i=r)}else{if(null!==(r=Go(r,t)))return r.flags&=32767,void(_i=r);if(null===e)return Li=6,void(_i=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(_i=t);_i=t=e}while(null!==t);0===Li&&(Li=5)}function kd(e,t,r){var a=bt,n=Ei.transition;try{Ei.transition=null,bt=1,function(e,t,r,a){do{wd()}while(null!==Gi);if(0!==(6&Pi))throw Error(l(327));r=e.finishedWork;var n=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var s=r.lanes|r.childLanes;if(function(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<r;){var n=31-st(r),l=1<<n;t[n]=0,a[n]=-1,e[n]=-1,r&=~l}}(e,s),e===Di&&(_i=Di=null,Mi=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||Qi||(Qi=!0,Dd(tt,(function(){return wd(),null}))),s=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||s){s=Ei.transition,Ei.transition=null;var o=bt;bt=1;var i=Pi;Pi|=4,Ci.current=null,function(e,t){if(Za=qt,ma(e=ua())){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(a&&0!==a.rangeCount){r=a.anchorNode;var n=a.anchorOffset,s=a.focusNode;a=a.focusOffset;try{r.nodeType,s.nodeType}catch(k){r=null;break e}var o=0,i=-1,d=-1,c=0,u=0,m=e,p=null;t:for(;;){for(var f;m!==r||0!==n&&3!==m.nodeType||(i=o+n),m!==s||0!==a&&3!==m.nodeType||(d=o+a),3===m.nodeType&&(o+=m.nodeValue.length),null!==(f=m.firstChild);)p=m,m=f;for(;;){if(m===e)break t;if(p===r&&++c===n&&(i=o),p===s&&++u===a&&(d=o),null!==(f=m.nextSibling))break;p=(m=p).parentNode}m=f}r=-1===i||-1===d?null:{start:i,end:d}}else r=null}r=r||{start:0,end:0}}else r=null;for(en={focusedElem:e,selectionRange:r},qt=!1,Xo=t;null!==Xo;)if(e=(t=Xo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xo=e;else for(;null!==Xo;){t=Xo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var x=g.memoizedProps,h=g.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?x:to(t.type,x),h);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(l(163))}}catch(k){Nd(t,t.return,k)}if(null!==(e=t.sibling)){e.return=t.return,Xo=e;break}Xo=t.return}g=ti,ti=!1}(e,r),xi(r,e),pa(en),qt=!!Za,en=Za=null,e.current=r,yi(r,e,n),Ke(),Pi=i,bt=o,Ei.transition=s}else e.current=r;if(Qi&&(Qi=!1,Gi=e,Yi=n),s=e.pendingLanes,0===s&&(Wi=null),function(e){if(lt&&"function"===typeof lt.onCommitFiberRoot)try{lt.onCommitFiberRoot(nt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),ad(e,Je()),null!==t)for(a=e.onRecoverableError,r=0;r<t.length;r++)n=t[r],a(n.value,{componentStack:n.stack,digest:n.digest});if(qi)throw qi=!1,e=Hi,Hi=null,e;0!==(1&Yi)&&0!==e.tag&&wd(),s=e.pendingLanes,0!==(1&s)?e===Ji?Ki++:(Ki=0,Ji=e):Ki=0,Bn()}(e,t,r,a)}finally{Ei.transition=n,bt=a}return null}function wd(){if(null!==Gi){var e=vt(Yi),t=Ei.transition,r=bt;try{if(Ei.transition=null,bt=16>e?16:e,null===Gi)var a=!1;else{if(e=Gi,Gi=null,Yi=0,0!==(6&Pi))throw Error(l(331));var n=Pi;for(Pi|=4,Xo=e.current;null!==Xo;){var s=Xo,o=s.child;if(0!==(16&Xo.flags)){var i=s.deletions;if(null!==i){for(var d=0;d<i.length;d++){var c=i[d];for(Xo=c;null!==Xo;){var u=Xo;switch(u.tag){case 0:case 11:case 15:ri(8,u,s)}var m=u.child;if(null!==m)m.return=u,Xo=m;else for(;null!==Xo;){var p=(u=Xo).sibling,f=u.return;if(li(u),u===c){Xo=null;break}if(null!==p){p.return=f,Xo=p;break}Xo=f}}}var g=s.alternate;if(null!==g){var x=g.child;if(null!==x){g.child=null;do{var h=x.sibling;x.sibling=null,x=h}while(null!==x)}}Xo=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,Xo=o;else e:for(;null!==Xo;){if(0!==(2048&(s=Xo).flags))switch(s.tag){case 0:case 11:case 15:ri(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,Xo=y;break e}Xo=s.return}}var b=e.current;for(Xo=b;null!==Xo;){var v=(o=Xo).child;if(0!==(2064&o.subtreeFlags)&&null!==v)v.return=o,Xo=v;else e:for(o=b;null!==Xo;){if(0!==(2048&(i=Xo).flags))try{switch(i.tag){case 0:case 11:case 15:ai(9,i)}}catch(w){Nd(i,i.return,w)}if(i===o){Xo=null;break e}var k=i.sibling;if(null!==k){k.return=i.return,Xo=k;break e}Xo=i.return}}if(Pi=n,Bn(),lt&&"function"===typeof lt.onPostCommitFiberRoot)try{lt.onPostCommitFiberRoot(nt,e)}catch(w){}a=!0}return a}finally{bt=r,Ei.transition=t}}return!1}function jd(e,t,r){e=Al(e,t=po(0,t=io(r,t),1),1),t=ed(),null!==e&&(ht(e,1,t),ad(e,t))}function Nd(e,t,r){if(3===e.tag)jd(e,e,r);else for(;null!==t;){if(3===t.tag){jd(t,e,r);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===Wi||!Wi.has(a))){t=Al(t,e=fo(t,e=io(r,e),1),1),e=ed(),null!==t&&(ht(t,1,e),ad(t,e));break}}t=t.return}}function Sd(e,t,r){var a=e.pingCache;null!==a&&a.delete(t),t=ed(),e.pingedLanes|=e.suspendedLanes&r,Di===e&&(Mi&r)===r&&(4===Li||3===Li&&(130023424&Mi)===Mi&&500>Je()-Ui?md(e,0):Oi|=r),ad(e,t)}function Cd(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var r=ed();null!==(e=Ll(e,t))&&(ht(e,t,r),ad(e,r))}function Ed(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cd(e,r)}function Pd(e,t){var r=0;switch(e.tag){case 13:var a=e.stateNode,n=e.memoizedState;null!==n&&(r=n.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(l(314))}null!==a&&a.delete(t),Cd(e,r)}function Dd(e,t){return Qe(e,t)}function _d(e,t,r,a){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Md(e,t,r,a){return new _d(e,t,r,a)}function zd(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Id(e,t){var r=e.alternate;return null===r?((r=Md(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=14680064&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ld(e,t,r,a,n,s){var o=2;if(a=e,"function"===typeof e)zd(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case j:return Td(r.children,n,s,t);case N:o=8,n|=8;break;case S:return(e=Md(12,r,t,2|n)).elementType=S,e.lanes=s,e;case D:return(e=Md(13,r,t,n)).elementType=D,e.lanes=s,e;case _:return(e=Md(19,r,t,n)).elementType=_,e.lanes=s,e;case I:return Fd(r,n,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case E:o=9;break e;case P:o=11;break e;case M:o=14;break e;case z:o=16,a=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=Md(o,r,t,n)).elementType=e,t.type=a,t.lanes=s,t}function Td(e,t,r,a){return(e=Md(7,e,a,t)).lanes=r,e}function Fd(e,t,r,a){return(e=Md(22,e,a,t)).elementType=I,e.lanes=r,e.stateNode={isHidden:!1},e}function Rd(e,t,r){return(e=Md(6,e,null,t)).lanes=r,e}function Od(e,t,r){return(t=Md(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ad(e,t,r,a,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xt(0),this.expirationTimes=xt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xt(0),this.identifierPrefix=a,this.onRecoverableError=n,this.mutableSourceEagerHydrationData=null}function $d(e,t,r,a,n,l,s,o,i){return e=new Ad(e,t,r,o,i),1===t?(t=1,!0===l&&(t|=8)):t=0,l=Md(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:a,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fl(l),e}function Ud(e){if(!e)return En;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(zn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(l(171))}if(1===e.tag){var r=e.type;if(zn(r))return Tn(e,r,t)}return t}function Bd(e,t,r,a,n,l,s,o,i){return(e=$d(r,a,!0,e,0,l,0,o,i)).context=Ud(null),r=e.current,(l=Ol(a=ed(),n=td(r))).callback=void 0!==t&&null!==t?t:null,Al(r,l,n),e.current.lanes=n,ht(e,n,a),ad(e,a),e}function Vd(e,t,r,a){var n=t.current,l=ed(),s=td(n);return r=Ud(r),null===t.context?t.context=r:t.pendingContext=r,(t=Ol(l,s)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Al(n,t,s))&&(rd(e,n,s,l),$l(e,n,s)),s}function qd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hd(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function Wd(e,t){Hd(e,t),(e=e.alternate)&&Hd(e,t)}ji=function(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps||Dn.current)bo=!0;else{if(0===(e.lanes&r)&&0===(128&t.flags))return bo=!1,function(e,t,r){switch(t.tag){case 3:Do(t),pl();break;case 5:Jl(t);break;case 1:zn(t.type)&&Fn(t);break;case 4:Yl(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,n=t.memoizedProps.value;Cn(wl,a._currentValue),a._currentValue=n;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Cn(Zl,1&Zl.current),t.flags|=128,null):0!==(r&t.child.childLanes)?Ro(e,t,r):(Cn(Zl,1&Zl.current),null!==(e=qo(e,t,r))?e.sibling:null);Cn(Zl,1&Zl.current);break;case 19:if(a=0!==(r&t.childLanes),0!==(128&e.flags)){if(a)return Bo(e,t,r);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),Cn(Zl,Zl.current),a)break;return null;case 22:case 23:return t.lanes=0,No(e,t,r)}return qo(e,t,r)}(e,t,r);bo=0!==(131072&e.flags)}else bo=!1,nl&&0!==(1048576&t.flags)&&Zn(t,Wn,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;Vo(e,t),e=t.pendingProps;var n=Mn(t,Pn.current);Dl(t,r),n=gs(null,t,a,e,n,r);var s=xs();return t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,zn(a)?(s=!0,Fn(t)):s=!1,t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,Fl(t),n.updater=ao,t.stateNode=n,n._reactInternals=t,oo(t,a,e,r),t=Po(null,t,a,!0,s,r)):(t.tag=0,nl&&s&&el(t),vo(null,t,n,r),t=t.child),t;case 16:a=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,a=(n=a._init)(a._payload),t.type=a,n=t.tag=function(e){if("function"===typeof e)return zd(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===M)return 14}return 2}(a),e=to(a,e),n){case 0:t=Co(null,t,a,e,r);break e;case 1:t=Eo(null,t,a,e,r);break e;case 11:t=ko(null,t,a,e,r);break e;case 14:t=wo(null,t,a,to(a.type,e),r);break e}throw Error(l(306,a,""))}return t;case 0:return a=t.type,n=t.pendingProps,Co(e,t,a,n=t.elementType===a?n:to(a,n),r);case 1:return a=t.type,n=t.pendingProps,Eo(e,t,a,n=t.elementType===a?n:to(a,n),r);case 3:e:{if(Do(t),null===e)throw Error(l(387));a=t.pendingProps,n=(s=t.memoizedState).element,Rl(e,t),Bl(t,a,null,r);var o=t.memoizedState;if(a=o.element,s.isDehydrated){if(s={element:a,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=_o(e,t,a,r,n=io(Error(l(423)),t));break e}if(a!==n){t=_o(e,t,a,r,n=io(Error(l(424)),t));break e}for(al=dn(t.stateNode.containerInfo.firstChild),rl=t,nl=!0,ll=null,r=kl(t,null,a,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(pl(),a===n){t=qo(e,t,r);break e}vo(e,t,a,r)}t=t.child}return t;case 5:return Jl(t),null===e&&dl(t),a=t.type,n=t.pendingProps,s=null!==e?e.memoizedProps:null,o=n.children,tn(a,n)?o=null:null!==s&&tn(a,s)&&(t.flags|=32),So(e,t),vo(e,t,o,r),t.child;case 6:return null===e&&dl(t),null;case 13:return Ro(e,t,r);case 4:return Yl(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=vl(t,null,a,r):vo(e,t,a,r),t.child;case 11:return a=t.type,n=t.pendingProps,ko(e,t,a,n=t.elementType===a?n:to(a,n),r);case 7:return vo(e,t,t.pendingProps,r),t.child;case 8:case 12:return vo(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(a=t.type._context,n=t.pendingProps,s=t.memoizedProps,o=n.value,Cn(wl,a._currentValue),a._currentValue=o,null!==s)if(sa(s.value,o)){if(s.children===n.children&&!Dn.current){t=qo(e,t,r);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var i=s.dependencies;if(null!==i){o=s.child;for(var d=i.firstContext;null!==d;){if(d.context===a){if(1===s.tag){(d=Ol(-1,r&-r)).tag=2;var c=s.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}s.lanes|=r,null!==(d=s.alternate)&&(d.lanes|=r),Pl(s.return,r,t),i.lanes|=r;break}d=d.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(l(341));o.lanes|=r,null!==(i=o.alternate)&&(i.lanes|=r),Pl(o,r,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}vo(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,a=t.pendingProps.children,Dl(t,r),a=a(n=_l(n)),t.flags|=1,vo(e,t,a,r),t.child;case 14:return n=to(a=t.type,t.pendingProps),wo(e,t,a,n=to(a.type,n),r);case 15:return jo(e,t,t.type,t.pendingProps,r);case 17:return a=t.type,n=t.pendingProps,n=t.elementType===a?n:to(a,n),Vo(e,t),t.tag=1,zn(a)?(e=!0,Fn(t)):e=!1,Dl(t,r),lo(t,a,n),oo(t,a,n,r),Po(null,t,a,!0,e,r);case 19:return Bo(e,t,r);case 22:return No(e,t,r)}throw Error(l(156,t.tag))};var Qd="function"===typeof reportError?reportError:function(e){console.error(e)};function Gd(e){this._internalRoot=e}function Yd(e){this._internalRoot=e}function Kd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jd(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xd(){}function Zd(e,t,r,a,n){var l=r._reactRootContainer;if(l){var s=l;if("function"===typeof n){var o=n;n=function(){var e=qd(s);o.call(e)}}Vd(t,s,e,n)}else s=function(e,t,r,a,n){if(n){if("function"===typeof a){var l=a;a=function(){var e=qd(s);l.call(e)}}var s=Bd(t,a,e,0,null,!1,0,"",Xd);return e._reactRootContainer=s,e[fn]=s.current,Ua(8===e.nodeType?e.parentNode:e),cd(),s}for(;n=e.lastChild;)e.removeChild(n);if("function"===typeof a){var o=a;a=function(){var e=qd(i);o.call(e)}}var i=$d(e,0,!1,null,0,!1,0,"",Xd);return e._reactRootContainer=i,e[fn]=i.current,Ua(8===e.nodeType?e.parentNode:e),cd((function(){Vd(t,i,r,a)})),i}(r,t,e,n,a);return qd(s)}Yd.prototype.render=Gd.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Vd(e,t,null,null)},Yd.prototype.unmount=Gd.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cd((function(){Vd(null,e,null,null)})),t[fn]=null}},Yd.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var r=0;r<It.length&&0!==t&&t<It[r].priority;r++);It.splice(r,0,e),0===r&&Rt(e)}},kt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ut(t.pendingLanes);0!==r&&(yt(t,1|r),ad(t,Je()),0===(6&Pi)&&(Bi=Je()+500,Bn()))}break;case 13:cd((function(){var t=Ll(e,1);if(null!==t){var r=ed();rd(t,e,1,r)}})),Wd(e,1)}},wt=function(e){if(13===e.tag){var t=Ll(e,134217728);if(null!==t)rd(t,e,134217728,ed());Wd(e,134217728)}},jt=function(e){if(13===e.tag){var t=td(e),r=Ll(e,t);if(null!==r)rd(r,e,t,ed());Wd(e,t)}},Nt=function(){return bt},St=function(e,t){var r=bt;try{return bt=e,t()}finally{bt=r}},we=function(e,t,r){switch(t){case"input":if(X(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var a=r[t];if(a!==e&&a.form===e.form){var n=kn(a);if(!n)throw Error(l(90));Q(a),X(a,n)}}}break;case"textarea":le(e,r);break;case"select":null!=(t=r.value)&&re(e,!!r.multiple,t,!1)}},Pe=dd,De=cd;var ec={usingClientEntryPoint:!1,Events:[bn,vn,kn,Ce,Ee,dd]},tc={findFiberByHostInstance:yn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},rc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ac=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ac.isDisabled&&ac.supportsFiber)try{nt=ac.inject(rc),lt=ac}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Kd(t))throw Error(l(200));return function(e,t,r){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==a?null:""+a,children:e,containerInfo:t,implementation:r}}(e,t,null,r)},t.createRoot=function(e,t){if(!Kd(e))throw Error(l(299));var r=!1,a="",n=Qd;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(n=t.onRecoverableError)),t=$d(e,1,!1,null,0,r,0,a,n),e[fn]=t.current,Ua(8===e.nodeType?e.parentNode:e),new Gd(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return cd(e)},t.hydrate=function(e,t,r){if(!Jd(t))throw Error(l(200));return Zd(null,e,t,!0,r)},t.hydrateRoot=function(e,t,r){if(!Kd(e))throw Error(l(405));var a=null!=r&&r.hydratedSources||null,n=!1,s="",o=Qd;if(null!==r&&void 0!==r&&(!0===r.unstable_strictMode&&(n=!0),void 0!==r.identifierPrefix&&(s=r.identifierPrefix),void 0!==r.onRecoverableError&&(o=r.onRecoverableError)),t=Bd(t,null,e,1,null!=r?r:null,n,0,s,o),e[fn]=t.current,Ua(e),a)for(e=0;e<a.length;e++)n=(n=(r=a[e])._getVersion)(r._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[r,n]:t.mutableSourceEagerHydrationData.push(r,n);return new Yd(t)},t.render=function(e,t,r){if(!Jd(t))throw Error(l(200));return Zd(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!Jd(e))throw Error(l(40));return!!e._reactRootContainer&&(cd((function(){Zd(null,null,e,!1,(function(){e._reactRootContainer=null,e[fn]=null}))})),!0)},t.unstable_batchedUpdates=dd,t.unstable_renderSubtreeIntoContainer=function(e,t,r,a){if(!Jd(r))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return Zd(e,t,r,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,r)=>{e.exports=r(234)},950:(e,t,r)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(730)}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,r),l.exports}var a=r(43),n=r(391);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=l(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function o(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c=["products","sales","users","markets","suppliers","customers","cashMovements","expenses","salesTarget","desiredProfit","ReportsDashboard"],u=()=>new Promise(((e,t)=>{const r=indexedDB.open("MiniMarketProDB",1);r.onupgradeneeded=e=>{const t=e.target.result;c.forEach((e=>{t.objectStoreNames.contains(e)||(e.startsWith("cashMovements_")||e.startsWith("cashRegisterState_")?t.createObjectStore(e,{keyPath:"id"}):t.createObjectStore(e,{keyPath:"id",autoIncrement:!0}))}))},r.onsuccess=t=>{e(t.target.result)},r.onerror=e=>{t("Error opening IndexedDB:",e.target.error)}})),m=async(e,t)=>(await u()).transaction(e,t).objectStore(e),p=async e=>{const t=await m(e,"readonly");return new Promise(((e,r)=>{const a=t.getAll();a.onsuccess=()=>e(a.result),a.onerror=()=>r(a.error)}))},f=async(e,t)=>{const r=await m(e,"readwrite");return new Promise(((e,a)=>{const n=r.add(t);n.onsuccess=()=>e(n.result),n.onerror=()=>a(n.error)}))},g=async(e,t)=>{const r=await m(e,"readwrite");return new Promise(((e,a)=>{const n=r.put(t);n.onsuccess=()=>e(n.result),n.onerror=()=>a(n.error)}))},x=async(e,t)=>{const r=await m(e,"readwrite");return new Promise(((e,a)=>{const n=r.delete(t);n.onsuccess=()=>e(n.result),n.onerror=()=>a(n.error)}))},h=async e=>{const t=await m(e,"readwrite");return new Promise(((e,r)=>{const a=t.clear();a.onsuccess=()=>e(a.result),a.onerror=()=>r(a.error)}))},y=async(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t)),console.log("LocalStorage for '".concat(e,"' synchronized."))}catch(r){console.error("Error syncing ".concat(e,":"),r)}},b=()=>{const e=localStorage.getItem("currentUser");return e?JSON.parse(e):null},v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return"admin"===(null===e||void 0===e?void 0:e.role)},k=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return"market"===(null===e||void 0===e?void 0:e.role)},w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b();return"vendedor"===(null===e||void 0===e?void 0:e.role)},j=()=>{const e=b();return null===e||void 0===e?void 0:e.marketId};var N=r(579);const S=e=>{let{categories:t,product:r,onAddProduct:n,onUpdateProduct:l,onCancel:s}=e;const[o,i]=(0,a.useState)(r||{id:Date.now(),name:"",barcode:"",category:t[0]||"",subcategory:"",unit:"unidad",price:0,cost:0,markup:0,supplier:"",minStock:0,image:null,marketId:"",lots:[]}),[c,u]=(0,a.useState)(""),m=(0,a.useRef)(null),[p,f]=(0,a.useState)([]),[g,x]=(0,a.useState)([]),[h,y]=(0,a.useState)(0),[b,k]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[C,E]=(0,a.useState)(""),P={Alimentos:["L\xe1cteos","Panader\xeda","Carnes","Verduras","Frutas","Congelados","Despensa"],Bebidas:["Gaseosas","Jugos","Aguas","Cervezas","Vinos","Licores"],Limpieza:["Hogar","Ropa","Cocina","Ba\xf1o","Pisos"],Fiambres:["Jamones","Quesos","Embutidos","Salames"],Otros:["Varios"]},D=t.filter((e=>e.toLowerCase().includes(w.toLowerCase()))),_=(P[o.category]||[]).filter((e=>e.toLowerCase().includes(C.toLowerCase())));(0,a.useEffect)((()=>{const e=JSON.parse(localStorage.getItem("markets"))||[];f(e);const t=JSON.parse(localStorage.getItem("suppliers"))||[],a=v()?r?r.marketId:e.length>0?e[0].id:"":j(),n=t.filter((e=>e.marketId===a));x(n),!r&&v()&&e.length>0&&i((t=>d(d({},t),{},{marketId:e[0].id}))),r&&!o.marketId&&i((e=>d(d({},e),{},{marketId:r.marketId})))}),[r]),(0,a.useEffect)((()=>{if(v()&&o.marketId){const e=(JSON.parse(localStorage.getItem("suppliers"))||[]).filter((e=>e.marketId===o.marketId));x(e),o.supplier&&!e.some((e=>e.id===o.supplier))&&i((e=>d(d({},e),{},{supplier:""})))}}),[o.marketId,v]),(0,a.useEffect)((()=>{const e=o.cost*(1+o.markup/100);e!==o.price&&i((t=>d(d({},t),{},{price:parseFloat(e.toFixed(2))})))}),[o.cost,o.markup]);const M=e=>{const{name:t,value:r}=e.target;i(d(d({},o),{},{[t]:"price"===t||"cost"===t||"minStock"===t||"markup"===t?parseFloat(r)||0:r}))};return(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:r?"Editar Producto":"Agregar Nuevo Producto"}),(0,N.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=o.lots.reduce(((e,t)=>e+t.quantity),0),a=d(d({},o),{},{stock:t});r?l(a):n(a)},children:[(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v()&&(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mercado"}),(0,N.jsxs)("select",{name:"marketId",value:o.marketId,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0,children:[(0,N.jsx)("option",{value:"",children:"Seleccionar mercado"}),p.map((e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,N.jsx)("input",{type:"text",name:"name",value:o.name,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"C\xf3digo de Barras"}),(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("input",{type:"text",value:o.barcode,onChange:e=>i(d(d({},o),{},{barcode:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-l-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Escanear o ingresar manualmente"}),(0,N.jsx)("button",{type:"button",onClick:()=>{const e=Math.floor(1e12+9e12*Math.random()).toString();i(d(d({},o),{},{barcode:e}))},className:"bg-gray-200 hover:bg-gray-300 px-3 py-2 border border-l-0 border-gray-300 rounded-r-md dark:bg-gray-600 dark:hover:bg-gray-500",children:(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,N.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h8a2 2 0 012 2v12a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 0v12h8V4H6z",clipRule:"evenodd"}),(0,N.jsx)("path",{fillRule:"evenodd",d:"M8 7a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z",clipRule:"evenodd"})]})})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Categor\xeda"}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("input",{type:"text",value:w,onChange:e=>S(e.target.value),placeholder:"Buscar categor\xeda...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("select",{name:"category",value:o.category,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1",children:D.map((e=>(0,N.jsx)("option",{value:e,children:e},e)))})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Subcategor\xeda"}),(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("input",{type:"text",value:C,onChange:e=>E(e.target.value),placeholder:"Buscar subcategor\xeda...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("select",{name:"subcategory",value:o.subcategory,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white mt-1",children:(P[o.category]||[]).length>0?_.map((e=>(0,N.jsx)("option",{value:e,children:e},e))):(0,N.jsx)("option",{value:"",children:"Selecciona una categor\xeda primero"})})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Unidad de Medida"}),(0,N.jsxs)("select",{name:"unit",value:o.unit,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,N.jsx)("option",{value:"unidad",children:"Unidad"}),(0,N.jsx)("option",{value:"gramos",children:"Gramos (por Kg)"})]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Proveedor"}),(0,N.jsxs)("select",{name:"supplier",value:o.supplier,onChange:M,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,N.jsx)("option",{value:"",children:"Seleccionar proveedor"}),g.map((e=>(0,N.jsxs)("option",{value:e.id,children:[e.name," ",e.lastName]},e.id)))]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Costo"}),(0,N.jsx)("input",{type:"number",name:"cost",value:o.cost,onChange:M,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"% Sobreprecio"}),(0,N.jsx)("input",{type:"number",name:"markup",value:o.markup,onChange:M,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Precio de Venta (Calculado)"}),(0,N.jsx)("input",{type:"number",name:"price",value:o.price,readOnly:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-gray-100 dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Stock M\xednimo"}),(0,N.jsx)("input",{type:"number",name:"minStock",value:o.minStock,onChange:M,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{className:"md:col-span-2",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Imagen del Producto"}),(0,N.jsxs)("div",{className:"flex items-center space-x-4",children:[o.image?(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("img",{src:o.image,alt:"Preview",className:"h-20 w-20 object-cover rounded-md"}),(0,N.jsx)("button",{type:"button",onClick:()=>i(d(d({},o),{},{image:null})),className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1",children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}):(0,N.jsx)("div",{className:"h-20 w-20 bg-gray-200 rounded-md flex items-center justify-center dark:bg-gray-700",children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 text-gray-400 dark:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,N.jsxs)("div",{children:[(0,N.jsx)("input",{type:"file",ref:m,onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{i(d(d({},o),{},{image:e.result}))},e.readAsDataURL(t)}},accept:"image/*",className:"hidden"}),(0,N.jsx)("button",{type:"button",onClick:()=>m.current.click(),className:"px-3 py-2 bg-white border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600",children:o.image?"Cambiar imagen":"Subir imagen"})]})]})]})]}),(0,N.jsxs)("div",{className:"mt-6",children:[(0,N.jsx)("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Gesti\xf3n de Lotes (Ingreso de Stock)"}),(0,N.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,N.jsx)("input",{type:"number",value:h,onChange:e=>y(parseInt(e.target.value)||0),placeholder:"Cantidad",min:"1",className:"w-32 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("input",{type:"date",value:b,onChange:e=>k(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("button",{type:"button",onClick:()=>{if(h>0&&b){const e={id:Date.now(),quantity:h,expiryDate:b};i((t=>d(d({},t),{},{lots:[...t.lots,e].sort(((e,t)=>new Date(e.expiryDate)-new Date(t.expiryDate)))}))),y(0),k("")}},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agregar Lote"})]}),o.lots.length>0?(0,N.jsx)("div",{className:"bg-gray-50 p-4 rounded-md dark:bg-gray-700",children:(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Cantidad"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Fecha Vencimiento"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acci\xf3n"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:o.lots.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900",children:(0,N.jsx)("input",{type:"number",min:"0",value:e.quantity,onChange:t=>{return r=e.id,a=t.target.value,void i((e=>d(d({},e),{},{lots:e.lots.map((e=>e.id===r?d(d({},e),{},{quantity:parseInt(a)||0}):e))})));var r,a},className:"w-20 px-2 py-1 border border-gray-300 rounded-md text-center dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),(0,N.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.expiryDate}),(0,N.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium",children:(0,N.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void i((e=>d(d({},e),{},{lots:e.lots.filter((e=>e.id!==t))})));var t},className:"text-red-600 hover:text-red-900",children:"Eliminar"})})]},e.id)))})]})}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay lotes agregados para este producto."})]}),(0,N.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,N.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600",children:"Cancelar"}),(0,N.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:r?"Actualizar":"Guardar"})]})]})]})},C=e=>{let{products:t,onEdit:r,onDelete:a}=e;return(0,N.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg dark:bg-gray-800",children:(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Producto"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Categor\xeda"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Unidad"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Precio"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Stock"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Alertas"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acciones"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:t.sort(((e,t)=>e.name.localeCompare(t.name))).map((e=>{const t=(e=>{if(!e||0===e.length)return null;const t=new Date,r=new Date;r.setDate(t.getDate()+30);const a=e.filter((e=>new Date(e.expiryDate)>t&&new Date(e.expiryDate)<=r&&e.quantity>0));return e.filter((e=>new Date(e.expiryDate)<=t&&e.quantity>0)).length>0?"expired":a.length>0?"soon":null})(e.lots);return(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsxs)("div",{className:"flex items-center",children:[e.image&&(0,N.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,N.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.image,alt:e.name})}),(0,N.jsxs)("div",{className:"ml-4",children:[(0,N.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name}),(0,N.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.barcode})]})]})}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.category}),(0,N.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.subcategory})]}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.unit})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:["$",e.price.toFixed(2)]})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.stock})}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["expired"===t&&(0,N.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Vencido"}),"soon"===t&&(0,N.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Por vencer"}),e.stock<=e.minStock&&e.minStock>0&&(0,N.jsx)("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-orange-100 text-orange-800",children:"Bajo Stock"})]}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,N.jsx)("button",{onClick:()=>r(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Editar"}),(0,N.jsx)("button",{onClick:()=>a(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id)}))})]})})},E=e=>{let{products:t}=e;const r=t.filter((e=>e.stock<=e.minStock&&e.minStock>0)),a=new Date,n=new Date;n.setDate(a.getDate()+30);const l=t.filter((e=>e.lots&&e.lots.some((e=>new Date(e.expiryDate)<=a&&e.quantity>0)))),s=t.filter((e=>e.lots&&e.lots.some((e=>new Date(e.expiryDate)>a&&new Date(e.expiryDate)<=n&&e.quantity>0))));return 0===r.length&&0===l.length&&0===s.length?null:(0,N.jsxs)("div",{className:"mb-6",children:[r.length>0&&(0,N.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4 dark:bg-yellow-800 dark:border-yellow-600 dark:text-yellow-100",children:(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("svg",{className:"h-5 w-5 text-yellow-400 dark:text-yellow-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,N.jsxs)("div",{className:"ml-3",children:[(0,N.jsx)("h3",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-100",children:"Productos con bajo stock"}),(0,N.jsx)("div",{className:"mt-2 text-sm text-yellow-700 dark:text-yellow-200",children:(0,N.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:r.map((e=>(0,N.jsxs)("li",{children:[e.name," (Stock: ",e.stock,", M\xednimo: ",e.minStock,")"]},e.id)))})})]})]})}),s.length>0&&(0,N.jsx)("div",{className:"bg-orange-50 border-l-4 border-orange-400 p-4 mb-4 dark:bg-orange-800 dark:border-orange-600 dark:text-orange-100",children:(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("svg",{className:"h-5 w-5 text-orange-400 dark:text-orange-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,N.jsxs)("div",{className:"ml-3",children:[(0,N.jsx)("h3",{className:"text-sm font-medium text-orange-800 dark:text-orange-100",children:"Productos por vencer (30 d\xedas)"}),(0,N.jsx)("div",{className:"mt-2 text-sm text-orange-700 dark:text-orange-200",children:(0,N.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:s.map((e=>(0,N.jsxs)("li",{children:[e.name," (Lotes: ",e.lots.filter((e=>new Date(e.expiryDate)>a&&new Date(e.expiryDate)<=n&&e.quantity>0)).map((e=>"".concat(e.quantity,"u. vence ").concat(e.expiryDate))).join(", "),")"]},e.id)))})})]})]})}),l.length>0&&(0,N.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 dark:bg-red-800 dark:border-red-600 dark:text-red-100",children:(0,N.jsxs)("div",{className:"flex",children:[(0,N.jsx)("div",{className:"flex-shrink-0",children:(0,N.jsx)("svg",{className:"h-5 w-5 text-red-400 dark:text-red-300",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,N.jsxs)("div",{className:"ml-3",children:[(0,N.jsx)("h3",{className:"text-sm font-medium text-red-800 dark:text-red-100",children:"Productos vencidos"}),(0,N.jsx)("div",{className:"mt-2 text-sm text-red-700 dark:text-red-200",children:(0,N.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:l.map((e=>(0,N.jsxs)("li",{children:[e.name," (Lotes: ",e.lots.filter((e=>new Date(e.expiryDate)<=a&&e.quantity>0)).map((e=>"".concat(e.quantity,"u. vencido el ").concat(e.expiryDate))).join(", "),")"]},e.id)))})})]})]})})]})},P=e=>{let{isOnline:t,selectedMarket:r}=e;const[n,l]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[i,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[h,b]=(0,a.useState)(null),[w,P]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{const e=await p("products"),t=v()?r:j(),a=v()&&r?e.filter((e=>e.marketId===r)):e.filter((e=>e.marketId===t));l(a),o(a);const n=JSON.parse(localStorage.getItem("categories"))||["Alimentos","Bebidas","Limpieza","Fiambres"];c(n)})()}),[r]),(0,a.useEffect)((()=>{const e=n.filter((e=>e.name.toLowerCase().includes(w.toLowerCase())||e.barcode&&e.barcode.includes(w)));o(e)}),[w,n]);const D=async e=>{const t=v()?r:j(),a=e.filter((e=>e.marketId===t));l(a),o(a.filter((e=>e.name.toLowerCase().includes(w.toLowerCase())||e.barcode&&e.barcode.includes(w))));const n=[...(await p("products")).filter((e=>e.marketId!==t)),...a];for(const r of n)await g("products",r);y("products",n)};return v()||k()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Gesti\xf3n de Productos"}),(v()||k())&&(0,N.jsx)("button",{onClick:()=>{b(null),m(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Agregar Producto"}),(0,N.jsx)(E,{products:s}),u&&(0,N.jsx)(S,{categories:i,product:h,onAddProduct:async e=>{const t=v()?e.marketId:j(),r=d(d({},e),{},{marketId:t}),a=[...await p("products"),r];await f("products",r),D(a),m(!1)},onUpdateProduct:async e=>{const t=(await p("products")).map((t=>t.id===e.id?e:t));await g("products",e),D(t),b(null),m(!1)},onCancel:()=>m(!1)}),(0,N.jsx)("div",{className:"mb-4",children:(0,N.jsx)("input",{type:"text",value:w,onChange:e=>P(e.target.value),placeholder:"Buscar productos por nombre o c\xf3digo de barras...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),(0,N.jsx)(C,{products:s,onEdit:e=>{b(e),m(!0)},onDelete:async e=>{await x("products",e);const t=await p("products");D(t)}})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},D=e=>{let{customers:t,onSelectCustomer:r,onClose:n}=e;const[l,s]=(0,a.useState)(""),[o,i]=(0,a.useState)([]);return(0,a.useEffect)((()=>{if(l.length>1){const e=t.filter((e=>e.name.toLowerCase().includes(l.toLowerCase())||e.lastName.toLowerCase().includes(l.toLowerCase())||e.dni.includes(l)));i(e)}else i([])}),[l,t]),(0,N.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-lg dark:bg-gray-800",children:[(0,N.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Buscar Cliente para Cuenta Corriente"}),(0,N.jsx)("button",{onClick:n,className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,N.jsx)("input",{type:"text",value:l,onChange:e=>s(e.target.value),placeholder:"Buscar por nombre, apellido o DNI...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 mb-4 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),o.length>0?(0,N.jsx)("ul",{className:"max-h-60 overflow-y-auto border border-gray-200 rounded-md dark:border-gray-600",children:o.map((e=>(0,N.jsxs)("li",{className:"px-4 py-3 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0 dark:hover:bg-gray-600 dark:border-gray-700 dark:text-gray-200",onClick:()=>r(e),children:[(0,N.jsxs)("div",{className:"font-medium",children:[e.name," ",e.lastName]}),(0,N.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["DNI: ",e.dni," | Tel: ",e.phone]})]},e.id)))}):l.length>1&&(0,N.jsx)("p",{className:"text-gray-500 text-center dark:text-gray-400",children:"No se encontraron clientes."}),l.length<=1&&(0,N.jsx)("p",{className:"text-gray-500 text-center dark:text-gray-400",children:"Ingresa al menos 2 caracteres para buscar."})]})})},_=e=>{let{products:t,onAddSale:r,onCancel:n}=e;const[l,s]=(0,a.useState)([]),[o,i]=(0,a.useState)(""),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(null),[f,g]=(0,a.useState)(1),[x,h]=(0,a.useState)(""),[y,b]=(0,a.useState)("cash"),[v,k]=(0,a.useState)("ticket"),[w,S]=(0,a.useState)(0),[C,E]=(0,a.useState)(!1),[P,_]=(0,a.useState)(null),[M,z]=(0,a.useState)([]),[I,L]=(0,a.useState)({type:"",text:""}),T=(0,a.useRef)(null),[F,R]=(0,a.useState)(0),O=(0,a.useRef)(null);(0,a.useEffect)((()=>{(async()=>{const e=await p("customers"),t=j(),r=e.filter((e=>e.marketId===t));z(r)})()}),[]),(0,a.useEffect)((()=>{if(o.length>1){const e=t.filter((e=>(e.name.toLowerCase().includes(o.toLowerCase())||e.barcode&&e.barcode.includes(o))&&e.stock>0&&!l.some((t=>t.productId===e.id))));c(e)}else c([])}),[o,t,l]);const A=()=>l.reduce(((e,t)=>e+t.subtotal),0),$=()=>A()/1.21,U=()=>A()-$(),B=()=>"cash"===y?w-A():0,V=e=>{const t=window.open("","_blank");let r="\n      <html>\n      <head>\n        <title>Ticket de Venta</title>\n        <style>\n          body { font-family: 'Courier New', monospace; font-size: 12px; width: 58mm; margin: 0 auto; padding: 5mm; }\n          .header, .footer { text-align: center; margin-bottom: 5mm; }\n          .items { width: 100%; border-collapse: collapse; margin-bottom: 5mm; }\n          .items th, .items td { padding: 1mm 0; text-align: left; }\n          .items th { border-bottom: 1px dashed #000; }\n          .total { text-align: right; font-weight: bold; margin-top: 2mm; }\n          .line { border-top: 1px dashed #000; margin: 2mm 0; }\n        </style>\n      </head>\n      <body>\n        <div class=\"header\">\n          <h3>MINIMARKET PRO</h3>\n          <p>Ticket de ".concat("ticket"===e.invoiceType?"Venta":"Factura ".concat(e.invoiceType),"</p>\n          <p>Fecha: ").concat(new Date(e.date).toLocaleString(),"</p>\n          <p>Cliente: ").concat(e.customerName||"Consumidor Final",'</p>\n          <div class="line"></div>\n        </div>\n        \n        <table class="items">\n          <thead>\n            <tr>\n              <th>Producto</th>\n              <th>Cant.</th>\n              <th>Precio</th>\n              <th>Total</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(e.items.map((e=>"\n              <tr>\n                <td>".concat(e.name,"</td>\n                <td>").concat(e.quantity," ").concat("kg"===e.unit?"kg":"gr"===e.unit?"gr":"","</td>\n                <td>$").concat(e.price.toFixed(2),"</td>\n                <td>$").concat(e.subtotal.toFixed(2),"</td>\n              </tr>\n            "))).join(""),'\n          </tbody>\n        </table>\n        <div class="line"></div>\n        <div class="total">\n          <p>Subtotal: $').concat(e.subtotal.toFixed(2),"</p>\n          <p>IVA (21%): $").concat(e.tax.toFixed(2),"</p>\n          <p>TOTAL: $").concat(e.total.toFixed(2),"</p>\n          <p>M\xe9todo de Pago: ").concat(e.paymentMethod,"</p>\n          ").concat("cash"===e.paymentMethod?"<p>Efectivo Recibido: $".concat(w.toFixed(2),"</p><p>Cambio: $").concat(B().toFixed(2),"</p>"):"",'\n        </div>\n        <div class="line"></div>\n        <div class="footer">\n          <p>\xa1Gracias por su compra!</p>\n        </div>\n      </body>\n      </html>\n    ');t.document.write(r),t.document.close(),t.print()};return(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:"Nueva Venta"}),(0,N.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),L({type:"",text:""}),0===l.length)return void L({type:"error",text:"No hay productos en el carrito."});if("cash"===y&&w<A())return void L({type:"error",text:"El efectivo recibido es insuficiente."});if("current_account"===y&&!P)return void L({type:"error",text:"Debe seleccionar un cliente para la cuenta corriente."});const t=A(),a=$(),n=U(),o={id:Date.now(),date:(new Date).toISOString(),customerName:P?"".concat(P.name," ").concat(P.lastName):x,customerDNI:P?P.dni:null,paymentMethod:y,invoiceType:v,items:l,total:t,tax:n,subtotal:a,marketId:j()};try{r(o),L("current_account"===y?{type:"success",text:"Venta agregada con \xe9xito a la cuenta corriente de ".concat(P.name," ").concat(P.lastName,".")}:{type:"success",text:"Venta finalizada con \xe9xito."}),V(o),s([]),i(""),m(null),g(1),R(0),h(""),b("cash"),k("ticket"),S(0),_(null)}catch(d){L({type:"error",text:"No fue posible agregar la venta: ".concat(d.message||"Error desconocido")})}},children:[I.text&&(0,N.jsx)("div",{className:"p-3 mb-4 rounded-md ".concat("success"===I.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:I.text}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre del Cliente (Opcional)"}),(0,N.jsx)("input",{type:"text",value:P?"".concat(P.name," ").concat(P.lastName):x,onChange:e=>h(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",placeholder:"Consumidor Final",readOnly:!!P})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tipo de Comprobante"}),(0,N.jsxs)("select",{value:v,onChange:e=>k(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,N.jsx)("option",{value:"ticket",children:"Ticket"}),(0,N.jsx)("option",{value:"A",children:"Factura A"}),(0,N.jsx)("option",{value:"B",children:"Factura B"}),(0,N.jsx)("option",{value:"C",children:"Factura C"})]})]})]}),(0,N.jsxs)("div",{className:"mb-6",children:[(0,N.jsx)("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Agregar Productos"}),(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Escanear C\xf3digo de Barras"}),(0,N.jsx)("input",{type:"text",ref:T,onKeyDown:e=>{if("Enter"===e.key){const r=e.target.value,a=t.find((e=>e.barcode===r));a?(m(a),i(a.name),g(1),R(0),c([]),T.current.value="","gramos"===a.unit&&O.current&&O.current.focus()):L({type:"error",text:"Producto con c\xf3digo ".concat(r," no encontrado.")})}},placeholder:"Escanear producto...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 mb-2 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"O buscar por nombre"}),(0,N.jsx)("input",{type:"text",value:o,onChange:e=>{i(e.target.value),m(null)},placeholder:"Buscar producto por nombre...",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),d.length>0&&(0,N.jsx)("div",{className:"absolute z-10 mt-1 w-full bg-white shadow-lg rounded-md max-h-60 overflow-auto dark:bg-gray-700",children:d.map((e=>(0,N.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer ".concat((null===u||void 0===u?void 0:u.id)===e.id?"bg-blue-50":""," dark:hover:bg-gray-600 dark:text-gray-200"),onClick:()=>{m(e),i(e.name),c([])},children:[(0,N.jsx)("div",{className:"font-medium",children:e.name}),(0,N.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",e.price.toFixed(2)," | Stock: ",e.stock," | ",e.barcode]})]},e.id)))})]}),u&&(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Producto seleccionado"}),(0,N.jsxs)("div",{className:"p-2 bg-gray-50 rounded-md dark:bg-gray-700",children:[(0,N.jsx)("div",{className:"font-medium text-gray-800 dark:text-white",children:u.name}),(0,N.jsxs)("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["$",u.price.toFixed(2)]}),(0,N.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Stock: ",u.stock]}),u.lots&&u.lots.length>0&&(0,N.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Vencimiento m\xe1s pr\xf3ximo: ",u.lots[0].expiryDate]})]})]}),"gramos"===u.unit?(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Peso (gramos)"}),(0,N.jsx)("input",{type:"number",min:"0",step:"1",value:F,onChange:e=>R(parseFloat(e.target.value)||0),ref:O,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-1",children:["Precio estimado: $",(u.price/1e3*F).toFixed(2)]})]}):(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cantidad"}),(0,N.jsx)("input",{type:"number",min:"1",max:u.stock,value:f,onChange:e=>g(Math.min(u.stock,parseInt(e.target.value)||1)),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,N.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,N.jsx)("button",{type:"button",onClick:()=>{if(!u)return void L({type:"error",text:"Debe seleccionar un producto."});let e=f,t=u.price,r=u.price*f,a=u.unit;if("gramos"===u.unit){if(F<=0)return void L({type:"error",text:"Debe ingresar un peso v\xe1lido para productos por gramo."});e=F,t=u.price,r=u.price/1e3*F,a="kg"}else{if(f<=0)return void L({type:"error",text:"Debe ingresar una cantidad v\xe1lida."});if(f>u.stock)return void L({type:"error",text:"No hay suficiente stock para ".concat(u.name,". Stock actual: ").concat(u.stock)})}const n={productId:u.id,name:u.name,price:t,quantity:e,subtotal:r,lots:u.lots,unit:a};s([...l,n]),m(null),i(""),g(1),R(0),c([]),L({type:"",text:""})},className:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agregar al Carrito"}),(0,N.jsx)("button",{type:"button",onClick:()=>{u?alert("El precio de ".concat(u.name," es $").concat(u.price.toFixed(2),".")):alert("Por favor, selecciona un producto para consultar su precio.")},className:"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-700 dark:text-gray-200 dark:hover:bg-gray-600",children:"Consultar Precio"})]})]})]})]}),l.length>0&&(0,N.jsxs)("div",{className:"mb-6",children:[(0,N.jsx)("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Productos en Carrito"}),(0,N.jsx)("div",{className:"bg-gray-50 p-4 rounded-md dark:bg-gray-700",children:(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Producto"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Precio Unit."}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Cantidad"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Subtotal"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acci\xf3n"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:l.map(((e,t)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.name}),(0,N.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",e.price.toFixed(2)]}),(0,N.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:[e.quantity," ","gramos"===e.unit?"gr":""]}),(0,N.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",e.subtotal.toFixed(2)]}),(0,N.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium",children:(0,N.jsx)("button",{type:"button",onClick:()=>(e=>{const t=[...l];t.splice(e,1),s(t)})(t),className:"text-red-600 hover:text-red-900",children:"Eliminar"})})]},t)))}),(0,N.jsxs)("tfoot",{children:[(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{colSpan:"3",className:"px-4 py-2 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"Subtotal (sin IVA):"}),(0,N.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["$",$().toFixed(2)]}),(0,N.jsx)("td",{})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{colSpan:"3",className:"px-4 py-2 text-right text-sm font-medium text-gray-700 dark:text-gray-300",children:"IVA (21%):"}),(0,N.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:["$",U().toFixed(2)]}),(0,N.jsx)("td",{})]}),(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{colSpan:"3",className:"px-4 py-2 text-right text-lg font-bold text-gray-800 dark:text-white",children:"Total:"}),(0,N.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-lg font-bold text-gray-900 dark:text-white",children:["$",A().toFixed(2)]}),(0,N.jsx)("td",{})]})]})]})})]}),(0,N.jsxs)("div",{className:"mb-6",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"M\xe9todo de Pago"}),(0,N.jsxs)("select",{value:y,onChange:e=>{const t=e.target.value;b(t),S(0),"current_account"===t?E(!0):_(null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,N.jsx)("option",{value:"cash",children:"Efectivo"}),(0,N.jsx)("option",{value:"debit",children:"D\xe9bito"}),(0,N.jsx)("option",{value:"credit",children:"Cr\xe9dito"}),(0,N.jsx)("option",{value:"mp",children:"Mercado Pago"}),(0,N.jsx)("option",{value:"current_account",children:"Cuenta Corriente"})]})]}),"cash"===y&&(0,N.jsxs)("div",{className:"mb-6",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Efectivo Recibido"}),(0,N.jsx)("input",{type:"number",min:"0",step:"0.01",value:w,onChange:e=>S(parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsxs)("p",{className:"text-lg font-bold text-right mt-2 text-gray-800 dark:text-white",children:["Cambio: $",B().toFixed(2)]})]}),(0,N.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,N.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600",children:"Cancelar"}),(0,N.jsx)("button",{type:"submit",disabled:0===l.length||"cash"===y&&w<A()||"current_account"===y&&!P,className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white ".concat(0===l.length||"cash"===y&&w<A()||"current_account"===y&&!P?"bg-gray-400":"bg-green-600 hover:bg-green-700"," focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"),children:"Finalizar Venta"})]})]}),C&&(0,N.jsx)(D,{customers:M,onSelectCustomer:e=>{_(e),E(!1)},onClose:()=>{E(!1),b("cash")}})]})},M=e=>{let{sales:t,products:r}=e;return 0===t.length?(0,N.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay ventas registradas"})}):(0,N.jsx)("div",{className:"bg-white shadow overflow-hidden sm:rounded-lg dark:bg-gray-800",children:(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Fecha"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Cliente"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Productos"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Total"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Pago"}),(0,N.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Comprobante"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:t.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString()}),(0,N.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:new Date(e.date).toLocaleTimeString()})]}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.customerName||"Consumidor Final"})}),(0,N.jsxs)("td",{className:"px-6 py-4",children:[(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.items.map((e=>e.name)).join(", ")}),(0,N.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.items.reduce(((e,t)=>e+t.quantity),0)," unidades"]})]}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:["$",e.total.toFixed(2)]})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:["cash"===e.paymentMethod&&"Efectivo","debit"===e.paymentMethod&&"D\xe9bito","credit"===e.paymentMethod&&"Cr\xe9dito","mp"===e.paymentMethod&&"Mercado Pago","current_account"===e.paymentMethod&&"Cuenta Corriente","paid_current_account"===e.paymentMethod&&"Cta. Cte. Pagada"]})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsxs)("div",{className:"text-sm text-gray-900 dark:text-white",children:["ticket"===e.invoiceType&&"Ticket","A"===e.invoiceType&&"Factura A","B"===e.invoiceType&&"Factura B","C"===e.invoiceType&&"Factura C"]})})]},e.id)))})]})})},z=e=>{let{isOnline:t,selectedMarket:r}=e;const[n,l]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[i,c]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{const e=await p("sales"),t=await p("products"),a=v()?r:j(),n=v()&&r?e.filter((e=>e.marketId===r)):e.filter((e=>e.marketId===a)),s=v()&&r?t.filter((e=>e.marketId===r)):t.filter((e=>e.marketId===a));l(n),o(s)})()}),[r]);return v()||k()||w()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Gesti\xf3n de Ventas"}),(v()||k()||w())&&(0,N.jsx)("button",{onClick:()=>c(!0),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Nueva Venta"}),i&&(0,N.jsx)(_,{products:s,onAddSale:async e=>{const t=[...n,e];await g("sales",e),(async e=>{l(e),y("sales",e)})(t);const a=(await p("products")).map((t=>{const r=e.items.find((e=>e.productId===t.id));if(r){let e=r.quantity;const a=[...t.lots].sort(((e,t)=>new Date(e.expiryDate)-new Date(t.expiryDate))),n=[];for(let t=0;t<a.length&&e>0;t++){const r=d({},a[t]);r.quantity>=e?(r.quantity-=e,e=0):(e-=r.quantity,r.quantity=0),n.push(r)}const l=n.filter((e=>e.quantity>0)),s=l.reduce(((e,t)=>e+t.quantity),0);return d(d({},t),{},{stock:s,lots:l})}return t}));for(const r of a)await g("products",r);y("products",a),o(a.filter((e=>e.marketId===(v()?r:j())))),c(!1)},onCancel:()=>c(!1)}),(0,N.jsx)(M,{sales:n,products:s})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},I=e=>{let{sales:t}=e;const r=(()=>{const e={};return t.forEach((t=>{const r=new Date(t.date).toLocaleDateString();e[r]?e[r]+=t.total:e[r]=t.total})),Object.entries(e).map((e=>{let[t,r]=e;return{date:t,total:parseFloat(r.toFixed(2))}}))})();return(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Ventas por D\xeda"}),r.length>0?(0,N.jsx)("div",{className:"space-y-3",children:r.map(((e,t)=>(0,N.jsxs)("div",{children:[(0,N.jsxs)("div",{className:"flex justify-between text-sm mb-1",children:[(0,N.jsx)("span",{children:e.date}),(0,N.jsxs)("span",{children:["$",e.total.toFixed(2)]})]}),(0,N.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,N.jsx)("div",{className:"bg-blue-600 h-2 rounded-full",style:{width:"".concat(Math.min(100,e.total/Math.max(...r.map((e=>e.total)))*100),"%")}})})]},t)))}):(0,N.jsx)("p",{className:"text-gray-500",children:"No hay datos de ventas para mostrar"})]})},L=e=>{let{topProducts:t}=e;return(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-4",children:"Productos m\xe1s vendidos"}),t.length>0?(0,N.jsx)("div",{className:"space-y-3",children:t.map(((e,r)=>(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)("div",{className:"w-8 text-sm font-medium text-gray-500",children:r+1}),(0,N.jsxs)("div",{className:"flex-1 ml-2",children:[(0,N.jsx)("div",{className:"text-sm font-medium",children:e.name}),(0,N.jsx)("div",{className:"flex items-center",children:(0,N.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,N.jsx)("div",{className:"bg-green-600 h-2 rounded-full",style:{width:"".concat(e.quantity/t[0].quantity*100,"%")}})})})]}),(0,N.jsxs)("div",{className:"ml-2 text-sm font-medium",children:[e.quantity," un. ($",e.revenue.toFixed(2),")"]})]},e.id)))}):(0,N.jsx)("p",{className:"text-gray-500",children:"No hay datos de productos para mostrar"})]})},T=e=>{let{sales:t,products:r}=e;const a=(()=>{const e={totalSales:0,totalTax:0,totalSubtotal:0,totalProfit:0,totalCost:0};return 0===t.length||0===r.length||(t.forEach((t=>{e.totalSales+=t.total,e.totalTax+=t.tax,e.totalSubtotal+=t.subtotal,t.items.forEach((t=>{const a=r.find((e=>e.id===t.productId));a&&(e.totalCost+=a.cost*t.quantity)}))})),e.totalProfit=e.totalSubtotal-e.totalCost,e.totalSales=parseFloat(e.totalSales.toFixed(2)),e.totalTax=parseFloat(e.totalTax.toFixed(2)),e.totalSubtotal=parseFloat(e.totalSubtotal.toFixed(2)),e.totalCost=parseFloat(e.totalCost.toFixed(2)),e.totalProfit=parseFloat(e.totalProfit.toFixed(2))),e})();return(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,N.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[(0,N.jsx)("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Ventas Totales"}),(0,N.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["$",a.totalSales]})]}),(0,N.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[(0,N.jsx)("h4",{className:"text-sm font-medium text-purple-800 mb-1",children:"Impuestos (21%)"}),(0,N.jsxs)("p",{className:"text-2xl font-bold text-purple-600",children:["$",a.totalTax]})]}),(0,N.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-100",children:[(0,N.jsx)("h4",{className:"text-sm font-medium text-green-800 mb-1",children:"Ganancias"}),(0,N.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:["$",a.totalProfit]})]}),(0,N.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-100",children:[(0,N.jsx)("h4",{className:"text-sm font-medium text-red-800 mb-1",children:"Costos"}),(0,N.jsxs)("p",{className:"text-2xl font-bold text-red-600",children:["$",a.totalCost]})]})]})},F=e=>{let{selectedMarket:t}=e;const[r,n]=(0,a.useState)([]),[l,s]=(0,a.useState)([]),[o,i]=(0,a.useState)([]),[c,u]=(0,a.useState)([]),[m,f]=(0,a.useState)("day"),[g,x]=(0,a.useState)({cash:0,debit:0,credit:0,transfer:0,mp:0,current_account:0,paid_current_account:0});(0,a.useEffect)((()=>{(async()=>{const e=await p("sales"),r=await p("products"),a=await p("customers"),l=await p("cashMovements_".concat(j())),o=v()?t:j(),d=v()&&t?e.filter((e=>e.marketId===t)):e.filter((e=>e.marketId===o)),c=v()&&t?r.filter((e=>e.marketId===t)):r.filter((e=>e.marketId===o)),f=v()&&t?a.filter((e=>e.marketId===t)):a.filter((e=>e.marketId===o)),g=l.filter((e=>e.marketId===o)),h=new Date,y=d.filter((e=>{const t=new Date(e.date);if("day"===m)return t.toDateString()===h.toDateString();if("week"===m){const e=new Date(h);return e.setDate(e.getDate()-7),t>=e}if("month"===m){const e=new Date(h);return e.setMonth(e.getMonth()-1),t>=e}if("year"===m){const e=new Date(h);return e.setFullYear(e.getFullYear()-1),t>=e}return!0})),b={cash:0,debit:0,credit:0,transfer:0,mp:0,current_account:0,paid_current_account:0};y.forEach((e=>{b[e.paymentMethod]+=e.total})),x(b),n(y),s(c),i(f),u(g)})()}),[t,m]);const h=()=>{const e={};return r.forEach((t=>{t.items.forEach((t=>{e[t.productId]||(e[t.productId]={quantity:0,revenue:0,name:t.name}),e[t.productId].quantity+=t.quantity,e[t.productId].revenue+=t.subtotal}))})),Object.entries(e).map((e=>{let[t,r]=e;return d({id:t},r)})).sort(((e,t)=>t.quantity-e.quantity)).slice(0,5)},y=()=>{const e={};return r.forEach((t=>{t.customerName&&"Consumidor Final"!==t.customerName&&(e[t.customerName]||(e[t.customerName]={totalSpent:0,visitCount:0,name:t.customerName,dni:t.customerDNI}),e[t.customerName].totalSpent+=t.total,e[t.customerName].visitCount+=1)})),Object.values(e).sort(((e,t)=>t.totalSpent-e.totalSpent)).slice(0,5)},b=e=>{if("sales"===e)((e,t,r)=>{const a={cash:{label:"Efectivo",total:0,count:0},debit:{label:"D\xe9bito",total:0,count:0},credit:{label:"Cr\xe9dito",total:0,count:0},mp:{label:"Mercado Pago",total:0,count:0},current_account:{label:"Cuenta Corriente",total:0,count:0},paid_current_account:{label:"Cta. Cte. Pagada",total:0,count:0}};e.forEach((e=>{a[e.paymentMethod].total+=e.total,a[e.paymentMethod].count+=1}));const n=window.open("","_blank"),l="Reporte de Ventas ".concat("day"===r?"Diario":"week"===r?"Semanal":"month"===r?"Mensual":"Anual"),s=e.reduce(((e,t)=>e+t.total),0),o=e.reduce(((e,t)=>e+t.items.reduce(((e,t)=>e+t.quantity),0)),0),i="day"===r?"Fecha: ".concat((new Date).toLocaleDateString()):"Desde: ".concat(new Date("week"===r?(new Date).setDate((new Date).getDate()-7):"month"===r?(new Date).setMonth((new Date).getMonth()-1):(new Date).setFullYear((new Date).getFullYear()-1)).toLocaleDateString()," - Hasta: ").concat((new Date).toLocaleDateString());let d="\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>".concat(l,'</title>\n      <style>\n        body { font-family: Arial, sans-serif; margin: 40px; }\n        h1 { color: #333; text-align: center; }\n        .header { text-align: center; margin-bottom: 30px; }\n        .summary { margin-bottom: 20px; }\n        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n        th { background-color: #f2f2f2; }\n        .payment-methods { margin: 20px 0; }\n        .payment-method { display: flex; justify-content: space-between; margin-bottom: 8px; }\n        .payment-total { font-weight: bold; border-top: 2px solid #333; padding-top: 8px; }\n        .top-products { margin-top: 30px; }\n        .footer { margin-top: 30px; text-align: right; font-size: 12px; color: #666; }\n      </style>\n    </head>\n    <body>\n      <div class="header">\n        <h1>').concat(l,"</h1>\n        <p>MiniMarket Pro - CRM para Minimercados</p>\n        <p>").concat(i,'</p>\n      </div>\n      \n      <div class="summary">\n        <h2>Resumen General</h2>\n        <p><strong>Ventas Totales:</strong> ').concat(e.length,"</p>\n        <p><strong>Productos Vendidos:</strong> ").concat(o," unidades</p>\n        <p><strong>Monto Total:</strong> $").concat(s.toFixed(2),'</p>\n      </div>\n      \n      <div class="payment-methods">\n        <h2>Medios de Pago</h2>\n        ').concat(Object.values(a).map((e=>'\n          <div class="payment-method">\n            <span>'.concat(e.label,":</span>\n            <span>").concat(e.count," ventas - $").concat(e.total.toFixed(2),"</span>\n          </div>\n        "))).join(""),'\n        <div class="payment-method payment-total">\n          <span>TOTAL:</span>\n          <span>$').concat(s.toFixed(2),"</span>\n        </div>\n      </div>\n      \n      <h2>Ventas Detalladas</h2>\n      <table>\n        <thead>\n          <tr>\n            <th>Fecha</th>\n            <th>Cliente</th>\n            <th>Productos</th>\n            <th>Cantidad</th>\n            <th>Total</th>\n            <th>M\xe9todo Pago</th>\n            <th>Comprobante</th>\n          </tr>\n        </thead>\n        <tbody>\n          ").concat(e.map((e=>"\n            <tr>\n              <td>".concat(new Date(e.date).toLocaleDateString(),"</td>\n              <td>").concat(e.customerName||"Consumidor Final","</td>\n              <td>").concat(e.items.map((e=>e.name)).join(", "),"</td>\n              <td>").concat(e.items.reduce(((e,t)=>e+t.quantity),0),"</td>\n              <td>$").concat(e.total.toFixed(2),"</td>\n              <td>").concat("cash"===e.paymentMethod?"Efectivo":"debit"===e.paymentMethod?"D\xe9bito":"credit"===e.paymentMethod?"Cr\xe9dito":"mp"===e.paymentMethod?"Mercado Pago":"current_account"===e.paymentMethod?"Cuenta Corriente":"Cta. Cte. Pagada","</td>\n              <td>").concat("ticket"===e.invoiceType?"Ticket":"A"===e.invoiceType?"Factura A":"B"===e.invoiceType?"Factura B":"Factura C","</td>\n            </tr>\n          "))).join(""),'\n        </tbody>\n      </table>\n      \n      <div class="top-products">\n        <h2>Productos m\xe1s vendidos</h2>\n        <table>\n          <thead>\n            <tr>\n              <th>Producto</th>\n              <th>Cantidad</th>\n              <th>Ventas ($)</th>\n            </tr>\n          </thead>\n          <tbody>\n            ').concat(t.map((e=>"\n              <tr>\n                <td>".concat(e.name,"</td>\n                <td>").concat(e.quantity," unidades</td>\n                <td>$").concat(e.revenue.toFixed(2),"</td>\n              </tr>\n            "))).join(""),'\n          </tbody>\n        </table>\n      </div>\n      \n      <div class="footer">\n        <p>Generado el ').concat((new Date).toLocaleString(),"</p>\n      </div>\n    </body>\n    </html>\n  ");n.document.write(d),n.document.close()})(r,h(),m);else if("cashRegister"===e)((e,t)=>{const r=window.open("","_blank"),a="Reporte de Caja ".concat("day"===t?"Diario":"week"===t?"Semanal":"month"===t?"Mensual":"Anual"),n=e.filter((e=>{const r=new Date(e.date),a=new Date;if("day"===t)return r.toDateString()===a.toDateString();if("week"===t){const e=new Date(a);return e.setDate(e.getDate()-7),r>=e}if("month"===t){const e=new Date(a);return e.setMonth(e.getMonth()-1),r>=e}if("year"===t){const e=new Date(a);return e.setFullYear(e.getFullYear()-1),r>=e}return!0}));let l="\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>".concat(a,'</title>\n      <style>\n        body { font-family: Arial, sans-serif; margin: 40px; }\n        h1 { color: #333; text-align: center; }\n        .header { text-align: center; margin-bottom: 30px; }\n        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n        th { background-color: #f2f2f2; }\n        .footer { margin-top: 30px; text-align: right; font-size: 12px; color: #666; }\n      </style>\n    </head>\n    <body>\n      <div class="header">\n        <h1>').concat(a,"</h1>\n        <p>MiniMarket Pro - CRM para Minimercados</p>\n        <p>Generado el ").concat((new Date).toLocaleString(),"</p>\n      </div>\n      \n      <h2>Movimientos de Caja</h2>\n      <table>\n        <thead>\n          <tr>\n            <th>Fecha</th>\n            <th>Tipo</th>\n            <th>Usuario</th>\n            <th>Total</th>\n            <th>Esperado</th>\n            <th>Diferencia</th>\n            <th>Estado</th>\n          </tr>\n        </thead>\n        <tbody>\n          ").concat(n.map((e=>"\n            <tr>\n              <td>".concat(new Date(e.date).toLocaleString(),"</td>\n              <td>").concat("opening"===e.type?"Apertura":"Cierre","</td>\n              <td>").concat(e.user,"</td>\n              <td>$").concat(e.total.toFixed(2),"</td>\n              <td>").concat(e.expectedTotal?"$".concat(e.expectedTotal.toFixed(2)):"-","</td>\n              <td>").concat(e.difference?"$".concat(e.difference.toFixed(2)):"-","</td>\n              <td>").concat("open"===e.status?"Abierta":"Cerrada","</td>\n            </tr>\n          "))).join(""),'\n        </tbody>\n      </table>\n      \n      <div class="footer">\n        <p>Generado el ').concat((new Date).toLocaleString(),"</p>\n      </div>\n    </body>\n    </html>\n  ");r.document.write(l),r.document.close()})(c,m);else if("currentAccounts"===e){const e={};r.forEach((t=>{"current_account"===t.paymentMethod&&t.customerName&&(e[t.customerName]||(e[t.customerName]={name:t.customerName,dni:t.customerDNI,address:t.customerAddress,email:t.customerEmail,phone:t.customerPhone,totalDebt:0,sales:[]}),e[t.customerName].totalDebt+=t.total,e[t.customerName].sales.push(t))})),((e,t)=>{const r=window.open("","_blank"),a="Reporte de Cuentas Corrientes ".concat("day"===t?"Diario":"week"===t?"Semanal":"month"===t?"Mensual":"Anual");let n="\n    <!DOCTYPE html>\n    <html>\n    <head>\n      <title>".concat(a,'</title>\n      <style>\n        body { font-family: Arial, sans-serif; margin: 40px; }\n        h1 { color: #333; text-align: center; }\n        .header { text-align: center; margin-bottom: 30px; }\n        table { width: 100%; border-collapse: collapse; margin-bottom: 20px; }\n        th, td { border: 1px solid #ddd; padding: 8px; text-align: left; }\n        th { background-color: #f2f2f2; }\n        .footer { margin-top: 30px; text-align: right; font-size: 12px; color: #666; }\n      </style>\n    </head>\n    <body>\n      <div class="header">\n        <h1>').concat(a,"</h1>\n        <p>MiniMarket Pro - CRM para Minimercados</p>\n        <p>Generado el ").concat((new Date).toLocaleString(),"</p>\n      </div>\n      \n      <h2>Clientes con Deuda</h2>\n      <table>\n        <thead>\n          <tr>\n            <th>Cliente</th>\n            <th>DNI</th>\n            <th>Tel\xe9fono</th>\n            <th>Deuda Total</th>\n          </tr>\n        </thead>\n        <tbody>\n          ").concat(e.map((e=>"\n            <tr>\n              <td>".concat(e.name," ").concat(e.lastName||"","</td>\n              <td>").concat(e.dni||"-","</td>\n              <td>").concat(e.phone||"-","</td>\n              <td>$").concat(e.totalDebt.toFixed(2),"</td>\n            </tr>\n          "))).join(""),'\n        </tbody>\n      </table>\n      \n      <div class="footer">\n        <p>Generado el ').concat((new Date).toLocaleString(),"</p>\n      </div>\n    </body>\n    </html>\n  ");r.document.write(n),r.document.close()})(Object.values(e),m)}};return v()||k()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Reportes y Estad\xedsticas"}),(0,N.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,N.jsxs)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white",children:["Reporte ",(()=>{switch(m){case"day":return"Diario";case"week":return"Semanal";case"month":return"Mensual";case"year":return"Anual";case"all":return"Hist\xf3rico";default:return""}})()," - ",r.length," ventas registradas"]}),(0,N.jsxs)("div",{className:"flex space-x-2",children:[(0,N.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,N.jsx)("option",{value:"day",children:"Hoy"}),(0,N.jsx)("option",{value:"week",children:"\xdaltima semana"}),(0,N.jsx)("option",{value:"month",children:"\xdaltimo mes"}),(0,N.jsx)("option",{value:"year",children:"\xdaltimo a\xf1o"}),(0,N.jsx)("option",{value:"all",children:"Todos"})]}),(0,N.jsxs)("div",{className:"relative group",children:[(0,N.jsx)("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Exportar PDF"}),(0,N.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 dark:bg-gray-700",children:[(0,N.jsx)("button",{onClick:()=>b("sales"),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Reporte de Ventas"}),(0,N.jsx)("button",{onClick:()=>b("cashRegister"),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Cierre de Caja"}),(0,N.jsx)("button",{onClick:()=>b("currentAccounts"),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Cuentas Corrientes"})]})]})]})]}),(0,N.jsx)(T,{sales:r,products:l}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Resumen de Pagos"}),(0,N.jsxs)("div",{className:"space-y-3",children:[(0,N.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("span",{children:"Efectivo:"}),(0,N.jsxs)("span",{className:"font-medium",children:["$",g.cash.toFixed(2)]})]}),(0,N.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("span",{children:"Tarjeta de D\xe9bito:"}),(0,N.jsxs)("span",{className:"font-medium",children:["$",g.debit.toFixed(2)]})]}),(0,N.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("span",{children:"Tarjeta de Cr\xe9dito:"}),(0,N.jsxs)("span",{className:"font-medium",children:["$",g.credit.toFixed(2)]})]}),(0,N.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("span",{children:"Mercado Pago:"}),(0,N.jsxs)("span",{className:"font-medium",children:["$",g.mp.toFixed(2)]})]}),(0,N.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("span",{children:"Cuenta Corriente:"}),(0,N.jsxs)("span",{className:"font-medium",children:["$",g.current_account.toFixed(2)]})]}),(0,N.jsxs)("div",{className:"flex justify-between text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("span",{children:"Cta. Cte. Pagada:"}),(0,N.jsxs)("span",{className:"font-medium",children:["$",g.paid_current_account.toFixed(2)]})]}),(0,N.jsxs)("div",{className:"border-t border-gray-200 pt-2 flex justify-between font-bold dark:border-gray-600 dark:text-white",children:[(0,N.jsx)("span",{children:"Total:"}),(0,N.jsxs)("span",{children:["$",(g.cash+g.debit+g.credit+g.mp+g.current_account+g.paid_current_account).toFixed(2)]})]})]})]}),(0,N.jsx)(I,{sales:r})]}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,N.jsx)(L,{topProducts:h()}),(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Clientes M\xe1s Fieles"}),y().length>0?(0,N.jsx)("ul",{className:"space-y-2",children:y().map(((e,t)=>(0,N.jsxs)("li",{className:"flex justify-between items-center text-sm text-gray-700 dark:text-gray-300",children:[(0,N.jsxs)("span",{children:[e.name," (",e.visitCount," compras)"]}),(0,N.jsxs)("span",{className:"font-medium",children:["$",e.totalSpent.toFixed(2)]})]},t)))}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay datos de clientes fieles para mostrar."})]})]})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},R=e=>{let{onClose:t}=e;return(0,N.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-sm",children:[(0,N.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"\xbfNecesitas Ayuda?"}),(0,N.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,N.jsx)("p",{className:"text-gray-700 mb-6 text-center",children:"Elige c\xf3mo quieres contactar a soporte:"}),(0,N.jsxs)("div",{className:"space-y-4",children:[(0,N.jsxs)("button",{onClick:()=>{window.open("mailto:soporte@minimarketpro.com?subject=Reporte%20de%20Error%20MiniMarket%20Pro","_blank"),t()},className:"w-full bg-red-600 hover:bg-red-700 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center",children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8m-18 4v7a2 2 0 002 2h14a2 2 0 002-2v-7m-18 0h18"})}),"Contactar por Email"]}),(0,N.jsxs)("button",{onClick:()=>{window.open("https://wa.me/5491155551234?text=Hola,%20necesito%20ayuda%20con%20MiniMarket%20Pro.","_blank"),t()},className:"w-full bg-green-600 hover:bg-green-700 text-white px-4 py-3 rounded-lg transition-colors flex items-center justify-center",children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.244-1.076l-4.11 1.15a1 1 0 01-1.223-1.223l1.15-4.11A9.863 9.863 0 013 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Contactar por WhatsApp"]})]})]})})},O=e=>{let{currentView:t,setCurrentView:r,isOnline:n,currentUser:l,deviceType:s,onLogout:o}=e;const[i,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!1);(0,a.useEffect)((()=>{"true"===localStorage.getItem("darkMode")?(g(!0),document.documentElement.classList.add("dark")):(g(!1),document.documentElement.classList.remove("dark"))}),[]);const x="px-3 py-2 rounded-md text-sm font-medium transition-colors flex items-center justify-center",h="bg-blue-100 text-blue-800",y="text-gray-700 hover:bg-gray-100";return(0,N.jsxs)("nav",{className:"bg-white shadow-lg dark:bg-gray-800",children:[(0,N.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,N.jsxs)("div",{className:"flex justify-between h-16",children:[(0,N.jsxs)("div",{className:"flex items-center",children:[(0,N.jsx)("span",{className:"text-xl font-bold text-gray-800 dark:text-white",children:"MiniMarket Pro"}),l&&(0,N.jsxs)("span",{className:"ml-4 text-sm text-gray-600 dark:text-gray-300 hidden sm:block",children:[l.username," (",l.role,")"]})]}),(0,N.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[(0,N.jsx)("button",{onClick:()=>{g(!f),document.documentElement.classList.toggle("dark"),localStorage.setItem("darkMode",!f)},className:"p-2 rounded-full text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700","aria-label":"Toggle dark mode",children:f?(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h1M3 12h1m15.325-4.275l-.707-.707M4.343 19.657l-.707-.707M19.657 4.343l-.707-.707M4.343 4.343l-.707-.707M12 18a6 6 0 100-12 6 6 0 000 12z"})}):(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,N.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9 9 0 008.354-5.646z"})})}),(0,N.jsxs)("button",{onClick:()=>r("sales"),className:"".concat(x," ").concat("sales"===t?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.35 13 5.25 13h13.5c.138 0 .248-.113.266-.25l.5-2a1 1 0 000-.497l-1.45-5.804A1 1 0 0017 3H6.293l-.7-1.707A1 1 0 004.999 1H3zM14 15a1 1 0 110 2 1 1 0 010-2zm-4 0a1 1 0 110 2 1 1 0 010-2zm-9 1a1 1 0 110 2 1 1 0 010-2z"})}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Ventas"})]}),(!w(l)||v(l)||k(l))&&(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsxs)("button",{onClick:()=>d(!i),className:"".concat(x," ").concat(i?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM13 7a2 2 0 00-2-2h2a2 2 0 002 2v2a2 2 0 00-2-2h-2z"})}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Stock"}),(0,N.jsx)("svg",{className:"ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),i&&(0,N.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 dark:bg-gray-700",children:[(0,N.jsx)("button",{onClick:()=>{r("products"),d(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Productos"}),(0,N.jsx)("button",{onClick:()=>{r("orders"),d(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Pedidos"}),(0,N.jsx)("button",{onClick:()=>{r("suppliers"),d(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Proveedores"})]})]}),(v(l)||k(l))&&(0,N.jsxs)("button",{onClick:()=>r("webSales"),className:"".concat(x," ").concat("webSales"===t?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M10 2a8 8 0 100 16 8 8 0 000-16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Ventas Web"})]}),(v(l)||k(l))&&(0,N.jsxs)("button",{onClick:()=>r("markupCalculator"),className:"".concat(x," ").concat("markupCalculator"===t?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Calculadora"})]}),(0,N.jsxs)("button",{onClick:()=>r("reports"),className:"".concat(x," ").concat("reports"===t?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{d:"M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"})}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Reportes"})]}),(k(l)||w(l))&&(0,N.jsxs)("button",{onClick:()=>r("cashRegister"),className:"".concat(x," ").concat("cashRegister"===t?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 002-2V4H4zm10 10H4v2a2 2 0 002 2h8a2 2 0 002-2v-2z",clipRule:"evenodd"})}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Caja"})]}),(v(l)||k(l))&&(0,N.jsxs)("button",{onClick:()=>r("currentAccounts"),className:"".concat(x," ").concat("currentAccounts"===t?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,N.jsx)("path",{d:"M4 4a2 2 0 00-2 2v4a2 2 0 002 2h8a2 2 0 002-2V6a2 2 0 00-2-2H4z"}),(0,N.jsx)("path",{fillRule:"evenodd",d:"M18 9.875A.75.75 0 0017.25 9h-4.5a.75.75 0 00-.75.75v4.5c0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75v-4.5a.75.75 0 00-.75-.75z",clipRule:"evenodd"})]}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Cuentas"})]}),v(l)&&(0,N.jsxs)("div",{className:"relative",children:[(0,N.jsxs)("button",{onClick:()=>u(!c),className:"".concat(x," ").concat(c?h:y," dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,N.jsx)("path",{fillRule:"evenodd",d:"M11.49 3.17c-.325-1.119-1.353-1.9-2.5-1.9s-2.175.781-2.5 1.9c-.291 1.05-.954 1.985-2.02 2.347A.75.75 0 004.5 6.5h11a.75.75 0 00.52-1.323c-1.066-.362-1.729-1.297-2.02-2.347zM10 12a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"}),(0,N.jsx)("path",{fillRule:"evenodd",d:"M4.5 15.5a.75.75 0 00-.52 1.323c1.066.362 1.729 1.297 2.02 2.347.325 1.119 1.353 1.9 2.5 1.9s2.175-.781 2.5-1.9c.291-1.05.954-1.985 2.02-2.347A.75.75 0 0015.5 15.5h-11z",clipRule:"evenodd"})]}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Ajustes"}),(0,N.jsx)("svg",{className:"ml-1 h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),c&&(0,N.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 dark:bg-gray-700",children:[(0,N.jsx)("button",{onClick:()=>{r("markets"),u(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Mercados"}),(0,N.jsx)("button",{onClick:()=>{r("backupRestore"),u(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Backup"}),(0,N.jsx)("button",{onClick:()=>{r("userManagement"),u(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Usuarios"}),(0,N.jsx)("button",{onClick:()=>{p(!0),u(!1)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 w-full text-left dark:text-gray-300 dark:hover:bg-gray-600",children:"Ayuda"})]})]}),(0,N.jsx)("span",{className:"px-3 py-2 text-sm font-medium rounded-md ".concat(n?"bg-green-100 text-green-800":"bg-red-100 text-red-800"," hidden sm:block"),children:n?"En l\xednea":"Offline"}),(0,N.jsxs)("button",{onClick:o,className:"".concat(x," text-gray-700 hover:bg-gray-100 dark:text-gray-300 dark:hover:bg-gray-700"),children:[(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 sm:mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M3 3a1 1 0 011 1v12a1 1 0 11-2 0V4a1 1 0 011-1zm7.707 3.293a1 1 0 010 1.414L9.414 9H17a1 1 0 110 2H9.414l1.293 1.293a1 1 0 01-1.414 1.414l-3-3a1 1 0 010-1.414l3-3a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,N.jsx)("span",{className:"hidden sm:block",children:"Salir"})]})]})]})}),m&&(0,N.jsx)(R,{onClose:()=>p(!1)})]})},A=e=>{let{onLogin:t}=e;const[r,n]=(0,a.useState)(""),[l,s]=(0,a.useState)(""),[o,i]=(0,a.useState)("");return(0,N.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 dark:bg-gray-900",children:(0,N.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md w-full max-w-md dark:bg-gray-800",children:[(0,N.jsx)("h1",{className:"text-2xl font-bold text-center text-gray-800 dark:text-white mb-6",children:"MiniMarket Pro"}),(0,N.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),i("");const a=await(async(e,t)=>{const r=[{id:"admin",username:"admin",password:"admin",role:"admin",marketId:null},{id:"lucas",username:"lucas",password:"lucas",role:"admin",marketId:null},{id:"market1",username:"market1",password:"market1",role:"market",marketId:"market1"},{id:"vendedor",username:"vendedor",password:"vendedor",role:"vendedor",marketId:"market1"}];for(const n of r)(await p("users")).find((e=>e.id===n.id))?await g("users",n):await f("users",n);await y("users",await p("users"));const a=(await p("users")).find((r=>r.username===e&&r.password===t));return!!a&&(localStorage.setItem("currentUser",JSON.stringify({username:a.username,role:a.role,marketId:a.marketId})),!0)})(r,l);a?t(JSON.parse(localStorage.getItem("currentUser"))):i("Usuario o contrase\xf1a incorrectos")},children:[(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Usuario"}),(0,N.jsx)("input",{type:"text",value:r,onChange:e=>n(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{className:"mb-6",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Contrase\xf1a"}),(0,N.jsx)("input",{type:"password",value:l,onChange:e=>s(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),o&&(0,N.jsx)("p",{className:"text-red-500 text-sm mb-4",children:o}),(0,N.jsx)("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:"Iniciar Sesi\xf3n"})]})]})})},$=e=>{let{onSelectMarket:t}=e;const[r,n]=(0,a.useState)([]),[l,s]=(0,a.useState)([]),[o,i]=(0,a.useState)(null),[c,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[b,k]=(0,a.useState)(""),[w,j]=(0,a.useState)("vendedor"),[S,C]=(0,a.useState)(""),[E,P]=(0,a.useState)({type:"",text:""}),[D,_]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{const e=await p("markets"),t=await p("users");n(e),s(t)})()}),[]);const M=()=>{i(null),_(!1),z()},z=()=>{h(""),k(""),j("vendedor"),C("")};return v()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Administraci\xf3n de Mercados"}),E.text&&(0,N.jsx)("div",{className:"p-3 mb-4 rounded-md ".concat("success"===E.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:E.text}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-700",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Crear Nuevo Mercado"}),(0,N.jsxs)("div",{className:"flex space-x-2",children:[(0,N.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Nombre del mercado",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),(0,N.jsx)("button",{onClick:async()=>{if(!c.trim())return void P({type:"error",text:"El nombre del mercado no puede estar vac\xedo."});const e={id:"market".concat(Date.now()),name:c.trim()},t=[...r,e];await f("markets",e),n(t),y("markets",t),u(""),P({type:"success",text:'Mercado "'.concat(e.name,'" agregado con \xe9xito.')})},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Agregar"})]})]}),(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-700",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:o?"Editar Usuario":"Crear Nuevo Usuario"}),(0,N.jsxs)("div",{className:"space-y-3",children:[(0,N.jsxs)("select",{value:(null===o||void 0===o?void 0:o.marketId)||S,onChange:e=>o?i(d(d({},o),{},{marketId:e.target.value})):C(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",children:[(0,N.jsx)("option",{value:"",children:"Seleccionar mercado"}),r.map((e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,N.jsx)("input",{type:"text",value:(null===o||void 0===o?void 0:o.username)||m,onChange:e=>o?i(d(d({},o),{},{username:e.target.value})):h(e.target.value),placeholder:"Nombre de usuario",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",disabled:!!o}),(0,N.jsx)("input",{type:"password",value:(null===o||void 0===o?void 0:o.password)||b,onChange:e=>o?i(d(d({},o),{},{password:e.target.value})):k(e.target.value),placeholder:"Contrase\xf1a",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white"}),(0,N.jsxs)("select",{value:(null===o||void 0===o?void 0:o.role)||w,onChange:e=>o?i(d(d({},o),{},{role:e.target.value})):j(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",children:[(0,N.jsx)("option",{value:"market",children:"Due\xf1o (Market)"}),(0,N.jsx)("option",{value:"vendedor",children:"Vendedor"})]}),(0,N.jsxs)("div",{className:"flex space-x-2",children:[(0,N.jsx)("button",{onClick:o?async()=>{if(P({type:"",text:""}),!o||!o.username||!o.password)return void P({type:"error",text:"Todos los campos de usuario son obligatorios."});const e=l.map((e=>e.id===o.id?o:e));await g("users",o),s(e),y("users",e),M(),P({type:"success",text:'Usuario "'.concat(o.username,'" actualizado con \xe9xito.')})}:async()=>{if(P({type:"",text:""}),!m.trim()||!b.trim()||!S)return void P({type:"error",text:"Todos los campos de usuario son obligatorios."});if((await p("users")).some((e=>e.username===m.trim())))return void P({type:"error",text:'El usuario "'.concat(m.trim(),'" ya existe. Por favor, elige otro.')});const e={id:Date.now(),username:m.trim(),password:b.trim(),role:w,marketId:S},t=[...l,e];await f("users",e),s(t),y("users",t),z(),P({type:"success",text:'Usuario "'.concat(e.username,'" creado con \xe9xito.')})},className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500",children:o?"Actualizar":"Crear"}),o&&(0,N.jsx)("button",{type:"button",onClick:M,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:text-gray-200 dark:hover:bg-gray-500",children:"Cancelar"})]})]})]})]}),(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white",children:"Listado de Mercados"}),(0,N.jsxs)("select",{onChange:e=>t(e.target.value||null),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[(0,N.jsx)("option",{value:"",children:"Ver todos los mercados"}),r.map((e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-700",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Nombre"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"ID"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Usuarios"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acciones"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:r.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.name})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.id})}),(0,N.jsx)("td",{className:"px-6 py-4",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 space-y-1 dark:text-white",children:l.filter((t=>t.marketId===e.id)).map((e=>(0,N.jsxs)("div",{className:"flex justify-between",children:[(0,N.jsxs)("span",{children:[e.username," (",e.role,")"]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("button",{type:"button",onClick:()=>(e=>{i(d({},e)),_(!0)})(e),className:"text-blue-600 hover:text-blue-800 mr-2",children:"Editar"}),(0,N.jsx)("button",{type:"button",onClick:()=>(async e=>{P({type:"",text:""});const t=l.find((t=>t.id===e));if(window.confirm('\xbfEst\xe1s seguro de que quieres eliminar al usuario "'.concat(t.username,'"?'))){await x("users",e);const r=l.filter((t=>t.id!==e));s(r),y("users",r),P({type:"success",text:'Usuario "'.concat(t.username,'" eliminado con \xe9xito.')})}})(e.id),className:"text-red-600 hover:text-red-800",children:"Eliminar"})]})]},e.id)))})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,N.jsx)("button",{type:"button",onClick:()=>{C(e.id),_(!0)},className:"text-green-600 hover:text-green-800",children:"+ Agregar Usuario"})})]},e.id)))})]})]})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},U=[{value:1e3,label:"$1000",image:"https://via.placeholder.com/60x30/007bff/ffffff?text=1000"},{value:500,label:"$500",image:"https://via.placeholder.com/60x30/28a745/ffffff?text=500"},{value:200,label:"$200",image:"https://via.placeholder.com/60x30/ffc107/000000?text=200"},{value:100,label:"$100",image:"https://via.placeholder.com/60x30/dc3545/ffffff?text=100"},{value:50,label:"$50",image:"https://via.placeholder.com/60x30/6c757d/ffffff?text=50"},{value:20,label:"$20",image:"https://via.placeholder.com/60x30/17a2b8/ffffff?text=20"},{value:10,label:"$10",image:"https://via.placeholder.com/60x30/6f42c1/ffffff?text=10"},{value:5,label:"$5",image:"https://via.placeholder.com/60x30/fd7e14/ffffff?text=5"},{value:2,label:"$2",image:"https://via.placeholder.com/60x30/e83e8c/ffffff?text=2"},{value:1,label:"$1",image:"https://via.placeholder.com/60x30/20c997/ffffff?text=1"}],B=e=>{let{selectedMarket:t}=e;const r=b(),[n,l]=(0,a.useState)(null),[s,o]=(0,a.useState)({}),[i,c]=(0,a.useState)({}),[u,m]=(0,a.useState)([]),[x,h]=(0,a.useState)([]);(0,a.useEffect)((()=>{(async()=>{var e,a;const n=await p("cashRegisterState_".concat(r.username));l((null===(e=n[0])||void 0===e?void 0:e.state)||null);const s=await p("cashMovements_".concat(r.username));m(s);const i=await p("sales"),d=v()?t:r.marketId,c=v()&&t?i.filter((e=>e.marketId===t)):i.filter((e=>e.marketId===d));if(h(c),"open"===(null===(a=n[0])||void 0===a?void 0:a.state)){const e=s.find((e=>"opening"===e.type&&"open"===e.status));e&&o(e.denominations)}})()}),[r.username,t]);const j=e=>U.reduce(((t,r)=>t+(e[r.value]||0)*r.value),0),S=(e,t)=>(0,N.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:U.map((r=>(0,N.jsxs)("div",{className:"flex items-center space-x-2 bg-gray-100 p-2 rounded-md dark:bg-gray-700",children:[(0,N.jsx)("img",{src:r.image,alt:r.label,className:"w-12 h-auto rounded"}),(0,N.jsx)("span",{className:"font-medium text-gray-800 dark:text-white",children:r.label}),(0,N.jsx)("input",{type:"number",min:"0",value:e[r.value]||"",onChange:e=>t(r.value,e.target.value),className:"w-20 px-2 py-1 border border-gray-300 rounded-md text-center dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]},r.value)))}),C=u.find((e=>"opening"===e.type&&"open"===e.status)),E=C?C.total:0,P=x.filter((e=>{if(!C)return!1;const t=new Date(e.date);return t>=new Date(C.date)&&t<=new Date})).reduce(((e,t)=>e+t.total),0),D=E+P,_=j(i),M=_-D;return k(r)||w(r)?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Gesti\xf3n de Caja"}),"open"===n&&(0,N.jsxs)("div",{className:"mb-6",children:[(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Caja Abierta"}),(0,N.jsxs)("p",{className:"text-lg mb-2 text-gray-700 dark:text-gray-300",children:["Total de Apertura: ",(0,N.jsxs)("span",{className:"font-bold",children:["$",E.toFixed(2)]})]}),(0,N.jsxs)("p",{className:"text-lg mb-2 text-gray-700 dark:text-gray-300",children:["Ventas del Turno: ",(0,N.jsxs)("span",{className:"font-bold",children:["$",P.toFixed(2)]})]}),(0,N.jsxs)("p",{className:"text-lg mb-4 text-gray-700 dark:text-gray-300",children:["Total Esperado al Cierre: ",(0,N.jsxs)("span",{className:"font-bold",children:["$",D.toFixed(2)]})]}),(0,N.jsx)("h4",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-3",children:"Ingresar Billetes al Cierre"}),S(i,((e,t)=>{c((r=>d(d({},r),{},{[e]:parseInt(t)||0})))})),(0,N.jsxs)("p",{className:"text-xl font-bold text-right mt-4 text-gray-800 dark:text-white",children:["Total Contado: $",_.toFixed(2)]}),(0,N.jsxs)("p",{className:"text-xl font-bold text-right ".concat(M>=0?"text-green-600":"text-red-600"),children:["Diferencia: $",M.toFixed(2)]}),(0,N.jsx)("button",{onClick:async()=>{const e=j(i),t=u.find((e=>"opening"===e.type&&"open"===e.status)),a=x.filter((e=>{const r=new Date(e.date);return r>=new Date(t.date)&&r<=new Date})).reduce(((e,t)=>e+t.total),0),n=t.total+a,s=e-n,o={id:Date.now(),type:"closing",date:(new Date).toISOString(),user:r.username,marketId:r.marketId,denominations:i,total:e,expectedTotal:n,difference:s,status:"closed"},c=[...u,o];await f("cashMovements_".concat(r.username),o),await g("cashRegisterState_".concat(r.username),{id:r.username,state:"closed"}),m(c),l("closed");const p=d(d({},t),{},{status:"closed"});await g("cashMovements_".concat(r.username),p),y("cashMovements_".concat(r.username),c),y("cashRegisterState_".concat(r.username),[{id:r.username,state:"closed"}])},className:"mt-6 w-full bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Cerrar Caja"})]}),null===n||"closed"===n?(0,N.jsxs)("div",{className:"mb-6",children:[(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Abrir Caja"}),(0,N.jsx)("h4",{className:"text-lg font-medium text-gray-700 dark:text-gray-200 mb-3",children:"Ingresar Billetes de Apertura"}),S(s,((e,t)=>{o((r=>d(d({},r),{},{[e]:parseInt(t)||0})))})),(0,N.jsxs)("p",{className:"text-xl font-bold text-right mt-4 text-gray-800 dark:text-white",children:["Total de Apertura: $",j(s).toFixed(2)]}),(0,N.jsx)("button",{onClick:async()=>{const e=j(s),t={id:Date.now(),type:"opening",date:(new Date).toISOString(),user:r.username,marketId:r.marketId,denominations:s,total:e,status:"open"},a=[...u,t];await f("cashMovements_".concat(r.username),t),await g("cashRegisterState_".concat(r.username),{id:r.username,state:"open"}),m(a),l("open"),y("cashMovements_".concat(r.username),a),y("cashRegisterState_".concat(r.username),[{id:r.username,state:"open"}])},className:"mt-6 w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Abrir Caja"})]}):null,(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Historial de Movimientos de Caja"}),u.length>0?(0,N.jsx)("div",{className:"bg-gray-50 p-4 rounded-md dark:bg-gray-700",children:(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-600",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Fecha"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Tipo"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Usuario"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Total"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Diferencia"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Estado"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:u.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(e.date).toLocaleString()}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"opening"===e.type?"Apertura":"Cierre"}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.user}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",e.total.toFixed(2)]}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:"closing"===e.type?"$".concat(e.difference.toFixed(2)):"-"}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,N.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("open"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200"),children:"open"===e.status?"Abierta":"Cerrada"})})]},e.id)))})]})}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay movimientos de caja registrados."})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},V=e=>{let{customer:t,onSave:r,onCancel:n}=e;const[l,s]=(0,a.useState)(t||{id:Date.now(),name:"",lastName:"",dni:"",address:"",phone:"",email:"",birthDate:""}),o=e=>{const{name:t,value:r}=e.target;s(d(d({},l),{},{[t]:r}))};return(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-6 dark:bg-gray-800",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold mb-4 text-gray-800 dark:text-white",children:t?"Editar Cliente":"Agregar Nuevo Cliente"}),(0,N.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(l)},children:[(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,N.jsx)("input",{type:"text",name:"name",value:l.name,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Apellido"}),(0,N.jsx)("input",{type:"text",name:"lastName",value:l.lastName,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"DNI"}),(0,N.jsx)("input",{type:"text",name:"dni",value:l.dni,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Domicilio"}),(0,N.jsx)("input",{type:"text",name:"address",value:l.address,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Tel\xe9fono"}),(0,N.jsx)("input",{type:"tel",name:"phone",value:l.phone,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),(0,N.jsx)("input",{type:"email",name:"email",value:l.email,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Fecha de Nacimiento"}),(0,N.jsx)("input",{type:"date",name:"birthDate",value:l.birthDate,onChange:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]})]}),(0,N.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,N.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300 dark:hover:bg-gray-600",children:"Cancelar"}),(0,N.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:t?"Actualizar":"Guardar"})]})]})]})},q=e=>{let{selectedMarket:t}=e;const[r,n]=(0,a.useState)([]),[l,s]=(0,a.useState)([]),[o,i]=(0,a.useState)([]),[c,u]=(0,a.useState)([]),[m,h]=(0,a.useState)(null),[b,w]=(0,a.useState)([]),[S,C]=(0,a.useState)(!1),[E,P]=(0,a.useState)(null);(0,a.useEffect)((()=>{(async()=>{const e=await p("sales"),r=await p("customers"),a=v()?t:j(),l=v()&&t?e.filter((e=>e.marketId===t)):e.filter((e=>e.marketId===a)),s=v()&&t?r.filter((e=>e.marketId===t)):r.filter((e=>e.marketId===a));n(l),u(s);const o={};l.forEach((e=>{"current_account"===e.paymentMethod&&e.customerName&&(o[e.customerName]||(o[e.customerName]={name:e.customerName,dni:e.customerDNI,address:e.customerAddress,email:e.customerEmail,phone:e.customerPhone,totalDebt:0,sales:[]}),o[e.customerName].totalDebt+=e.total,o[e.customerName].sales.push(e))})),i(Object.values(o))})()}),[t]);return v()||k()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Cuentas Corrientes"}),(0,N.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Gesti\xf3n de Clientes"}),(0,N.jsx)("button",{onClick:()=>{P(null),C(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Agregar Cliente"})]}),S&&(0,N.jsx)(V,{customer:E,onSave:async e=>{const r=v()?t:j(),a=d(d({},e),{},{marketId:r}),n=await p("customers");let l;E?(l=n.map((t=>t.id===e.id?a:t)),await g("customers",a)):(l=[...n,a],await f("customers",a)),y("customers",l);const s=v()&&!t?l:l.filter((e=>e.marketId===r));u(s),C(!1),P(null)},onCancel:()=>C(!1)}),(0,N.jsxs)("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-2",children:"Listado de Clientes Registrados"}),c.length>0?(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-600",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Nombre Completo"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"DNI"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Tel\xe9fono"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acciones"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:c.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:[e.name," ",e.lastName]}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.dni}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.phone}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,N.jsx)("button",{onClick:()=>(e=>{P(e),C(!0)})(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Editar"}),(0,N.jsx)("button",{onClick:()=>(async e=>{await x("customers",e);const r=await p("customers");y("customers",r);const a=v()?t:j(),n=v()&&!t?r:r.filter((e=>e.marketId===a));u(n)})(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id)))})]}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay clientes registrados en este mercado."})]}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,N.jsxs)("div",{className:"md:col-span-1 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Clientes con Deuda"}),o.length>0?(0,N.jsx)("ul",{className:"space-y-2",children:o.map((e=>(0,N.jsxs)("li",{className:"p-3 rounded-md cursor-pointer flex justify-between items-center ".concat((null===m||void 0===m?void 0:m.name)===e.name?"bg-blue-100 text-blue-800":"hover:bg-gray-100 dark:hover:bg-gray-600"," dark:text-gray-300"),onClick:()=>(e=>{const t=o.find((t=>t.name===e));h(t),w(t?t.sales:[])})(e.name),children:[(0,N.jsx)("span",{children:e.name}),(0,N.jsxs)("span",{className:"font-bold text-red-600",children:["$",e.totalDebt.toFixed(2)]})]},e.name)))}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay clientes con cuentas corrientes pendientes."})]}),(0,N.jsx)("div",{className:"md:col-span-2 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:m?(0,N.jsxs)("div",{children:[(0,N.jsxs)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:["Detalle de Deuda: ",m.name]}),(0,N.jsxs)("div",{className:"mb-4 text-sm text-gray-700 dark:text-gray-300",children:[(0,N.jsxs)("p",{children:[(0,N.jsx)("strong",{children:"DNI:"})," ",m.dni]}),(0,N.jsxs)("p",{children:[(0,N.jsx)("strong",{children:"Direcci\xf3n:"})," ",m.address]}),(0,N.jsxs)("p",{children:[(0,N.jsx)("strong",{children:"Email:"})," ",m.email]}),(0,N.jsxs)("p",{children:[(0,N.jsx)("strong",{children:"Tel\xe9fono:"})," ",m.phone]}),(0,N.jsxs)("p",{className:"text-xl font-bold text-red-600 mt-2",children:["Deuda Total: $",m.totalDebt.toFixed(2)]})]}),(0,N.jsxs)("div",{className:"flex space-x-2 mb-4",children:[(0,N.jsx)("button",{onClick:()=>{return e=m,void alert("Simulando env\xedo de recordatorio a ".concat(e.name," (").concat(e.phone,") por $").concat(e.totalDebt.toFixed(2)));var e},className:"px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white rounded-lg transition-colors",children:"Enviar Recordatorio (WhatsApp)"}),(0,N.jsx)("button",{onClick:()=>{alert("Simulando exportaci\xf3n de historial de ".concat(m.name," a PDF/Excel."))},className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg transition-colors",children:"Exportar Historial"})]}),(0,N.jsx)("h4",{className:"text-md font-medium text-gray-700 dark:text-gray-200 mb-2",children:"Ventas Pendientes"}),b.filter((e=>"current_account"===e.paymentMethod)).length>0?(0,N.jsx)("div",{className:"bg-white p-4 rounded-md dark:bg-gray-800",children:(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-600",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Fecha"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Productos"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Total"}),(0,N.jsx)("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acci\xf3n"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:b.filter((e=>"current_account"===e.paymentMethod)).map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:new Date(e.date).toLocaleDateString()}),(0,N.jsx)("td",{className:"px-4 py-2 text-sm text-gray-900 dark:text-white",children:e.items.map((e=>e.name)).join(", ")}),(0,N.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:["$",e.total.toFixed(2)]}),(0,N.jsx)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium",children:(0,N.jsx)("button",{onClick:()=>(async e=>{const r=(await p("sales")).map((t=>t.id===e?d(d({},t),{},{paymentMethod:"paid_current_account",paidDate:(new Date).toISOString()}):t));await g("sales",r.find((t=>t.id===e))),y("sales",r);const a=v()?t:j(),l=v()&&t?r.filter((e=>e.marketId===t)):r.filter((e=>e.marketId===a));n(l);const s={};l.forEach((e=>{"current_account"===e.paymentMethod&&e.customerName&&(s[e.customerName]||(s[e.customerName]={name:e.customerName,dni:e.customerDNI,address:e.customerAddress,email:e.customerEmail,phone:e.customerPhone,totalDebt:0,sales:[]}),s[e.customerName].totalDebt+=e.total,s[e.customerName].sales.push(e))})),i(Object.values(s)),h(null)})(e.id),className:"text-green-600 hover:text-green-900",children:"Marcar como Pagada"})})]},e.id)))})]})}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"Este cliente no tiene ventas pendientes a cuenta corriente."})]}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"Selecciona un cliente para ver su detalle de cuenta corriente."})})]})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},H=e=>{let{selectedMarket:t}=e;const[r,n]=(0,a.useState)([]),[l,s]=(0,a.useState)([]),[o,i]=(0,a.useState)({}),[c,u]=(0,a.useState)(""),[m,f]=(0,a.useState)(""),[g,x]=(0,a.useState)(1);(0,a.useEffect)((()=>{(async()=>{const e=await p("products"),r=await p("suppliers"),a=await p("sales"),l=v()?t:j(),o=v()&&t?e.filter((e=>e.marketId===t)):e.filter((e=>e.marketId===l)),i=v()&&t?r.filter((e=>e.marketId===t)):r.filter((e=>e.marketId===l));n(o),s(i),h(o,a,i)})()}),[t]);const h=(e,r,a)=>{const n={},l=v()?t:j(),s=r.filter((e=>e.marketId===l));e.forEach((e=>{if(e.stock<=e.minStock){const t=a.find((t=>t.id===e.supplier)),r=t?"".concat(t.name," ").concat(t.lastName):"Sin Proveedor";n[r]||(n[r]=[]);let l=0;const o=s.filter((t=>t.items.some((t=>t.productId===e.id))));if(o.length>0){const t=new Date;t.setMonth(t.getMonth()-1);const r=o.filter((e=>new Date(e.date)>=t));if(r.length>0){const t=r.reduce(((t,r)=>{const a=r.items.find((t=>t.productId===e.id));return t+(a?a.quantity:0)}),0);l=30*Math.ceil(t/(r.length/30)),l<2*e.minStock&&(l=2*e.minStock)}else l=2*e.minStock}else l=10;l=Math.max(l,e.minStock-e.stock),n[r].push({product:e,quantity:l})}})),i(n)};return v()||k()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Gesti\xf3n de Pedidos"}),(0,N.jsx)("button",{onClick:()=>h(r,JSON.parse(localStorage.getItem("sales"))||[],l),className:"mb-6 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Generar Pedidos Autom\xe1ticos"}),(0,N.jsxs)("div",{className:"mb-8 p-4 border border-gray-200 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600",children:[(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:"Agregar Producto Manualmente"}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,N.jsxs)("select",{value:c,onChange:e=>{u(e.target.value),f("")},className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",children:[(0,N.jsx)("option",{value:"",children:"Seleccionar Proveedor"}),l.map((e=>(0,N.jsxs)("option",{value:e.id,children:[e.name," ",e.lastName]},e.id)))]}),(0,N.jsxs)("select",{value:m,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",disabled:!c,children:[(0,N.jsx)("option",{value:"",children:"Seleccionar Producto"}),r.filter((e=>e.supplier===c)).map((e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,N.jsx)("input",{type:"number",min:"1",value:g,onChange:e=>x(parseInt(e.target.value)||1),placeholder:"Cantidad",className:"px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsx)("button",{onClick:()=>{if(!c||!m||g<=0)return void alert("Por favor, selecciona un proveedor, un producto y una cantidad.");const e=l.find((e=>e.id===c));((e,t,a)=>{const n=r.find((e=>e.id===t));!n||a<=0||i((r=>{const l=d({},r);l[e]||(l[e]=[]);const s=l[e].findIndex((e=>e.product.id===t));return s>-1?l[e][s].quantity+=a:l[e].push({product:n,quantity:a}),l}))})(e?"".concat(e.name," ").concat(e.lastName):"Sin Proveedor",parseInt(m),g),u(""),f(""),x(1)},className:"mt-4 w-full bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Agregar al Pedido"})]}),0===Object.keys(o).length?(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay pedidos autom\xe1ticos generados o todos los productos est\xe1n en stock."}):Object.entries(o).map((e=>{let[t,r]=e;return(0,N.jsxs)("div",{className:"mb-8 p-4 border border-gray-200 rounded-lg shadow-sm dark:bg-gray-700 dark:border-gray-600",children:[(0,N.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 dark:text-white mb-4",children:["Proveedor: ",t]}),(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-600",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Producto"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Stock Actual"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Cantidad a Pedir"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acciones"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:r.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:e.product.name}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:e.product.stock}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("input",{type:"number",min:"0",value:e.quantity,onChange:r=>{return a=t,n=e.product.id,l=r.target.value,void i((e=>{const t=d({},e);if(t[a]){const e=t[a].findIndex((e=>e.product.id===n));e>-1&&(t[a][e].quantity=parseInt(l)||0)}return t}));var a,n,l},className:"w-24 px-2 py-1 border border-gray-300 rounded-md text-center dark:bg-gray-600 dark:border-gray-500 dark:text-white"})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,N.jsx)("button",{onClick:()=>{return r=t,a=e.product.id,void i((e=>{const t=d({},e);return t[r]&&(t[r]=t[r].filter((e=>e.product.id!==a)),0===t[r].length&&delete t[r]),t}));var r,a},className:"text-red-600 hover:text-red-900",children:"Eliminar"})})]},e.product.id)))})]}),(0,N.jsx)("button",{className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Enviar Pedido (Simulado)"})]},t)}))]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},W=e=>{let{onDataExtracted:t}=e;const[r,n]=(0,a.useState)(null),[l,s]=(0,a.useState)(!1),[o,i]=(0,a.useState)(""),c=(0,a.useRef)(null);return(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-4",children:"Cargar Factura PDF"}),(0,N.jsxs)("div",{className:"mb-4",children:[(0,N.jsx)("input",{type:"file",accept:".pdf",onChange:e=>{const t=e.target.files[0];t&&"application/pdf"===t.type?(n(t),i("")):(n(null),i("Por favor, selecciona un archivo PDF v\xe1lido."))},ref:c,className:"w-full text-sm text-gray-500 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"}),r&&(0,N.jsxs)("p",{className:"text-sm text-gray-600 dark:text-gray-400 mt-2",children:["Archivo seleccionado: ",r.name]}),o&&(0,N.jsx)("p",{className:"text-red-500 text-sm mt-2",children:o})]}),(0,N.jsx)("button",{onClick:async()=>{if(r)try{const e=await(async()=>(s(!0),i(""),new Promise((e=>{setTimeout((()=>{const t=[{id:1,quantity:1,description:"JAMON COCIDO",unitPrice:1e3,subtotal:1e3},{id:2,quantity:1,description:"QUESO CREMOSO",unitPrice:1500,subtotal:1500},{id:3,quantity:1,description:"SALAME MILAN",unitPrice:2e3,subtotal:2e3},{id:4,quantity:1,description:"PAN DE CAMPO",unitPrice:500,subtotal:500},{id:5,quantity:1,description:"ACEITUNAS",unitPrice:300,subtotal:300},{id:6,quantity:1,description:"GASEOSA COCA-COLA",unitPrice:250,subtotal:250},{id:7,quantity:1,description:"CERVEZA QUILMES",unitPrice:350,subtotal:350},{id:8,quantity:1,description:"PAPAS FRITAS LAYS",unitPrice:180,subtotal:180},{id:9,quantity:1,description:"CHOCOLATE AGUIL",unitPrice:220,subtotal:220},{id:10,quantity:1,description:"GALLETITAS OREO",unitPrice:120,subtotal:120}].map((e=>{const t=e.quantity*e.unitPrice,r=Math.abs(t-e.subtotal)<.01;return d(d({},e),{},{isConsistent:r})}));s(!1),e(t)}),2e3)}))))();t(e)}catch(e){i("Error al procesar el PDF. Aseg\xfarate de que sea una factura legible."),console.error("PDF processing error:",e)}else i("Por favor, selecciona un archivo PDF.")},disabled:!r||l,className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Procesando...":"Procesar PDF"}),(0,N.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-4",children:"Nota: Esta es una simulaci\xf3n. La integraci\xf3n real con OCR y PDF parsing requiere librer\xedas adicionales y puede ser compleja."})]})},Q=e=>{let{selectedMarket:t}=e;const[r,n]=(0,a.useState)([]),[l,s]=(0,a.useState)(!1),[o,i]=(0,a.useState)(null),[c,u]=(0,a.useState)({id:Date.now(),name:"",lastName:"",dni:"",address:"",email:"",whatsapp:"",paymentMethods:"",marketId:""}),[m,h]=(0,a.useState)([]),[b,w]=(0,a.useState)(!1),[S,C]=(0,a.useState)(null),[E,P]=(0,a.useState)(null),[D,_]=(0,a.useState)(0),[M,z]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{const e=await p("suppliers"),r=v()?t:j(),a=v()&&t?e.filter((e=>e.marketId===t)):e.filter((e=>e.marketId===r));n(a)})()}),[t]);const I=e=>{const{name:t,value:r}=e.target;u((e=>d(d({},e),{},{[t]:r})))},L=async(e,t)=>{if(z(!0),t>=e.length)return alert("Todos los productos de la factura han sido procesados y cargados al inventario."),h([]),void z(!1);const r=e[t],a=(await p("products")).find((e=>e.name===r.description));a?(C(r),P(a),_(t),w(!0)):(await T(r,"new"),L(e,t+1))},T=async(e,r)=>{const a=v()?t:j(),n=await p("products");let l=[...n];if("new"===r){const t={id:Date.now(),name:e.description,barcode:"",category:"Sin Categor\xeda",subcategory:"",unit:"unidad",price:e.unitPrice,cost:e.unitPrice,markup:0,supplier:"",minStock:0,image:null,marketId:a,lots:[{id:Date.now(),quantity:e.quantity,expiryDate:""}]};t.stock=t.lots[0].quantity,await f("products",t),l.push(t)}else if("update"===r){const t=n.find((t=>t.name===e.description));if(t){const r={id:Date.now(),quantity:e.quantity,expiryDate:""},a=[...t.lots||[],r].sort(((e,t)=>new Date(e.expiryDate)-new Date(t.expiryDate))),n=a.reduce(((e,t)=>e+t.quantity),0),s=d(d({},t),{},{stock:n,lots:a});await g("products",s),l=l.map((e=>e.id===s.id?s:e))}}y("products",l)},F=(e,t,r)=>{h((a=>a.map((a=>{if(a.id===e){const e=d(d({},a),{},{[t]:r});"quantity"!==t&&"unitPrice"!==t||(e.subtotal=e.quantity*e.unitPrice);const n=e.quantity*e.unitPrice,l=Math.abs(n-e.subtotal)<.01;return d(d({},e),{},{isConsistent:l})}return a}))))};return v()||k()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Gesti\xf3n de Proveedores"}),(0,N.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200",children:"Listado de Proveedores"}),(0,N.jsx)("button",{onClick:()=>{i(null),u({id:Date.now(),name:"",lastName:"",dni:"",address:"",email:"",whatsapp:"",paymentMethods:"",marketId:""}),s(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Agregar Proveedor"})]}),l&&(0,N.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg shadow-inner mb-6 dark:bg-gray-700",children:[(0,N.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:o?"Editar Proveedor":"Nuevo Proveedor"}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[v()&&(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mercado"}),(0,N.jsxs)("select",{name:"marketId",value:c.marketId,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-600 dark:border-gray-500 dark:text-white",required:!0,children:[(0,N.jsx)("option",{value:"",children:"Seleccionar mercado"}),JSON.parse(localStorage.getItem("markets")||"[]").map((e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Nombre"}),(0,N.jsx)("input",{type:"text",name:"name",value:c.name,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white",required:!0})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Apellido"}),(0,N.jsx)("input",{type:"text",name:"lastName",value:c.lastName,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"DNI"}),(0,N.jsx)("input",{type:"text",name:"dni",value:c.dni,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Direcci\xf3n"}),(0,N.jsx)("input",{type:"text",name:"address",value:c.address,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email"}),(0,N.jsx)("input",{type:"email",name:"email",value:c.email,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"WhatsApp"}),(0,N.jsx)("input",{type:"text",name:"whatsapp",value:c.whatsapp,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{className:"md:col-span-2",children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"M\xe9todos de Pago"}),(0,N.jsx)("textarea",{name:"paymentMethods",value:c.paymentMethods,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white",rows:"3"})]})]}),(0,N.jsxs)("div",{className:"mt-6 flex justify-end space-x-3",children:[(0,N.jsx)("button",{type:"button",onClick:()=>s(!1),className:"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:bg-gray-600 dark:border-gray-500 dark:text-gray-300 dark:hover:bg-gray-500",children:"Cancelar"}),(0,N.jsx)("button",{type:"button",onClick:async()=>{const e=v()?t:j(),r=d(d({},c),{},{marketId:e}),a=await p("suppliers");let l;o?(l=a.map((e=>e.id===o.id?r:e)),await g("suppliers",r)):(l=[...a,r],await f("suppliers",r)),y("suppliers",l);const m=v()&&!t?l:l.filter((t=>t.marketId===e));n(m),s(!1),i(null),u({id:Date.now(),name:"",lastName:"",dni:"",address:"",email:"",whatsapp:"",paymentMethods:"",marketId:""})},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700",children:"Guardar Proveedor"})]})]}),(0,N.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner mb-6 dark:bg-gray-700",children:r.length>0?(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-600",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Nombre"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Contacto"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"M\xe9todos de Pago"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acciones"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:r.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,N.jsxs)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:[e.name," ",e.lastName]}),(0,N.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:e.dni})]}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.email}),(0,N.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:["WhatsApp: ",e.whatsapp]})]}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.paymentMethods})}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,N.jsx)("button",{onClick:()=>(e=>{i(e),u(e),s(!0)})(e),className:"text-blue-600 hover:text-blue-900 mr-4",children:"Editar"}),(0,N.jsx)("button",{onClick:()=>(async e=>{await x("suppliers",e);const r=await p("suppliers");y("suppliers",r);const a=v()?t:j(),l=v()&&!t?r:r.filter((e=>e.marketId===a));n(l)})(e.id),className:"text-red-600 hover:text-red-900",children:"Eliminar"})]})]},e.id)))})]}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay proveedores registrados en este mercado."})}),(0,N.jsxs)("div",{className:"mt-8",children:[(0,N.jsx)(W,{onDataExtracted:e=>{h(e)}}),m.length>0&&(0,N.jsxs)("div",{className:"mt-6 bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Productos Extra\xeddos de Factura"}),(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-600",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Cantidad"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Descripci\xf3n"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Precio Unitario"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Subtotal"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Inconsistencia"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:m.map(((e,t)=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,N.jsx)("input",{type:"number",value:e.quantity,onChange:t=>F(e.id,"quantity",parseFloat(t.target.value)||0),className:"w-20 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,N.jsx)("input",{type:"text",value:e.description,onChange:t=>F(e.id,"description",t.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,N.jsx)("input",{type:"number",value:e.unitPrice,onChange:t=>F(e.id,"unitPrice",parseFloat(t.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:(0,N.jsx)("input",{type:"number",value:e.subtotal,onChange:t=>F(e.id,"subtotal",parseFloat(t.target.value)||0),className:"w-24 px-2 py-1 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-white",children:!e.isConsistent&&(0,N.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",viewBox:"0 0 20 20",fill:"currentColor",title:"Inconsistencia detectada",children:(0,N.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},e.id)))})]}),(0,N.jsx)("button",{onClick:()=>{L(m,0)},className:"mt-4 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",disabled:M,children:M?"Cargando...":"Cargar Productos al Inventario"})]})]})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},G=e=>{let{selectedMarket:t}=e;const[r,n]=(0,a.useState)({rent:0,employees:0,salaries:0,taxes:0,services:0,other:0}),[l,s]=(0,a.useState)(0),[o,i]=(0,a.useState)(20),[c,u]=(0,a.useState)(0);(0,a.useEffect)((()=>{(async()=>{const e=v()?t:j();if(e){const t=(await p("expenses")).find((t=>t.id===e))||{id:e,marketId:e,rent:0,employees:0,salaries:0,taxes:0,services:0,other:0};n(t);const r=(await p("salesTarget")).find((t=>t.id===e))||{id:e,marketId:e,value:0};s(r.value||0);const a=(await p("desiredProfit")).find((t=>t.id===e))||{id:e,marketId:e,value:20};i(a.value||20)}})()}),[t]),(0,a.useEffect)((()=>{f()}),[r,l,o]);const m=async e=>{const{name:a,value:l}=e.target,s=d(d({},r),{},{[a]:parseFloat(l)||0});n(s);const o=v()?t:j();await g("expenses",d(d({},s),{},{id:o,marketId:o}))},f=()=>{const e=Object.values(r).reduce(((e,t)=>e+(parseFloat(t)||0)),0);if(l<=0)return void u(0);const t=e/l*100+o;if(t>=100)return void u(1/0);u(100*(100/(100-t)-1))};return v()||k()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Calculadora de Sobreprecio"}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,N.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Gastos Fijos Mensuales"}),(0,N.jsxs)("div",{className:"space-y-3",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Alquiler ($)"}),(0,N.jsx)("input",{type:"number",name:"rent",value:r.rent,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Empleados (cantidad)"}),(0,N.jsx)("input",{type:"number",name:"employees",value:r.employees,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sueldos ($)"}),(0,N.jsx)("input",{type:"number",name:"salaries",value:r.salaries,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Impuestos ($)"}),(0,N.jsx)("input",{type:"number",name:"taxes",value:r.taxes,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Servicios ($)"}),(0,N.jsx)("input",{type:"number",name:"services",value:r.services,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Otros Gastos ($)"}),(0,N.jsx)("input",{type:"number",name:"other",value:r.other,onChange:m,className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]})]}),(0,N.jsxs)("p",{className:"text-lg font-bold text-right mt-4 text-gray-800 dark:text-white",children:["Total Gastos: $",Object.values(r).reduce(((e,t)=>e+(parseFloat(t)||0)),0).toFixed(2)]})]}),(0,N.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Objetivos y Resultados"}),(0,N.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ventas Mensuales Esperadas ($)"}),(0,N.jsx)("input",{type:"number",value:l,onChange:async e=>{const r=parseFloat(e.target.value)||0;s(r);const a=v()?t:j();await g("salesTarget",{id:a,marketId:a,value:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]}),(0,N.jsxs)("div",{children:[(0,N.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Margen de Ganancia Deseado (%)"}),(0,N.jsx)("input",{type:"number",value:o,onChange:async e=>{const r=parseFloat(e.target.value)||0;i(r);const a=v()?t:j();await g("desiredProfit",{id:a,marketId:a,value:r})},className:"w-full px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-600 dark:border-gray-500 dark:text-white"})]})]}),(0,N.jsxs)("div",{className:"bg-white p-4 rounded-md shadow-sm dark:bg-gray-800",children:[(0,N.jsx)("h4",{className:"text-lg font-medium text-gray-800 dark:text-white mb-2",children:"Sobreprecio Sugerido"}),(0,N.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:c===1/0?"Imposible con estos datos":"".concat(c.toFixed(2),"%")}),(0,N.jsx)("p",{className:"text-sm text-gray-600 dark:text-gray-300 mt-2",children:"Este porcentaje de sobreprecio sobre el costo de tus productos te permitir\xeda cubrir tus gastos fijos y alcanzar tu margen de ganancia deseado, asumiendo las ventas mensuales esperadas."})]})]})]})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},Y=()=>{const[e,t]=(0,a.useState)({type:"",text:""}),r=b();return(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Backup y Restauraci\xf3n"}),e.text&&(0,N.jsx)("div",{className:"p-3 mb-4 rounded-md ".concat("success"===e.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.text}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,N.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Exportar Datos"}),(0,N.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Descarga una copia de seguridad de todos tus datos en formato JSON. Este archivo puede ser usado para restaurar tu informaci\xf3n en el futuro."}),(0,N.jsx)("button",{onClick:async()=>{try{const e={};for(const t of c)(r&&"admin"===r.role||!t.startsWith("cashMovements_")&&!t.startsWith("cashRegisterState_")||t.includes(r.username))&&(e[t]=await p(t));const a=JSON.stringify(e,null,2),n=new Blob([a],{type:"application/json"}),l=URL.createObjectURL(n),s=document.createElement("a");s.href=l,s.download="minimarket_backup_".concat((new Date).toISOString().slice(0,10),".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(l),t({type:"success",text:"Backup exportado con \xe9xito."})}catch(e){console.error("Error exporting data:",e),t({type:"error",text:"Error al exportar backup: ".concat(e.message)})}},className:"w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Descargar Backup (JSON)"})]}),(0,N.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsx)("h3",{className:"text-lg font-medium text-gray-800 dark:text-white mb-4",children:"Importar Backup"}),(0,N.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Sube un archivo JSON de backup para restaurar tus datos. \xa1Atenci\xf3n! Esto sobrescribir\xe1 los datos existentes."}),(0,N.jsx)("input",{type:"file",accept:".json",onChange:async e=>{const r=e.target.files[0];if(!r)return;const a=new FileReader;a.onload=async e=>{try{const r=JSON.parse(e.target.result);if(!window.confirm("\xbfEst\xe1s seguro de que quieres importar este backup? Esto sobrescribir\xe1 los datos actuales."))return;for(const e of c)if(r[e]){await h(e);for(const t of r[e])await g(e,t)}t({type:"success",text:"Backup importado con \xe9xito. Recarga la p\xe1gina para ver los cambios."})}catch(r){console.error("Error importing data:",r),t({type:"error",text:"Error al importar backup: ".concat(r.message)})}},a.readAsText(r)},className:"w-full text-sm text-gray-500 dark:text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})]})]}),(0,N.jsxs)("div",{className:"mt-8 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-yellow-800 rounded-lg dark:bg-yellow-800 dark:border-yellow-600 dark:text-yellow-100",children:[(0,N.jsx)("p",{className:"font-bold",children:"Nota sobre Backups Autom\xe1ticos:"}),(0,N.jsx)("p",{className:"text-sm",children:'La funcionalidad de "Backup diario autom\xe1tico en NAS o almacenamiento externo" requiere una integraci\xf3n con un sistema de servidor o un servicio en la nube (como AWS S3, Google Cloud Storage, etc.) y no puede ser implementada directamente desde una aplicaci\xf3n web de frontend puro. Esto implicar\xeda un backend que gestione la conexi\xf3n con el NAS/almacenamiento y la programaci\xf3n de las tareas de backup.'})]})]})},K=e=>{let{selectedMarket:t}=e;const[r,n]=(0,a.useState)([]),[l,s]=(0,a.useState)([]),[o,i]=(0,a.useState)([]),[c,u]=(0,a.useState)(""),[m,h]=(0,a.useState)(""),[b,w]=(0,a.useState)(0);(0,a.useEffect)((()=>{(async()=>{const e=await p("products"),r=await p("onlineOrders"),a=await p("deliveryZones"),l=v()?t:j(),o=v()&&t?e.filter((e=>e.marketId===t)):e.filter((e=>e.marketId===l)),d=v()&&t?r.filter((e=>e.marketId===t)):r.filter((e=>e.marketId===l)),c=v()&&t?a.filter((e=>e.marketId===t)):a.filter((e=>e.marketId===l));n(o),s(d),i(c)})()}),[t]);return v()||k()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Ventas por Web (Pedidos Online)"}),(0,N.jsxs)("div",{className:"mb-8",children:[(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Gesti\xf3n de Zonas de Reparto"}),(0,N.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,N.jsx)("input",{type:"text",placeholder:"Nombre de la zona (Ej: Centro)",value:c,onChange:e=>u(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("input",{type:"text",placeholder:"Tiempo estimado (Ej: 30-45 min)",value:m,onChange:e=>h(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("input",{type:"number",placeholder:"Costo de env\xedo ($)",value:b,onChange:e=>w(parseFloat(e.target.value)||0),className:"px-3 py-2 border border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsx)("button",{onClick:async()=>{if(!c||!m||b<0)return;const e=v()?t:j(),r={id:Date.now(),name:c,estimatedTime:m,price:b,marketId:e},a=[...o,r];await f("deliveryZones",r),i(a),y("deliveryZones",a),u(""),h(""),w(0)},className:"md:col-span-3 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Agregar Zona de Reparto"})]}),o.length>0?(0,N.jsx)("ul",{className:"space-y-2",children:o.map((e=>(0,N.jsxs)("li",{className:"flex justify-between items-center bg-gray-50 p-3 rounded-md dark:bg-gray-700 dark:text-gray-300",children:[(0,N.jsxs)("span",{children:[e.name," - ",e.estimatedTime," - $",e.price.toFixed(2)]}),(0,N.jsx)("button",{onClick:()=>(async e=>{await x("deliveryZones",e);const t=o.filter((t=>t.id!==e));i(t),y("deliveryZones",t)})(e.id),className:"text-red-600 hover:text-red-800",children:"Eliminar"})]},e.id)))}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay zonas de reparto configuradas."})]}),(0,N.jsxs)("div",{className:"mb-8",children:[(0,N.jsx)("h3",{className:"text-xl font-semibold text-gray-700 dark:text-gray-200 mb-4",children:"Pedidos Online Recibidos"}),l.length>0?(0,N.jsx)("div",{className:"space-y-4",children:l.map((e=>{var t;return(0,N.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:[(0,N.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,N.jsxs)("h4",{className:"font-bold text-lg text-gray-800 dark:text-white",children:["Pedido #",e.id," - ",new Date(e.date).toLocaleString()]}),(0,N.jsx)("span",{className:"px-2 py-1 rounded-full text-sm font-semibold ".concat("Pendiente"===e.status?"bg-yellow-100 text-yellow-800":"Procesado"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})]}),(0,N.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("strong",{children:"Cliente:"})," ",e.customerName]}),(0,N.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("strong",{children:"Direcci\xf3n:"})," ",e.deliveryAddress]}),(0,N.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("strong",{children:"Zona:"})," ",(null===(t=o.find((t=>t.id===e.deliveryZoneId)))||void 0===t?void 0:t.name)||"N/A"]}),(0,N.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("strong",{children:"Total:"})," $",e.total.toFixed(2)]}),(0,N.jsxs)("p",{className:"text-gray-700 dark:text-gray-300",children:[(0,N.jsx)("strong",{children:"M\xe9todo de Pago:"})," ",e.paymentMethod]}),(0,N.jsx)("p",{className:"font-medium mt-2 text-gray-700 dark:text-gray-300",children:"Productos:"}),(0,N.jsx)("ul",{className:"list-disc list-inside text-sm ml-4 text-gray-700 dark:text-gray-300",children:e.items.map(((e,t)=>(0,N.jsxs)("li",{children:[e.name," x ",e.quantity," ($",e.subtotal.toFixed(2),")"]},t)))}),"Pendiente"===e.status&&(0,N.jsxs)("div",{className:"mt-4 flex space-x-2",children:[(0,N.jsx)("button",{onClick:()=>(async e=>{const t=l.find((t=>t.id===e));if(t){const r=d(d({},t),{},{status:"Procesado",processedAt:(new Date).toISOString()});await g("onlineOrders",r);const a=l.map((t=>t.id===e?r:t));s(a),y("onlineOrders",a),alert("Pedido ".concat(e," procesado."))}})(e.id),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Procesar Pedido"}),(0,N.jsx)("button",{onClick:()=>(async e=>{const t=l.find((t=>t.id===e));if(t){const r=d(d({},t),{},{status:"Rechazado",rejectedAt:(new Date).toISOString()});await g("onlineOrders",r);const a=l.map((t=>t.id===e?r:t));s(a),y("onlineOrders",a),alert("Pedido ".concat(e," rechazado."))}})(e.id),className:"bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Rechazar Pedido"})]})]},e.id)}))}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay pedidos online pendientes."})]}),(0,N.jsxs)("div",{className:"mt-8 p-4 bg-blue-50 border-l-4 border-blue-400 text-blue-800 rounded-lg dark:bg-blue-800 dark:border-blue-600 dark:text-blue-100",children:[(0,N.jsx)("p",{className:"font-bold",children:"Nota sobre la P\xe1gina Web P\xfablica:"}),(0,N.jsx)("p",{className:"text-sm",children:'La implementaci\xf3n de una "P\xe1gina web p\xfablica" y su integraci\xf3n con pasarelas de pago (Mercado Pago), moto-mandados o PedidosYa, as\xed como las notificaciones en tiempo real, requieren un backend robusto y APIs externas. Este dashboard gestiona la visualizaci\xf3n y procesamiento de los pedidos que hipot\xe9ticamente llegar\xedan desde esa p\xe1gina web externa.'})]})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado"})},J=e=>{let{onSelectMarket:t,onClose:r}=e;const[n,l]=(0,a.useState)([]),[s,o]=(0,a.useState)(""),[i,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)("");(0,a.useEffect)((()=>{(async()=>{const e=await p("markets");l(e),e.length>0&&o(e[0].id)})()}),[]);return(0,N.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md dark:bg-gray-800",children:[(0,N.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,N.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Selecciona un Mercado"})}),(0,N.jsx)("p",{className:"text-gray-700 dark:text-gray-300 mb-4",children:"Como administrador, debes seleccionar el mercado que deseas gestionar."}),(0,N.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,N.jsxs)("select",{value:s,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white",children:[0===n.length&&(0,N.jsx)("option",{value:"",children:"No hay mercados disponibles"}),n.map((e=>(0,N.jsx)("option",{value:e.id,children:e.name},e.id)))]}),(0,N.jsx)("button",{onClick:()=>d(!0),className:"p-2 bg-green-500 text-white rounded-full hover:bg-green-600",title:"Agregar nuevo mercado",children:(0,N.jsx)("span",{className:"text-xl font-bold leading-none",children:"+"})})]}),i&&(0,N.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,N.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Nombre del nuevo mercado",className:"w-full border p-2 rounded dark:bg-gray-700 dark:border-gray-600 dark:text-white"}),(0,N.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,N.jsx)("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 dark:text-gray-300",children:"Cancelar"}),(0,N.jsx)("button",{onClick:async()=>{if(!c.trim())return;await f("markets",{name:c});const e=await p("markets");l(e),o(e[e.length-1].id),u(""),d(!1)},className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Guardar"})]})]}),(0,N.jsx)("button",{onClick:()=>{s?t(s):alert("Por favor, selecciona un mercado.")},disabled:!s,className:"w-full px-4 py-2 rounded-lg transition-colors ".concat(s?"bg-blue-600 hover:bg-blue-700 text-white":"bg-gray-400 text-gray-700 cursor-not-allowed dark:bg-gray-600 dark:text-gray-300"),children:"Continuar"})]})})},X=()=>{const[e,t]=(0,a.useState)([]),[r,n]=(0,a.useState)({type:"",text:""});(0,a.useEffect)((()=>{(async()=>{const e=(await p("users")).filter((e=>"admin"!==e.role));t(e)})()}),[]);const l=async function(r,a){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;n({type:"",text:""});const s=e.find((e=>e.id===r));if(!s)return;let o=d({},s),i="";switch(a){case"resetDays":o.daysRemaining=30,i="D\xedas de suscripci\xf3n de ".concat(o.username," reseteados a 30.");break;case"blockAccess":o.accessBlocked=!0,i="Acceso de ".concat(o.username," bloqueado.");break;case"extendDays":o.daysRemaining=(o.daysRemaining||0)+(parseInt(l)||0),i="D\xedas de suscripci\xf3n de ".concat(o.username," extendidos en ").concat(l," d\xedas.");break;case"sendReminder":i="Recordatorio de pago enviado a ".concat(o.username,". (Simulado)");break;case"unblockAccess":o.accessBlocked=!1,i="Acceso de ".concat(o.username," desbloqueado.");break;default:return}try{await g("users",o);const a=e.map((e=>e.id===r?o:e));t(a),y("users",a),n({type:"success",text:i})}catch(c){n({type:"error",text:"Error al realizar la acci\xf3n: ".concat(c.message)})}},s=e=>Math.random()>.5?"Online":"Offline",o=e=>{const t=Math.floor(120*Math.random());return t<60?"Hace ".concat(t," min"):"Hace ".concat(Math.floor(t/60)," hr ").concat(t%60," min")};return v()?(0,N.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md dark:bg-gray-800",children:[(0,N.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white mb-6",children:"Panel de Administraci\xf3n de Usuarios"}),r.text&&(0,N.jsx)("div",{className:"p-3 mb-4 rounded-md ".concat("success"===r.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:r.text}),(0,N.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg shadow-inner dark:bg-gray-700",children:e.length>0?(0,N.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[(0,N.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-600",children:(0,N.jsxs)("tr",{children:[(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Usuario"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Rol"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Mercado"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Estado"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"\xdaltima Actividad"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"D\xedas Restantes"}),(0,N.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider dark:text-gray-300",children:"Acciones"})]})}),(0,N.jsx)("tbody",{className:"bg-white divide-y divide-gray-200 dark:bg-gray-800 dark:divide-gray-700",children:e.map((e=>(0,N.jsxs)("tr",{children:[(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.username})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.role})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:e.marketId||"N/A"})}),(0,N.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,N.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Online"===s(e.id)?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800 dark:bg-gray-600 dark:text-gray-200"),children:s(e.id)}),e.accessBlocked&&(0,N.jsx)("span",{className:"ml-2 px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Bloqueado"})]}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:o(e.id)})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,N.jsx)("div",{className:"text-sm text-gray-900 dark:text-white",children:void 0!==e.daysRemaining?"".concat(e.daysRemaining," d\xedas"):"N/A"})}),(0,N.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,N.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,N.jsx)("button",{onClick:()=>l(e.id,"resetDays"),className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200",children:"Resetear D\xedas"}),e.accessBlocked?(0,N.jsx)("button",{onClick:()=>l(e.id,"unblockAccess"),className:"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-md hover:bg-green-200",children:"Desbloquear"}):(0,N.jsx)("button",{onClick:()=>l(e.id,"blockAccess"),className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-md hover:bg-red-200",children:"Bloquear Acceso"}),(0,N.jsx)("button",{onClick:()=>l(e.id,"extendDays",30),className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-md hover:bg-purple-200",children:"Extender 30 D\xedas"}),(0,N.jsx)("button",{onClick:()=>l(e.id,"sendReminder"),className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200",children:"Recordatorio Pago"})]})})]},e.id)))})]}):(0,N.jsx)("p",{className:"text-gray-500 dark:text-gray-300",children:"No hay usuarios registrados (excepto administradores)."})})]}):(0,N.jsx)("div",{className:"text-center py-10 text-gray-800 dark:text-white",children:"Acceso no autorizado. Solo el administrador principal puede ver esta secci\xf3n."})},Z=()=>{const e=b();if(!e)return;const t=JSON.parse(localStorage.getItem("cashRegisterState_".concat(e.username)));if(null===t||"closed"===t)console.log("[BOT] ".concat(e.username,": \xa1Recuerda abrir la caja para tu turno!"));else if("open"===t){const t=JSON.parse(localStorage.getItem("cashMovements_".concat(e.username))).find((e=>"opening"===e.type&&"open"===e.status));(new Date-new Date(t.date))/36e5>8&&console.log("[BOT] ".concat(e.username,": \xa1Tu turno est\xe1 por terminar! Recuerda cerrar la caja."))}if("admin"===e.role||"market"===e.role){const t=JSON.parse(localStorage.getItem("sales"))||[],r=e.marketId||null,a=t.filter((e=>"current_account"===e.paymentMethod&&(null===r||e.marketId===r))),n={};a.forEach((e=>{n[e.customerName]||(n[e.customerName]={name:e.customerName,totalDebt:0,phone:e.customerPhone}),n[e.customerName].totalDebt+=e.total})),Object.values(n).forEach((t=>{t.totalDebt>0&&console.log("[BOT] ".concat(e.username,": \xa1Recordatorio! El cliente ").concat(t.name," debe $").concat(t.totalDebt.toFixed(2),"."))}))}},ee=()=>{const e=navigator.userAgent;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|rim)|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(d|ex)|ny(g|mo)|ap(ad|im)|aq(t|u2|x3)|as(te|us)|attw|au(t|v )|aimu|aver|bi(lg|si)|br(ez|r )|bu(ck|n )|bx(id|r )|c55\/|capi|ccwa|cdm\-|cell|chtm|cl(ad|uk)|co(mp|nd)|craw|da(is|eo)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(at|te)|ew(ic|id)|fg(lo|sz)|fly(?:\-|_)|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c|ti)|hu(aw|tc)|i\-mo|ipaq|ipon|iq(at|dv|lc)|iris|jack|jimi|kddi|kgt|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50t|\-m|-v|490|500)|leno|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|ad|ti)|mt(p1|wv)|ne(ad|nv|on|un)|ng(01|j |m )|nl(al|dn)|nokia( ru)?|nn(02|v )|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-x|r )|phil|pire|pl(ay|uc)|pn\-be|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-m|\-r|f5)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|pn|to|sh)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|un|us)|sh(mo|ow)|si(em|v )|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(us|v )|sy(01|mb)|t2(mo|v )|tdg\-|tel(i|m)|tim\-|t\-mo|tk(a|x)|tor(m|pt)|tr(ad|h )|ts(70|m\-|p[ad])|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]0|\-v)|vm40|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))?"mobile":/(ipad|tablet|android(?!.*mobile))/i.test(e)?"tablet":"desktop"},te=()=>{const[e,t]=(0,a.useState)("products"),[r,n]=(0,a.useState)(navigator.onLine),[l,s]=(0,a.useState)(null),[o,i]=(0,a.useState)(null),[d,m]=(0,a.useState)(!1),[f,g]=(0,a.useState)(!0),[x,h]=(0,a.useState)("desktop");(0,a.useEffect)((()=>{(async()=>{await(async()=>{const e=(await u()).transaction(c,"readwrite");for(const t of c){const r=e.objectStore(t),a=r.count();await new Promise(((e,n)=>{a.onsuccess=()=>{0===a.result&&((JSON.parse(localStorage.getItem(t))||[]).forEach((e=>{r.add(e)})),console.log("IndexedDB store '".concat(t,"' initialized from localStorage."))),e()},a.onerror=()=>n(a.error)}))}console.log("IndexedDB initialization complete.")})();const e=b();s(e),e&&v(e)&&m(!0),g(!1)})();const e=()=>{n(!0),(async()=>{console.log("Sincronizando con backend...");for(const e of c){const t=await p(e);t.length>0&&console.log("Enviando ".concat(e," a backend:"),t)}console.log("Sincronizaci\xf3n con backend completada.")})()},t=()=>n(!1);window.addEventListener("online",e),window.addEventListener("offline",t),h(ee());const r=()=>h(ee());return window.addEventListener("resize",r),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t),window.removeEventListener("resize",r)}}),[]),(0,a.useEffect)((()=>{if(l){Z();const e=setInterval(Z,36e5);return()=>clearInterval(e)}}),[l]);const y=e=>{s(e),v(e)?m(!0):t("products")};return(0,N.jsxs)("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[l&&(0,N.jsx)(O,{currentView:e,setCurrentView:t,isOnline:r,currentUser:l,deviceType:x,onLogout:()=>{localStorage.removeItem("currentUser"),s(null),i(null),t("login")}}),(0,N.jsx)("main",{className:"container mx-auto px-4 py-8",children:(()=>{if(f)return(0,N.jsx)("div",{className:"text-center py-10 text-lg font-medium dark:text-gray-300",children:"Cargando..."});if(!l)return(0,N.jsx)(A,{onLogin:y});if(v(l)&&!o&&!["markets","backupRestore","userManagement"].includes(e))return(0,N.jsxs)("div",{className:"text-center py-10",children:[(0,N.jsx)("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4",children:"Por favor, selecciona un mercado para gestionar."}),(0,N.jsx)("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-colors",children:"Seleccionar Mercado"})]});switch(e){case"products":default:return(0,N.jsx)(P,{isOnline:r,selectedMarket:o});case"sales":return(0,N.jsx)(z,{isOnline:r,selectedMarket:o});case"reports":return(0,N.jsx)(F,{selectedMarket:o});case"markets":return(0,N.jsx)($,{onSelectMarket:i});case"cashRegister":return(0,N.jsx)(B,{selectedMarket:o});case"currentAccounts":return(0,N.jsx)(q,{selectedMarket:o});case"orders":return(0,N.jsx)(H,{selectedMarket:o});case"suppliers":return(0,N.jsx)(Q,{selectedMarket:o});case"markupCalculator":return(0,N.jsx)(G,{selectedMarket:o});case"webSales":return(0,N.jsx)(K,{selectedMarket:o});case"backupRestore":return(0,N.jsx)(Y,{});case"userManagement":return(0,N.jsx)(X,{})}})()}),d&&l&&v(l)&&(0,N.jsx)(J,{onSelectMarket:e=>{i(e),m(!1),t("products")},onClose:()=>{}})]})};(0,n.H)(document.getElementById("root")).render((0,N.jsx)(a.StrictMode,{children:(0,N.jsx)(te,{})}))})();
//# sourceMappingURL=main.7ec427ad.js.map